up
	@mv config.c Modules
	@echo "The Makefile was updated, you may need to re-run make."


Programs/_testembed: Programs/_testembed.o $(LIBRARY) $(LDLIBRARY) $(PY3LIBRARY) $(EXPORTSYMS)
	$(LINKCC) $(PY_CORE_LDFLAGS) $(LINKFORSHARED) -o $@ Programs/_testembed.o $(BLDLIBRARY) $(LIBS) $(MODLIBS) $(SYSLIBS)

############################################################################
# Importlib

Programs/_freeze_importlib.o: Programs/_freeze_importlib.c Makefile

Programs/_freeze_importlib: Programs/_freeze_importlib.o $(LIBRARY_OBJS_OMIT_FROZEN)
	$(LINKCC) $(PY_CORE_LDFLAGS) -o $@ Programs/_freeze_importlib.o $(LIBRARY_OBJS_OMIT_FROZEN) $(LIBS) $(MODLIBS) $(SYSLIBS)

.PHONY: regen-importlib
regen-importlib: Programs/_freeze_importlib
	# Regenerate Python/importlib_external.h
	# from Lib/importlib/_bootstrap_external.py using _freeze_importlib
	./Programs/_freeze_importlib importlib._bootstrap_external \
	    $(srcdir)/Lib/importlib/_bootstrap_external.py \
	    $(srcdir)/Python/importlib_external.h.new
	$(UPDATE_FILE) $(srcdir)/Python/importlib_external.h $(srcdir)/Python/importlib_external.h.new
	# Regenerate Python/importlib.h from Lib/importlib/_bootstrap.py
	# using _freeze_importlib
	./Programs/_freeze_importlib importlib._bootstrap \
	    $(srcdir)/Lib/importlib/_bootstrap.py \
	    $(srcdir)/Python/importlib.h.new
	$(UPDATE_FILE) $(srcdir)/Python/importlib.h $(srcdir)/Python/importlib.h.new
	# Regenerate Python/importlib_zipimport.h from Lib/zipimport.py
	# using _freeze_importlib
	./Programs/_freeze_importlib zipimport \
	    $(srcdir)/Lib/zipimport.py \
	    $(srcdir)/Python/importlib_zipimport.h.new
	$(UPDATE_FILE) $(srcdir)/Python/importlib_zipimport.h $(srcdir)/Python/importlib_zipimport.h.new

regen-abidump: all
	@$(MKDIR_P) $(srcdir)/Doc/data/
	abidw "libpython$(LDVERSION).so" --no-architecture --out-file $(srcdir)/Doc/data/python$(LDVERSION).abi.new
	@$(UPDATE_FILE) $(srcdir)/Doc/data/python$(LDVERSION).abi $(srcdir)/Doc/data/python$(LDVERSION).abi.new

check-abidump: all
		abidiff $(srcdir)/Doc/data/python$(LDVERSION).abi "libpython$(LDVERSION).so" --drop-private-types --no-architecture --no-added-syms

############################################################################
# Regenerate all generated files

regen-all: regen-opcode regen-opcode-targets regen-typeslots regen-grammar \
	regen-token regen-keyword regen-symbol regen-ast regen-importlib clinic \
	regen-pegen-metaparser regen-pegen

############################################################################
# Special rules for object files

Modules/getbuildinfo.o: $(PARSER_OBJS) \
		$(OBJECT_OBJS) \
		$(PYTHON_OBJS) \
		$(MODULE_OBJS) \
		$(MODOBJS) \
		$(DTRACE_OBJS) \
		$(srcdir)/Modules/getbuildinfo.c
	$(CC) -c $(PY_CORE_CFLAGS) \
	      -DGITVERSION="\"`LC_ALL=C $(GITVERSION)`\"" \
	      -DGITTAG="\"`LC_ALL=C $(GITTAG)`\"" \
	      -DGITBRANCH="\"`LC_ALL=C $(GITBRANCH)`\"" \
	      -o $@ $(srcdir)/Modules/getbuildinfo.c

Modules/getpath.o: $(srcdir)/Modules/getpath.c Makefile
	$(CC) -c $(PY_CORE_CFLAGS) -DPYTHONPATH='"$(PYTHONPATH)"' \
		-DPREFIX='"$(prefix)"' \
		-DEXEC_PREFIX='"$(exec_prefix)"' \
		-DVERSION='"$(VERSION)"' \
		-DVPATH='"$(VPATH)"' \
		-o $@ $(srcdir)/Modules/getpath.c

Programs/python.o: $(srcdir)/Programs/python.c
	$(MAINCC) -c $(PY_CORE_CFLAGS) -o $@ $(srcdir)/Programs/python.c

Programs/_testembed.o: $(srcdir)/Programs/_testembed.c
	$(MAINCC) -c $(PY_CORE_CFLAGS) -o $@ $(srcdir)/Programs/_testembed.c

Modules/_sre.o: $(srcdir)/Modules/_sre.c $(srcdir)/Modules/sre.h $(srcdir)/Modules/sre_constants.h $(srcdir)/Modules/sre_lib.h

Modules/posixmodule.o: $(srcdir)/Modules/posixmodule.c $(srcdir)/Modules/posixmodule.h

Modules/grpmodule.o: $(srcdir)/Modules/grpmodule.c $(srcdir)/Modules/posixmodule.h

Modules/pwdmodule.o: $(srcdir)/Modules/pwdmodule.c $(srcdir)/Modules/posixmodule.h

Modules/signalmodule.o: $(srcdir)/Modules/signalmodule.c $(srcdir)/Modules/posixmodule.h

Python/dynload_shlib.o: $(srcdir)/Python/dynload_shlib.c Makefile
	$(CC) -c $(PY_CORE_CFLAGS) \
		-DSOABI='"$(SOABI)"' \
		-o $@ $(srcdir)/Python/dynload_shlib.c

Python/dynload_hpux.o: $(srcdir)/Python/dynload_hpux.c Makefile
	$(CC) -c $(PY_CORE_CFLAGS) \
		-DSHLIB_EXT='"$(EXT_SUFFIX)"' \
		-o $@ $(srcdir)/Python/dynload_hpux.c

Python/sysmodule.o: $(srcdir)/Python/sysmodule.c Makefile $(srcdir)/Include/pydtrace.h
	$(CC) -c $(PY_CORE_CFLAGS) \
		-DABIFLAGS='"$(ABIFLAGS)"' \
		$(MULTIARCH_CPPFLAGS) \
		-o $@ $(srcdir)/Python/sysmodule.c

Python/initconfig.o: $(srcdir)/Python/initconfig.c
	$(CC) -c $(PY_CORE_CFLAGS) \
		-DPLATLIBDIR='"$(PLATLIBDIR)"' \
		-o $@ $(srcdir)/Python/initconfig.c

$(IO_OBJS): $(IO_H)

.PHONY: regen-grammar
regen-grammar: regen-token
	# Regenerate Include/graminit.h and Python/graminit.c
	# from Grammar/Grammar using pgen
	@$(MKDIR_P) Include
	PYTHONPATH=$(srcdir) $(PYTHON_FOR_REGEN) -m Parser.pgen $(srcdir)/Grammar/Grammar \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Include/graminit.h.new \
		$(srcdir)/Python/graminit.c.new
	$(UPDATE_FILE) $(srcdir)/Include/graminit.h $(srcdir)/Include/graminit.h.new
	$(UPDATE_FILE) $(srcdir)/Python/graminit.c $(srcdir)/Python/graminit.c.new

.PHONY: regen-pegen-metaparser
regen-pegen-metaparser:
	@$(MKDIR_P) $(srcdir)/Tools/peg_generator/pegen
	PYTHONPATH=$(srcdir)/Tools/peg_generator $(PYTHON_FOR_REGEN) -m pegen -q python \
	$(srcdir)/Tools/peg_generator/pegen/metagrammar.gram \
	-o $(srcdir)/Tools/peg_generator/pegen/grammar_parser.py.new
	$(UPDATE_FILE) $(srcdir)/Tools/peg_generator/pegen/grammar_parser.py \
	$(srcdir)/Tools/peg_generator/pegen/grammar_parser.py.new

.PHONY: regen-pegen
regen-pegen:
	@$(MKDIR_P) $(srcdir)/Parser/pegen
	PYTHONPATH=$(srcdir)/Tools/peg_generator $(PYTHON_FOR_REGEN) -m pegen -q c \
		$(srcdir)/Grammar/python.gram \
		$(srcdir)/Grammar/Tokens \
		-o $(srcdir)/Parser/pegen/parse.new.c
	$(UPDATE_FILE) $(srcdir)/Parser/pegen/parse.c $(srcdir)/Parser/pegen/parse.new.c

.PHONY=regen-ast
regen-ast:
	# Regenerate Include/Python-ast.h and Python/Python-ast.c using Parser/asdl_c.py
	$(MKDIR_P) $(srcdir)/Include
	$(MKDIR_P) $(srcdir)/Python
	$(PYTHON_FOR_REGEN) $(srcdir)/Parser/asdl_c.py \
		$(srcdir)/Parser/Python.asdl \
		-H $(srcdir)/Include/Python-ast.h.new \
		-C $(srcdir)/Python/Python-ast.c.new

	$(UPDATE_FILE) $(srcdir)/Include/Python-ast.h $(srcdir)/Include/Python-ast.h.new
	$(UPDATE_FILE) $(srcdir)/Python/Python-ast.c $(srcdir)/Python/Python-ast.c.new

.PHONY: regen-opcode
regen-opcode:
	# Regenerate Include/opcode.h from Lib/opcode.py
	# using Tools/scripts/generate_opcode_h.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_opcode_h.py \
		$(srcdir)/Lib/opcode.py \
		$(srcdir)/Include/opcode.h.new
	$(UPDATE_FILE) $(srcdir)/Include/opcode.h $(srcdir)/Include/opcode.h.new

.PHONY: regen-token
regen-token:
	# Regenerate Doc/library/token-list.inc from Grammar/Tokens
	# using Tools/scripts/generate_token.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_token.py rst \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Doc/library/token-list.inc
	# Regenerate Include/token.h from Grammar/Tokens
	# using Tools/scripts/generate_token.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_token.py h \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Include/token.h
	# Regenerate Parser/token.c from Grammar/Tokens
	# using Tools/scripts/generate_token.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_token.py c \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Parser/token.c
	# Regenerate Lib/token.py from Grammar/Tokens
	# using Tools/scripts/generate_token.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_token.py py \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Lib/token.py

.PHONY: regen-keyword
regen-keyword:
	# Regenerate Lib/keyword.py from Grammar/python.gram and Grammar/Tokens
	# using Tools/peg_generator/pegen
	PYTHONPATH=$(srcdir)/Tools/peg_generator $(PYTHON_FOR_REGEN) -m pegen.keywordgen \
		$(srcdir)/Grammar/python.gram \
		$(srcdir)/Grammar/Tokens \
		$(srcdir)/Lib/keyword.py.new
	$(UPDATE_FILE) $(srcdir)/Lib/keyword.py $(srcdir)/Lib/keyword.py.new

.PHONY: regen-symbol
regen-symbol: $(srcdir)/Include/graminit.h
	# Regenerate Lib/symbol.py from Include/graminit.h
	# using Tools/scripts/generate_symbol_py.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Tools/scripts/generate_symbol_py.py \
		$(srcdir)/Include/graminit.h \
		$(srcdir)/Lib/symbol.py

Python/compile.o Python/symtable.o Python/ast_unparse.o Python/ast.o Python/future.o Parser/parsetok.o: $(srcdir)/Include/graminit.h $(srcdir)/Include/Python-ast.h

Python/getplatform.o: $(srcdir)/Python/getplatform.c
		$(CC) -c $(PY_CORE_CFLAGS) -DPLATFORM='"$(MACHDEP)"' -o $@ $(srcdir)/Python/getplatform.c

Python/importdl.o: $(srcdir)/Python/importdl.c
		$(CC) -c $(PY_CORE_CFLAGS) -I$(DLINCLDIR) -o $@ $(srcdir)/Python/importdl.c

Objects/unicodectype.o:	$(srcdir)/Objects/unicodectype.c \
				$(srcdir)/Objects/unicodetype_db.h

BYTESTR_DEPS = \
		$(srcdir)/Objects/stringlib/count.h \
		$(srcdir)/Objects/stringlib/ctype.h \
		$(srcdir)/Objects/stringlib/fastsearch.h \
		$(srcdir)/Objects/stringlib/find.h \
		$(srcdir)/Objects/stringlib/join.h \
		$(srcdir)/Objects/stringlib/partition.h \
		$(srcdir)/Objects/stringlib/split.h \
		$(srcdir)/Objects/stringlib/stringdefs.h \
		$(srcdir)/Objects/stringlib/transmogrify.h

UNICODE_DEPS = \
		$(srcdir)/Objects/stringlib/asciilib.h \
		$(srcdir)/Objects/stringlib/codecs.h \
		$(srcdir)/Objects/stringlib/count.h \
		$(srcdir)/Objects/stringlib/fastsearch.h \
		$(srcdir)/Objects/stringlib/find.h \
		$(srcdir)/Objects/stringlib/find_max_char.h \
		$(srcdir)/Objects/stringlib/localeutil.h \
		$(srcdir)/Objects/stringlib/partition.h \
		$(srcdir)/Objects/stringlib/replace.h \
		$(srcdir)/Objects/stringlib/split.h \
		$(srcdir)/Objects/stringlib/ucs1lib.h \
		$(srcdir)/Objects/stringlib/ucs2lib.h \
		$(srcdir)/Objects/stringlib/ucs4lib.h \
		$(srcdir)/Objects/stringlib/undef.h \
		$(srcdir)/Objects/stringlib/unicode_format.h \
		$(srcdir)/Objects/stringlib/unicodedefs.h

Objects/bytes_methods.o: $(srcdir)/Objects/bytes_methods.c $(BYTESTR_DEPS)
Objects/bytesobject.o: $(srcdir)/Objects/bytesobject.c $(BYTESTR_DEPS)
Objects/bytearrayobject.o: $(srcdir)/Objects/bytearrayobject.c $(BYTESTR_DEPS)

Objects/unicodeobject.o: $(srcdir)/Objects/unicodeobject.c $(UNICODE_DEPS)

Objects/odictobject.o: $(srcdir)/Objects/dict-common.h
Objects/dictobject.o: $(srcdir)/Objects/stringlib/eq.h $(srcdir)/Objects/dict-common.h
Objects/setobject.o: $(srcdir)/Objects/stringlib/eq.h

.PHONY: regen-opcode-targets
regen-opcode-targets:
	# Regenerate Python/opcode_targets.h from Lib/opcode.py
	# using Python/makeopcodetargets.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Python/makeopcodetargets.py \
		$(srcdir)/Python/opcode_targets.h.new
	$(UPDATE_FILE) $(srcdir)/Python/opcode_targets.h $(srcdir)/Python/opcode_targets.h.new

Python/ceval.o: $(srcdir)/Python/opcode_targets.h $(srcdir)/Python/ceval_gil.h \
		$(srcdir)/Python/condvar.h

Python/frozen.o: $(srcdir)/Python/importlib.h $(srcdir)/Python/importlib_external.h \
		$(srcdir)/Python/importlib_zipimport.h

# Generate DTrace probe macros, then rename them (PYTHON_ -> PyDTrace_) to
# follow our naming conventions. dtrace(1) uses the output filename to generate
# an include guard, so we can't use a pipeline to transform its output.
Include/pydtrace_probes.h: $(srcdir)/Include/pydtrace.d
	$(MKDIR_P) Include
	$(DTRACE) $(DFLAGS) -o $@ -h -s $<
	: sed in-place edit with POSIX-only tools
	sed 's/PYTHON_/PyDTrace_/' $@ > $@.tmp
	mv $@.tmp $@

Python/ceval.o: $(srcdir)/Include/pydtrace.h
Python/import.o: $(srcdir)/Include/pydtrace.h
Modules/gcmodule.o: $(srcdir)/Include/pydtrace.h

Python/pydtrace.o: $(srcdir)/Include/pydtrace.d $(DTRACE_DEPS)
	$(DTRACE) $(DFLAGS) -o $@ -G -s $< $(DTRACE_DEPS)

Objects/typeobject.o: Objects/typeslots.inc

.PHONY: regen-typeslots
regen-typeslots:
	# Regenerate Objects/typeslots.inc from Include/typeslotsh
	# using Objects/typeslots.py
	$(PYTHON_FOR_REGEN) $(srcdir)/Objects/typeslots.py \
		< $(srcdir)/Include/typeslots.h \
		$(srcdir)/Objects/typeslots.inc.new
	$(UPDATE_FILE) $(srcdir)/Objects/typeslots.inc $(srcdir)/Objects/typeslots.inc.new

############################################################################
# Header files

PYTHON_HEADERS= \
		$(srcdir)/Include/Python.h \
		$(srcdir)/Include/abstract.h \
		$(srcdir)/Include/asdl.h \
		$(srcdir)/Include/ast.h \
		$(srcdir)/Include/bitset.h \
		$(srcdir)/Include/bltinmodule.h \
		$(srcdir)/Include/boolobject.h \
		$(srcdir)/Include/bytearrayobject.h \
		$(srcdir)/Include/bytesobject.h \
		$(srcdir)/Include/cellobject.h \
		$(srcdir)/Include/ceval.h \
		$(srcdir)/Include/classobject.h \
		$(srcdir)/Include/code.h \
		$(srcdir)/Include/codecs.h \
		$(srcdir)/Include/compile.h \
		$(srcdir)/Include/complexobject.h \
		$(srcdir)/Include/context.h \
		$(srcdir)/Include/descrobject.h \
		$(srcdir)/Include/dictobject.h \
		$(srcdir)/Include/dynamic_annotations.h \
		$(srcdir)/Include/enumobject.h \
		$(srcdir)/Include/errcode.h \
		$(srcdir)/Include/eval.h \
		$(srcdir)/Include/fileobject.h \
		$(srcdir)/Include/fileutils.h \
		$(srcdir)/Include/floatobject.h \
		$(srcdir)/Include/frameobject.h \
		$(srcdir)/Include/funcobject.h \
		$(srcdir)/Include/genobject.h \
		$(srcdir)/Include/import.h \
		$(srcdir)/Include/interpreteridobject.h \
		$(srcdir)/Include/intrcheck.h \
		$(srcdir)/Include/iterobject.h \
		$(srcdir)/Include/listobject.h \
		$(srcdir)/Include/longintrepr.h \
		$(srcdir)/Include/longobject.h \
		$(srcdir)/Include/marshal.h \
		$(srcdir)/Include/memoryobject.h \
		$(srcdir)/Include/methodobject.h \
		$(srcdir)/Include/modsupport.h \
		$(srcdir)/Include/moduleobject.h \
		$(srcdir)/Include/namespaceobject.h \
		$(srcdir)/Include/node.h \
		$(srcdir)/Include/object.h \
		$(srcdir)/Include/objimpl.h \
		$(srcdir)/Include/odictobject.h \
		$(srcdir)/Include/opcode.h \
		$(srcdir)/Include/osdefs.h \
		$(srcdir)/Include/osmodule.h \
		$(srcdir)/Include/patchlevel.h \
		$(srcdir)/Include/picklebufobject.h \
		$(srcdir)/Include/pyarena.h \
		$(srcdir)/Include/pycapsule.h \
		$(srcdir)/Include/pyctype.h \
		$(srcdir)/Include/pydebug.h \
		$(srcdir)/Include/pydtrace.h \
		$(srcdir)/Include/pyerrors.h \
		$(srcdir)/Include/pyfpe.h \
		$(srcdir)/Include/pyframe.h \
		$(srcdir)/Include/pyhash.h \
		$(srcdir)/Include/pylifecycle.h \
		$(srcdir)/Include/pymacconfig.h \
		$(srcdir)/Include/pymacro.h \
		$(srcdir)/Include/pymath.h \
		$(srcdir)/Include/pymem.h \
		$(srcdir)/Include/pyport.h \
		$(srcdir)/Include/pystate.h \
		$(srcdir)/Include/pystrcmp.h \
		$(srcdir)/Include/pystrhex.h \
		$(srcdir)/Include/pystrtod.h \
		$(srcdir)/Include/pythonrun.h \
		$(srcdir)/Include/pythread.h \
		$(srcdir)/Include/pytime.h \
		$(srcdir)/Include/rangeobject.h \
		$(srcdir)/Include/setobject.h \
		$(srcdir)/Include/sliceobject.h \
		$(srcdir)/Include/structmember.h \
		$(srcdir)/Include/structseq.h \
		$(srcdir)/Include/symtable.h \
		$(srcdir)/Include/sysmodule.h \
		$(srcdir)/Include/token.h \
		$(srcdir)/Include/traceback.h \
		$(srcdir)/Include/tracemalloc.h \
		$(srcdir)/Include/tupleobject.h \
		$(srcdir)/Include/ucnhash.h \
		$(srcdir)/Include/unicodeobject.h \
		$(srcdir)/Include/warnings.h \
		$(srcdir)/Include/weakrefobject.h \
		\
		pyconfig.h \
		$(PARSER_HEADERS) \
		$(srcdir)/Include/Python-ast.h \
		\
		$(srcdir)/Include/cpython/abstract.h \
		$(srcdir)/Include/cpython/bytearrayobject.h \
		$(srcdir)/Include/cpython/bytesobject.h \
		$(srcdir)/Include/cpython/ceval.h \
		$(srcdir)/Include/cpython/code.h \
		$(srcdir)/Include/cpython/dictobject.h \
		$(srcdir)/Include/cpython/fileobject.h \
		$(srcdir)/Include/cpython/fileutils.h \
		$(srcdir)/Include/cpython/frameobject.h \
		$(srcdir)/Include/cpython/import.h \
		$(srcdir)/Include/cpython/initconfig.h \
		$(srcdir)/Include/cpython/interpreteridobject.h \
		$(srcdir)/Include/cpython/listobject.h \
		$(srcdir)/Include/cpython/methodobject.h \
		$(srcdir)/Include/cpython/object.h \
		$(srcdir)/Include/cpython/objimpl.h \
		$(srcdir)/Include/cpython/pyerrors.h \
		$(srcdir)/Include/cpython/pylifecycle.h \
		$(srcdir)/Include/cpython/pymem.h \
		$(srcdir)/Include/cpython/pystate.h \
		$(srcdir)/Include/cpython/sysmodule.h \
		$(srcdir)/Include/cpython/traceback.h \
		$(srcdir)/Include/cpython/tupleobject.h \
		$(srcdir)/Include/cpython/unicodeobject.h \
		\
		$(srcdir)/Include/internal/pycore_abstract.h \
		$(srcdir)/Include/internal/pycore_accu.h \
		$(srcdir)/Include/internal/pycore_atomic.h \
		$(srcdir)/Include/internal/pycore_byteswap.h \
		$(srcdir)/Include/internal/pycore_bytes_methods.h \
		$(srcdir)/Include/internal/pycore_call.h \
		$(srcdir)/Include/internal/pycore_ceval.h \
		$(srcdir)/Include/internal/pycore_code.h \
		$(srcdir)/Include/internal/pycore_condvar.h \
		$(srcdir)/Include/internal/pycore_context.h \
		$(srcdir)/Include/internal/pycore_dtoa.h \
		$(srcdir)/Include/internal/pycore_fileutils.h \
		$(srcdir)/Include/internal/pycore_getopt.h \
		$(srcdir)/Include/internal/pycore_gil.h \
		$(srcdir)/Include/internal/pycore_hamt.h \
		$(srcdir)/Include/internal/pycore_hashtable.h \
		$(srcdir)/Include/internal/pycore_import.h \
		$(srcdir)/Include/internal/pycore_initconfig.h \
		$(srcdir)/Include/internal/pycore_interp.h \
		$(srcdir)/Include/internal/pycore_object.h \
		$(srcdir)/Include/internal/pycore_pathconfig.h \
		$(srcdir)/Include/internal/pycore_pyerrors.h \
		$(srcdir)/Include/internal/pycore_pyhash.h \
		$(srcdir)/Include/internal/pycore_pylifecycle.h \
		$(srcdir)/Include/internal/pycore_pymem.h \
		$(srcdir)/Include/internal/pycore_pystate.h \
		$(srcdir)/Include/internal/pycore_runtime.h \
		$(srcdir)/Include/internal/pycore_sysmodule.h \
		$(srcdir)/Include/internal/pycore_traceback.h \
		$(srcdir)/Include/internal/pycore_tupleobject.h \
		$(srcdir)/Include/internal/pycore_warnings.h \
		$(DTRACE_HEADERS)

$(LIBRARY_OBJS) $(MODOBJS) Programs/python.o: $(PYTHON_HEADERS)


######################################################################

TESTOPTS=	$(EXTRATESTOPTS)
TESTPYTHON=	$(RUNSHARED) ./$(BUILDPYTHON) $(TESTPYTHONOPTS)
TESTRUNNER=	$(TESTPYTHON) $(srcdir)/Tools/scripts/run_tests.py
TESTTIMEOUT=	1200

.PHONY: test testall testuniversal buildbottest pythoninfo

# Remove "test_python_*" directories of previous failed test jobs.
# Pass TESTOPTS options because it can contain --tempdir option.
cleantest: build_all
	$(TESTRUNNER) $(TESTOPTS) --cleanup

# Run a basic set of regression tests.
# This excludes some tests that are particularly resource-intensive.
test:		all platform
		$(TESTRUNNER) $(TESTOPTS)

# Run the full test suite twice - once without .pyc files, and once with.
# In the past, we've had problems where bugs in the marshalling or
# elsewhere caused bytecode read from .pyc files to behave differently
# than bytecode generated directly from a .py source file.  Sometimes
# the bytecode read from a .pyc file had the bug, sometimes the directly
# generated bytecode.  This is sometimes a very shy bug needing a lot of
# sample data.
testall:	all platform
		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
		$(TESTPYTHON) -E $(srcdir)/Lib/compileall.py
		-find $(srcdir)/Lib -name '*.py[co]' -print | xargs rm -f
		-$(TESTRUNNER) -u all $(TESTOPTS)
		$(TESTRUNNER) -u all $(TESTOPTS)

# Run the test suite for both architectures in a Universal build on OSX.
# Must be run on an Intel box.
testuniversal:	all platform
		@if [ `arch` != 'i386' ]; then \
			echo "This can only be used on OSX/i386" ;\
			exit 1 ;\
		fi
		$(TESTRUNNER) -u all $(TESTOPTS)
		$(RUNSHARED) /usr/libexec/oah/translate \
			./$(BUILDPYTHON) -E -m test -j 0 -u all $(TESTOPTS)

# Like testall, but with only one pass and without multiple processes.
# Run an optional script to include information about the build environment.
buildbottest:	build_all platform
		-@if which pybuildbot.identify >/dev/null 2>&1; then \
			pybuildbot.identify "CC='$(CC)'" "CXX='$(CXX)'"; \
		fi
		$(TESTRUNNER) -j 1 -u all -W --slowest --fail-env-changed --timeout=$(TESTTIMEOUT) $(TESTOPTS)

pythoninfo: build_all
		$(RUNSHARED) ./$(BUILDPYTHON) -m test.pythoninfo

QUICKTESTOPTS=	$(TESTOPTS) -x test_subprocess test_io test_lib2to3 \
		test_multibytecodec test_urllib2_localnet test_itertools \
		test_multiprocessing_fork test_multiprocessing_spawn \
		test_multiprocessing_forkserver \
		test_mailbox test_socket test_poll \
		test_select test_zipfile test_concurrent_futures
quicktest:	all platform
		$(TESTRUNNER) $(QUICKTESTOPTS)

# SSL tests
.PHONY: multisslcompile multissltest
multisslcompile: build_all
	$(RUNSHARED) ./$(BUILDPYTHON) Tools/ssl/multissltests.py --steps=modules

multissltest: build_all
	$(RUNSHARED) ./$(BUILDPYTHON) Tools/ssl/multissltests.py

install:  commoninstall bininstall maninstall 
	if test "x$(ENSUREPIP)" != "xno"  ; then \
		case $(ENSUREPIP) in \
			upgrade) ensurepip="--upgrade" ;; \
			install|*) ensurepip="" ;; \
		esac; \
		$(RUNSHARED) $(PYTHON_FOR_BUILD) -m ensurepip \
			$$ensurepip --root=$(DESTDIR)/ ; \
	fi

altinstall: commoninstall
	if test "x$(ENSUREPIP)" != "xno"  ; then \
		case $(ENSUREPIP) in \
			upgrade) ensurepip="--altinstall --upgrade" ;; \
			install|*) ensurepip="--altinstall" ;; \
		esac; \
		$(RUNSHARED) $(PYTHON_FOR_BUILD) -m ensurepip \
			$$ensurepip --root=$(DESTDIR)/ ; \
	fi

commoninstall:  check-clean-src  \
		altbininstall libinstall inclinstall libainstall \
		sharedinstall oldsharedinstall altmaninstall \
		

# Install shared libraries enabled by Setup
DESTDIRS=	$(exec_prefix) $(LIBDIR) $(BINLIBDEST) $(DESTSHARED)

oldsharedinstall: $(DESTSHARED) $(SHAREDMODS)
		@for i in X $(SHAREDMODS); do \
		  if test $$i != X; then \
		    echo $(INSTALL_SHARED) $$i $(DESTSHARED)/`basename $$i`; \
		    $(INSTALL_SHARED) $$i $(DESTDIR)$(DESTSHARED)/`basename $$i`; \
		  fi; \
		done

$(DESTSHARED):
		@for i in $(DESTDIRS); \
		do \
			if test ! -d $(DESTDIR)$$i; then \
				echo "Creating directory $$i"; \
				$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
			else    true; \
			fi; \
		done

# Install the interpreter with $(VERSION) affixed
# This goes into $(exec_prefix)
altbininstall: $(BUILDPYTHON) 
	@for i in $(BINDIR) $(LIBDIR); \
	do \
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	if test "$(PYTHONFRAMEWORKDIR)" = "no-framework" ; then \
		$(INSTALL_PROGRAM) $(BUILDPYTHON) $(DESTDIR)$(BINDIR)/python$(LDVERSION)$(EXE); \
	else \
		$(INSTALL_PROGRAM) $(STRIPFLAG) Mac/pythonw $(DESTDIR)$(BINDIR)/python$(LDVERSION)$(EXE); \
	fi
	-if test "$(VERSION)" != "$(LDVERSION)"; then \
		if test -f $(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE) -o -h $(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE); \
		then rm -f $(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE); \
		fi; \
		(cd $(DESTDIR)$(BINDIR); $(LN) python$(LDVERSION)$(EXE) python$(VERSION)$(EXE)); \
	fi
	if test -f $(LDLIBRARY) && test "$(PYTHONFRAMEWORKDIR)" = "no-framework" ; then \
		if test -n "$(DLLLIBRARY)" ; then \
			$(INSTALL_SHARED) $(DLLLIBRARY) $(DESTDIR)$(BINDIR); \
		else \
			$(INSTALL_SHARED) $(LDLIBRARY) $(DESTDIR)$(LIBDIR)/$(INSTSONAME); \
			if test $(LDLIBRARY) != $(INSTSONAME); then \
				(cd $(DESTDIR)$(LIBDIR); $(LN) -sf $(INSTSONAME) $(LDLIBRARY)) \
			fi \
		fi; \
		if test -n "$(PY3LIBRARY)"; then \
			$(INSTALL_SHARED) $(PY3LIBRARY) $(DESTDIR)$(LIBDIR)/$(PY3LIBRARY); \
		fi; \
	else	true; \
	fi
	if test "x$(LIPO_32BIT_FLAGS)" != "x" ; then \
		rm -f $(DESTDIR)$(BINDIR)python$(VERSION)-32$(EXE); \
		lipo $(LIPO_32BIT_FLAGS) \
			-output $(DESTDIR)$(BINDIR)/python$(VERSION)-32$(EXE) \
			$(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE); \
	fi
	if test "x$(LIPO_INTEL64_FLAGS)" != "x" ; then \
		rm -f $(DESTDIR)$(BINDIR)python$(VERSION)-intel64$(EXE); \
		lipo $(LIPO_INTEL64_FLAGS) \
			-output $(DESTDIR)$(BINDIR)/python$(VERSION)-intel64$(EXE) \
			$(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE); \
	fi

bininstall: altbininstall
	if test ! -d $(DESTDIR)$(LIBPC); then \
		echo "Creating directory $(LIBPC)"; \
		$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$(LIBPC); \
	fi
	-if test -f $(DESTDIR)$(BINDIR)/python3$(EXE) -o -h $(DESTDIR)$(BINDIR)/python3$(EXE); \
	then rm -f $(DESTDIR)$(BINDIR)/python3$(EXE); \
	else true; \
	fi
	(cd $(DESTDIR)$(BINDIR); $(LN) -s python$(VERSION)$(EXE) python3$(EXE))
	-if test "$(VERSION)" != "$(LDVERSION)"; then \
		rm -f $(DESTDIR)$(BINDIR)/python$(VERSION)-config; \
		(cd $(DESTDIR)$(BINDIR); $(LN) -s python$(LDVERSION)-config python$(VERSION)-config); \
		rm -f $(DESTDIR)$(LIBPC)/python-$(LDVERSION).pc; \
		(cd $(DESTDIR)$(LIBPC); $(LN) -s python-$(VERSION).pc python-$(LDVERSION).pc); \
		rm -f $(DESTDIR)$(LIBPC)/python-$(LDVERSION)-embed.pc; \
		(cd $(DESTDIR)$(LIBPC); $(LN) -s python-$(VERSION)-embed.pc python-$(LDVERSION)-embed.pc); \
	fi
	-rm -f $(DESTDIR)$(BINDIR)/python3-config
	(cd $(DESTDIR)$(BINDIR); $(LN) -s python$(VERSION)-config python3-config)
	-rm -f $(DESTDIR)$(LIBPC)/python3.pc
	(cd $(DESTDIR)$(LIBPC); $(LN) -s python-$(VERSION).pc python3.pc)
	-rm -f $(DESTDIR)$(LIBPC)/python3-embed.pc
	(cd $(DESTDIR)$(LIBPC); $(LN) -s python-$(VERSION)-embed.pc python3-embed.pc)
	-rm -f $(DESTDIR)$(BINDIR)/idle3
ifeq (no,yes)
	(cd $(DESTDIR)$(BINDIR); $(LN) -s idle$(VERSION) idle3)
endif
	-rm -f $(DESTDIR)$(BINDIR)/pydoc3
ifeq (no,yes)
	(cd $(DESTDIR)$(BINDIR); $(LN) -s pydoc$(VERSION) pydoc3)
endif
	-rm -f $(DESTDIR)$(BINDIR)/2to3
ifeq (no,yes)
	(cd $(DESTDIR)$(BINDIR); $(LN) -s 2to3-$(VERSION) 2to3)
endif
	if test "x$(LIPO_32BIT_FLAGS)" != "x" ; then \
		rm -f $(DESTDIR)$(BINDIR)/python3-32$(EXE); \
		(cd $(DESTDIR)$(BINDIR); $(LN) -s python$(VERSION)-32$(EXE) python3-32$(EXE)) \
	fi
	if test "x$(LIPO_INTEL64_FLAGS)" != "x" ; then \
		rm -f $(DESTDIR)$(BINDIR)/python3-intel64$(EXE); \
		(cd $(DESTDIR)$(BINDIR); $(LN) -s python$(VERSION)-intel64$(EXE) python3-intel64$(EXE)) \
	fi

# Install the versioned manual page
altmaninstall:
	@for i in $(MANDIR) $(MANDIR)/man1; \
	do \
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	$(INSTALL_DATA) $(srcdir)/Misc/python.man \
		$(DESTDIR)$(MANDIR)/man1/python$(VERSION).1

# Install the unversioned manual page
maninstall:	altmaninstall
	-rm -f $(DESTDIR)$(MANDIR)/man1/python3.1
	(cd $(DESTDIR)$(MANDIR)/man1; $(LN) -s python$(VERSION).1 python3.1)

# Install the library
XMLLIBSUBDIRS=  xml xml/dom xml/etree xml/parsers xml/sax

LIBSUBDIRS=	site-packages \
		asyncio \
		collections concurrent concurrent/futures encodings \
		email email/mime \
		ensurepip ensurepip/_bundled \
		html json http dbm xmlrpc \
		logging csv wsgiref urllib \
		ctypes ctypes/macholib \
		distutils distutils/command \
		importlib \
		turtledemo \
		multiprocessing multiprocessing/dummy \
		unittest \
		venv venv/scripts venv/scripts/common venv/scripts/posix \
		zoneinfo

TESTSUBDIRS=	test \
		test/audiodata \
		test/capath test/data \
		test/cjkencodings test/decimaltestdata \
		test/xmltestdata test/xmltestdata/c14n-20 \
		test/dtracedata \
		test/eintrdata \
		test/imghdrdata \
		test/libregrtest \
		test/subprocessdata test/sndhdrdata test/support \
		test/tracedmodules test/encoded_modules \
		test/test_import \
		test/test_import/data \
		test/test_import/data/circular_imports \
		test/test_import/data/circular_imports/subpkg \
		test/test_import/data/package \
		test/test_import/data/package2 \
		test/test_import/data/unwritable \
		importlib \
		importlib/metadata \
		test/test_importlib \
		test/test_importlib/builtin \
		test/test_importlib/data \
		test/test_importlib/data01 \
		test/test_importlib/data01/subdirectory \
		test/test_importlib/data02 \
		test/test_importlib/data02/one \
		test/test_importlib/data02/two \
		test/test_importlib/data03 \
		test/test_importlib/data03/namespace \
		test/test_importlib/data03/namespace/portion1 \
		test/test_importlib/data03/namespace/portion2 \
		test/test_importlib/extension \
		test/test_importlib/frozen \
		test/test_importlib/import_ \
		test/test_importlib/namespace_pkgs \
		test/test_importlib/namespace_pkgs/both_portions \
		test/test_importlib/namespace_pkgs/both_portions/foo \
		test/test_importlib/namespace_pkgs/module_and_namespace_package \
		test/test_importlib/namespace_pkgs/module_and_namespace_package/a_test \
		test/test_importlib/namespace_pkgs/not_a_namespace_pkg \
		test/test_importlib/namespace_pkgs/not_a_namespace_pkg/foo \
		test/test_importlib/namespace_pkgs/portion1 \
		test/test_importlib/namespace_pkgs/portion1/foo \
		test/test_importlib/namespace_pkgs/portion2 \
		test/test_importlib/namespace_pkgs/portion2/foo \
		test/test_importlib/namespace_pkgs/project1 \
		test/test_importlib/namespace_pkgs/project1/parent \
		test/test_importlib/namespace_pkgs/project1/parent/child \
		test/test_importlib/namespace_pkgs/project2 \
		test/test_importlib/namespace_pkgs/project2/parent \
		test/test_importlib/namespace_pkgs/project2/parent/child \
		test/test_importlib/namespace_pkgs/project3 \
		test/test_importlib/namespace_pkgs/project3/parent \
		test/test_importlib/namespace_pkgs/project3/parent/child \
		test/test_importlib/partial \
		test/test_importlib/source \
		test/test_importlib/zipdata01 \
		test/test_importlib/zipdata02 \
		test/test_zoneinfo test/test_zoneinfo/data \
		test/ziptestdata \
		test/test_asyncio \
		test/test_email test/test_email/data \
		test/test_json \
		ctypes/test \
		idlelib/idle_test \
		distutils/tests \
		test/test_peg_generator \
		test/test_importlib test/test_importlib/builtin \
		test/test_tools test/test_warnings test/test_warnings/data \
		unittest/test unittest/test/testmock

ifeq (no,yes)
LIBSUBDIRS += tkinter
TESTSUBDIRS += tkinter/test tkinter/test/test_tkinter \
	tkinter/test/test_ttk
endif

ifeq (no,yes)
LIBSUBDIRS += curses
endif

ifeq (no,yes)
LIBSUBDIRS += $(XMLLIBSUBDIRS)
endif

ifeq (no,yes)
LIBSUBDIRS += idlelib idlelib/Icons
endif

ifeq (no,yes)
LIBSUBDIRS += lib2to3 lib2to3/fixes lib2to3/pgen2
TESTSUBDIRS += lib2to3/tests			\
	lib2to3/tests/data			\
	lib2to3/tests/data/fixers		\
	lib2to3/tests/data/fixers/myfixes
endif

ifeq (no,yes)
LIBSUBDIRS += sqlite3
TESTSUBDIRS += sqlite3/test
endif

ifeq (no,yes)
LIBSUBDIRS += $(TESTSUBDIRS)
endif

ifeq (no,yes)
LIBSUBDIRS += pydoc_data
endif

libinstall:	build_all $(srcdir)/Modules/xxmodule.c
	@for i in $(SCRIPTDIR) $(LIBDEST); \
	do \
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	@for d in $(LIBSUBDIRS); \
	do \
		a=$(srcdir)/Lib/$$d; \
		if test ! -d $$a; then continue; else true; fi; \
		b=$(LIBDEST)/$$d; \
		if test ! -d $(DESTDIR)$$b; then \
			echo "Creating directory $$b"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$b; \
		else	true; \
		fi; \
	done
	@for i in $(srcdir)/Lib/*.py; \
	do \
		if test -x $$i; then \
			$(INSTALL_SCRIPT) $$i $(DESTDIR)$(LIBDEST); \
			echo $(INSTALL_SCRIPT) $$i $(LIBDEST); \
		else \
			$(INSTALL_DATA) $$i $(DESTDIR)$(LIBDEST); \
			echo $(INSTALL_DATA) $$i $(LIBDEST); \
		fi; \
	done
	@for d in $(LIBSUBDIRS); \
	do \
		a=$(srcdir)/Lib/$$d; \
		if test ! -d $$a; then continue; else true; fi; \
		if test `ls $$a | wc -l` -lt 1; then continue; fi; \
		b=$(LIBDEST)/$$d; \
		for i in $$a/*; \
		do \
			case $$i in \
			*CVS) ;; \
			*.py[co]) ;; \
			*.orig) ;; \
			*wininst-*.exe) ;; \
			*~) ;; \
			*) \
				if test -d $$i; then continue; fi; \
				if test -x $$i; then \
				    echo $(INSTALL_SCRIPT) $$i $$b; \
				    $(INSTALL_SCRIPT) $$i $(DESTDIR)$$b; \
				else \
				    echo $(INSTALL_DATA) $$i $$b; \
				    $(INSTALL_DATA) $$i $(DESTDIR)$$b; \
				fi;; \
			esac; \
		done; \
	done
	$(INSTALL_DATA) `cat pybuilddir.txt`/_sysconfigdata_$(ABIFLAGS)_$(MACHDEP)_$(MULTIARCH).py \
		$(DESTDIR)$(LIBDEST); \
	$(INSTALL_DATA) $(srcdir)/LICENSE $(DESTDIR)$(LIBDEST)/LICENSE.txt
	if test -d $(DESTDIR)$(LIBDEST)/distutils/tests; then \
		$(INSTALL_DATA) $(srcdir)/Modules/xxmodule.c \
			$(DESTDIR)$(LIBDEST)/distutils/tests ; \
	fi
ifeq (no,yes)
	-PYTHONPATH=$(DESTDIR)$(LIBDEST)  $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST) -f \
		-x 'bad_coding|badsyntax|site-packages|lib2to3/tests/data' \
		$(DESTDIR)$(LIBDEST)
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi -O $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST) -f \
		-x 'bad_coding|badsyntax|site-packages|lib2to3/tests/data' \
		$(DESTDIR)$(LIBDEST)
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi -OO $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST) -f \
		-x 'bad_coding|badsyntax|site-packages|lib2to3/tests/data' \
		$(DESTDIR)$(LIBDEST)
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST)/site-packages -f \
		-x badsyntax $(DESTDIR)$(LIBDEST)/site-packages
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi -O $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST)/site-packages -f \
		-x badsyntax $(DESTDIR)$(LIBDEST)/site-packages
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -Wi -OO $(DESTDIR)$(LIBDEST)/compileall.py \
		-j0 -d $(LIBDEST)/site-packages -f \
		-x badsyntax $(DESTDIR)$(LIBDEST)/site-packages
endif
ifeq (no,yes)
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -m lib2to3.pgen2.driver $(DESTDIR)$(LIBDEST)/lib2to3/Grammar.txt
	-PYTHONPATH=$(DESTDIR)$(LIBDEST) $(RUNSHARED) \
		$(PYTHON_FOR_BUILD) -m lib2to3.pgen2.driver $(DESTDIR)$(LIBDEST)/lib2to3/PatternGrammar.txt
endif

# bpo-21536: Misc/python-config.sh is generated in the build directory
# from $(srcdir)Misc/python-config.sh.in.
python-config: $(srcdir)/Misc/python-config.in Misc/python-config.sh
	@ # Substitution happens here, as the completely-expanded BINDIR
	@ # is not available in configure
	sed -e "s,@EXENAME@,$(BINDIR)/python$(LDVERSION)$(EXE)," < $(srcdir)/Misc/python-config.in >python-config.py
	@ # Replace makefile compat. variable references with shell script compat. ones; $(VAR) -> ${VAR}
	LC_ALL=C sed -e 's,\$$(\([A-Za-z0-9_]*\)),\$$\{\1\},g' < Misc/python-config.sh >python-config
	@ # On Darwin, always use the python version of the script, the shell
	@ # version doesn't use the compiler customizations that are provided
	@ # in python (_osx_support.py).
	@if test `uname -s` = Darwin; then \
		cp python-config.py python-config; \
	fi


# Install the include files
INCLDIRSTOMAKE=$(INCLUDEDIR) $(CONFINCLUDEDIR) $(INCLUDEPY) $(CONFINCLUDEPY)
inclinstall:
	@for i in $(INCLDIRSTOMAKE); \
	do \
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	@if test ! -d $(DESTDIR)$(INCLUDEPY)/cpython; then \
		echo "Creating directory $(DESTDIR)$(INCLUDEPY)/cpython"; \
		$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$(INCLUDEPY)/cpython; \
	else	true; \
	fi
	@if test ! -d $(DESTDIR)$(INCLUDEPY)/internal; then \
		echo "Creating directory $(DESTDIR)$(INCLUDEPY)/internal"; \
		$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$(INCLUDEPY)/internal; \
	else	true; \
	fi
	@for i in $(srcdir)/Include/*.h; \
	do \
		echo $(INSTALL_DATA) $$i $(INCLUDEPY); \
		$(INSTALL_DATA) $$i $(DESTDIR)$(INCLUDEPY); \
	done
	@for i in $(srcdir)/Include/cpython/*.h; \
	do \
		echo $(INSTALL_DATA) $$i $(INCLUDEPY)/cpython; \
		$(INSTALL_DATA) $$i $(DESTDIR)$(INCLUDEPY)/cpython; \
	done
	@for i in $(srcdir)/Include/internal/*.h; \
	do \
		echo $(INSTALL_DATA) $$i $(INCLUDEPY)/internal; \
		$(INSTALL_DATA) $$i $(DESTDIR)$(INCLUDEPY)/internal; \
	done
	$(INSTALL_DATA) pyconfig.h $(DESTDIR)$(CONFINCLUDEPY)/pyconfig.h

# Install the library and miscellaneous stuff needed for extending/embedding
# This goes into $(exec_prefix)
LIBPL=		$(prefix)/lib/python3.9/config-$(VERSION)$(ABIFLAGS)-i386-linux-gnu

# pkgconfig directory
LIBPC=		$(LIBDIR)/pkgconfig

libainstall:	all python-config
	@for i in $(LIBDIR) $(LIBPL) $(LIBPC) $(BINDIR); \
	do \
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	@if test -d $(LIBRARY); then :; else \
		if test "$(PYTHONFRAMEWORKDIR)" = no-framework; then \
			if test "$(SHLIB_SUFFIX)" = .dll; then \
				$(INSTALL_DATA) $(LDLIBRARY) $(DESTDIR)$(LIBPL) ; \
			else \
				$(INSTALL_DATA) $(LIBRARY) $(DESTDIR)$(LIBPL)/$(LIBRARY) ; \
			fi; \
		else \
			echo Skip install of $(LIBRARY) - use make frameworkinstall; \
		fi; \
	fi
	$(INSTALL_DATA) Modules/config.c $(DESTDIR)$(LIBPL)/config.c
	$(INSTALL_DATA) Programs/python.o $(DESTDIR)$(LIBPL)/python.o
	$(INSTALL_DATA) $(srcdir)/Modules/config.c.in $(DESTDIR)$(LIBPL)/config.c.in
	$(INSTALL_DATA) Makefile $(DESTDIR)$(LIBPL)/Makefile
	$(INSTALL_DATA) $(srcdir)/Modules/Setup $(DESTDIR)$(LIBPL)/Setup
	$(INSTALL_DATA) Modules/Setup.local $(DESTDIR)$(LIBPL)/Setup.local
	$(INSTALL_DATA) Misc/python.pc $(DESTDIR)$(LIBPC)/python-$(VERSION).pc
	$(INSTALL_DATA) Misc/python-embed.pc $(DESTDIR)$(LIBPC)/python-$(VERSION)-embed.pc
	$(INSTALL_SCRIPT) $(srcdir)/Modules/makesetup $(DESTDIR)$(LIBPL)/makesetup
	$(INSTALL_SCRIPT) $(srcdir)/install-sh $(DESTDIR)$(LIBPL)/install-sh
	$(INSTALL_SCRIPT) python-config.py $(DESTDIR)$(LIBPL)/python-config.py
	$(INSTALL_SCRIPT) python-config $(DESTDIR)$(BINDIR)/python$(LDVERSION)-config
	@if [ -s Modules/python.exp -a \
		"`echo $(MACHDEP) | sed 's/^\(...\).*/\1/'`" = "aix" ]; then \
		echo; echo "Installing support files for building shared extension modules on AIX:"; \
		$(INSTALL_DATA) Modules/python.exp		\
				$(DESTDIR)$(LIBPL)/python.exp;		\
		echo; echo "$(LIBPL)/python.exp";		\
		$(INSTALL_SCRIPT) $(srcdir)/Modules/makexp_aix	\
				$(DESTDIR)$(LIBPL)/makexp_aix;		\
		echo "$(LIBPL)/makexp_aix";			\
		$(INSTALL_SCRIPT) Modules/ld_so_aix	\
				$(DESTDIR)$(LIBPL)/ld_so_aix;		\
		echo "$(LIBPL)/ld_so_aix";			\
		echo; echo "See Misc/AIX-NOTES for details.";	\
	else true; \
	fi

# Install the dynamically loadable modules
# This goes into $(exec_prefix)
sharedinstall: sharedmods
	$(RUNSHARED) DISABLED_EXTENSIONS="$(DISABLED_EXTENSIONS)" \
		$(PYTHON_FOR_BUILD) $(srcdir)/setup.py install \
	   	--prefix=$(prefix) \
		--install-scripts=$(BINDIR) \
		--install-platlib=$(DESTSHARED) \
		--root=$(DESTDIR)/
	-rm $(DESTDIR)$(DESTSHARED)/_sysconfigdata_$(ABIFLAGS)_$(MACHDEP)_$(MULTIARCH).py
	-rm -r $(DESTDIR)$(DESTSHARED)/__pycache__

# Here are a couple of targets for MacOSX again, to install a full
# framework-based Python. frameworkinstall installs everything, the
# subtargets install specific parts. Much of the actual work is offloaded to
# the Makefile in Mac
#
#
# This target is here for backward compatibility, previous versions of Python
# hadn't integrated framework installation in the normal install process.
frameworkinstall: install

# On install, we re-make the framework
# structure in the install location, /Library/Frameworks/ or the argument to
# --enable-framework. If --enable-framework has been specified then we have
# automatically set prefix to the location deep down in the framework, so we
# only have to cater for the structural bits of the framework.

frameworkinstallframework: frameworkinstallstructure install frameworkinstallmaclib

frameworkinstallstructure:	$(LDLIBRARY)
	@if test "$(PYTHONFRAMEWORKDIR)" = no-framework; then \
		echo Not configured with --enable-framework; \
		exit 1; \
	else true; \
	fi
	@for i in $(prefix)/Resources/English.lproj $(prefix)/lib; do\
		if test ! -d $(DESTDIR)$$i; then \
			echo "Creating directory $(DESTDIR)$$i"; \
			$(INSTALL) -d -m $(DIRMODE) $(DESTDIR)$$i; \
		else	true; \
		fi; \
	done
	$(LN) -fsn include/python$(LDVERSION) $(DESTDIR)$(prefix)/Headers
	sed 's/%VERSION%/'"`$(RUNSHARED) ./$(BUILDPYTHON) -c 'import platform; print(platform.python_version())'`"'/g' < $(RESSRCDIR)/Info.plist > $(DESTDIR)$(prefix)/Resources/Info.plist
	$(LN) -fsn $(VERSION) $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Versions/Current
	$(LN) -fsn Versions/Current/$(PYTHONFRAMEWORK) $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/$(PYTHONFRAMEWORK)
	$(LN) -fsn Versions/Current/Headers $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Headers
	$(LN) -fsn Versions/Current/Resources $(DESTDIR)$(PYTHONFRAMEWORKINSTALLDIR)/Resources
	$(INSTALL_SHARED) $(LDLIBRARY) $(DESTDIR)$(PYTHONFRAMEWORKPREFIX)/$(LDLIBRARY)

# This installs Mac/Lib into the framework
# Install a number of symlinks to keep software that expects a normal unix
# install (which includes python-config) happy.
frameworkinstallmaclib:
	$(LN) -fs "../../../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(LIBPL)/libpython$(LDVERSION).a"
	$(LN) -fs "../../../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(LIBPL)/libpython$(LDVERSION).dylib"
	$(LN) -fs "../../../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(LIBPL)/libpython$(VERSION).a"
	$(LN) -fs "../../../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(LIBPL)/libpython$(VERSION).dylib"
	$(LN) -fs "../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(prefix)/lib/libpython$(LDVERSION).dylib"
	$(LN) -fs "../$(PYTHONFRAMEWORK)" "$(DESTDIR)$(prefix)/lib/libpython$(VERSION).dylib"

# This installs the IDE, the Launcher and other apps into /Applications
frameworkinstallapps:
	cd Mac && $(MAKE) installapps DESTDIR="$(DESTDIR)"

# Build the bootstrap executable that will spawn the interpreter inside
# an app bundle within the framework.  This allows the interpreter to
# run OS X GUI APIs.
frameworkpythonw:
	cd Mac && $(MAKE) pythonw

# This installs the python* and other bin symlinks in $prefix/bin or in
# a bin directory relative to the framework root
frameworkinstallunixtools:
	cd Mac && $(MAKE) installunixtools DESTDIR="$(DESTDIR)"

frameworkaltinstallunixtools:
	cd Mac && $(MAKE) altinstallunixtools DESTDIR="$(DESTDIR)"

# This installs the Tools into the applications directory.
# It is not part of a normal frameworkinstall
frameworkinstallextras:
	cd Mac && $(MAKE) installextras DESTDIR="$(DESTDIR)"

# Build the toplevel Makefile
Makefile.pre: $(srcdir)/Makefile.pre.in config.status
	CONFIG_FILES=Makefile.pre CONFIG_HEADERS= $(SHELL) config.status
	$(MAKE) -f Makefile.pre Makefile

# Run the configure script.
config.status:	$(srcdir)/configure
	$(SHELL) $(srcdir)/configure $(CONFIG_ARGS)

.PRECIOUS: config.status $(BUILDPYTHON) Makefile Makefile.pre

# Some make's put the object file in the current directory
.c.o:
	$(CC) -c $(PY_CORE_CFLAGS) -o $@ $<

# bpo-30104: dtoa.c uses union to cast double to unsigned long[2]. clang 4.0
# with -O2 or higher and strict aliasing miscompiles the ratio() function
# causing rounding issues. Compile dtoa.c using -fno-strict-aliasing on clang.
# https://bugs.llvm.org//show_bug.cgi?id=31928
Python/dtoa.o: Python/dtoa.c
	$(CC) -c $(PY_CORE_CFLAGS) $(CFLAGS_ALIASING) -o $@ $<

# Run reindent on the library
reindent:
	./$(BUILDPYTHON) $(srcdir)/Tools/scripts/reindent.py -r $(srcdir)/Lib

# Rerun configure with the same options as it was run last time,
# provided the config.status script exists
recheck:
	$(SHELL) config.status --recheck
	$(SHELL) config.status

# Regenerate configure and pyconfig.h.in
.PHONY: autoconf
autoconf:
	# Regenerate the configure script from configure.ac using autoconf
	(cd $(srcdir); autoconf -Wall)
	# Regenerate pyconfig.h.in from configure.ac using autoheader
	(cd $(srcdir); autoheader -Wall)

# Create a tags file for vi
tags::
	ctags -w $(srcdir)/Include/*.h $(srcdir)/Include/cpython/*.h $(srcdir)/Include/internal/*.h
	for i in $(SRCDIRS); do ctags -f tags -w -a $(srcdir)/$$i/*.[ch]; done
	ctags -f tags -w -a $(srcdir)/Modules/_ctypes/*.[ch]
	find $(srcdir)/Lib -type f -name "*.py" -not -name "test_*.py" -not -path "*/test/*" -not -path "*/tests/*" -not -path "*/*_test/*" | ctags -f tags -w -a -L -
	LC_ALL=C sort -o tags tags

# Create a tags file for GNU Emacs
TAGS::
	cd $(srcdir); \
	etags Include/*.h Include/cpython/*.h Include/internal/*.h; \
	for i in $(SRCDIRS); do etags -a $$i/*.[ch]; done
	etags -a $(srcdir)/Modules/_ctypes/*.[ch]
	find $(srcdir)/Lib -type f -name "*.py" -not -name "test_*.py" -not -path "*/test/*" -not -path "*/tests/*" -not -path "*/*_test/*" | etags - -a

# Sanitation targets -- clean leaves libraries, executables and tags
# files, which clobber removes as well
pycremoval:
	-find $(srcdir) -depth -name '__pycache__' -exec rm -rf {} ';'
	-find $(srcdir) -name '*.py[co]' -exec rm -f {} ';'

rmtestturds:
	-rm -f *BAD *GOOD *SKIPPED
	-rm -rf OUT
	-rm -f *.TXT
	-rm -f *.txt
	-rm -f gb-18030-2000.xml

docclean:
	-rm -rf Doc/build
	-rm -rf Doc/tools/sphinx Doc/tools/pygments Doc/tools/docutils

# like the 'clean' target but retain the profile guided optimization (PGO)
# data.  The PGO data is only valid if source code remains unchanged.
clean-retain-profile: pycremoval
	find . -name '*.[oa]' -exec rm -f {} ';'
	find . -name '*.s[ol]' -exec rm -f {} ';'
	find . -name '*.so.[0-9]*.[0-9]*' -exec rm -f {} ';'
	find . -name '*.lst' -exec rm -f {} ';'
	find build -name 'fficonfig.h' -exec rm -f {} ';' || true
	find build -name '*.py' -exec rm -f {} ';' || true
	find build -name '*.py[co]' -exec rm -f {} ';' || true
	-rm -f pybuilddir.txt
	-rm -f Lib/lib2to3/*Grammar*.pickle
	-rm -f Programs/_testembed Programs/_freeze_importlib
	-find build -type f -a ! -name '*.gc??' -exec rm -f {} ';'
	-rm -f Include/pydtrace_probes.h
	-rm -f profile-gen-stamp

profile-removal:
	find . -name '*.gc??' -exec rm -f {} ';'
	find . -name '*.profclang?' -exec rm -f {} ';'
	find . -name '*.dyn' -exec rm -f {} ';'
	rm -f $(COVERAGE_INFO)
	rm -rf $(COVERAGE_REPORT)
	rm -f profile-run-stamp

clean: clean-retain-profile
	@if test build_all = profile-opt; then \
		rm -f profile-gen-stamp profile-clean-stamp; \
		$(MAKE) profile-removal; \
	fi

clobber: clean
	-rm -f $(BUILDPYTHON) $(LIBRARY) $(LDLIBRARY) $(DLLLIBRARY) \
		tags TAGS \
		config.cache config.log pyconfig.h Modules/config.c
	-rm -rf build platform
	-rm -rf $(PYTHONFRAMEWORKDIR)
	-rm -f python-config.py python-config

# Make things extra clean, before making a distribution:
# remove all generated files, even Makefile[.pre]
# Keep configure and Python-ast.[ch], it's possible they can't be generated
distclean: clobber
	for file in $(srcdir)/Lib/test/data/* ; do \
	    if test "$$file" != "$(srcdir)/Lib/test/data/README"; then rm "$$file"; fi; \
	done
	-rm -f core Makefile Makefile.pre config.status Modules/Setup.local \
		Modules/ld_so_aix Modules/python.exp Misc/python.pc \
		Misc/python-embed.pc Misc/python-config.sh
	-rm -f python*-gdb.py
	# Issue #28258: set LC_ALL to avoid issues with Estonian locale.
	# Expansion is performed here by shell (spawned by make) itself before
	# arguments are passed to find. So LC_ALL=C must be set as a separate
	# command.
	LC_ALL=C; find $(srcdir)/[a-zA-Z]* '(' -name '*.fdc' -o -name '*~' \
				     -o -name '[@,#]*' -o -name '*.old' \
				     -o -name '*.orig' -o -name '*.rej' \
				     -o -name '*.bak' ')' \
				     -exec rm -f {} ';'

# Check that all symbols exported by libpython start with "Py" or "_Py"
smelly: all
	$(RUNSHARED) ./$(BUILDPYTHON) Tools/scripts/smelly.py

# Find files with funny names
funny:
	find $(SUBDIRS) $(SUBDIRSTOO) \
		-type d \
		-o -name '*.[chs]' \
		-o -name '*.py' \
		-o -name '*.pyw' \
		-o -name '*.dat' \
		-o -name '*.el' \
		-o -name '*.fd' \
		-o -name '*.in' \
		-o -name '*.gif' \
		-o -name '*.txt' \
		-o -name '*.xml' \
		-o -name '*.xbm' \
		-o -name '*.xpm' \
		-o -name '*.uue' \
		-o -name '*.decTest' \
		-o -name '*.tmCommand' \
		-o -name '*.tmSnippet' \
		-o -name 'Setup' \
		-o -name 'Setup.*' \
		-o -name README \
		-o -name NEWS \
		-o -name HISTORY \
		-o -name Makefile \
		-o -name ChangeLog \
		-o -name .hgignore \
		-o -name MANIFEST \
		-o -print

# Perform some verification checks on any modified files.
patchcheck: all
	$(RUNSHARED) ./$(BUILDPYTHON) $(srcdir)/Tools/scripts/patchcheck.py

# Dependencies

Python/thread.o:  $(srcdir)/Python/thread_nt.h $(srcdir)/Python/thread_pthread.h $(srcdir)/Python/condvar.h

# Declare targets that aren't real files
.PHONY: all build_all sharedmods check-clean-src oldsharedmods test quicktest
.PHONY: install altinstall oldsharedinstall bininstall altbininstall
.PHONY: maninstall libinstall inclinstall libainstall sharedinstall
.PHONY: frameworkinstall frameworkinstallframework frameworkinstallstructure
.PHONY: frameworkinstallmaclib frameworkinstallapps frameworkinstallunixtools
.PHONY: frameworkaltinstallunixtools recheck clean clobber distclean
.PHONY: smelly funny patchcheck touch altmaninstall commoninstall
.PHONY: clean-retain-profile profile-removal run_profile_task
.PHONY: build_all_generate_profile build_all_merge_profile
.PHONY: gdbhooks

# IF YOU PUT ANYTHING HERE IT WILL GO AWAY
# Local Variables:
# mode: makefile
# End:

# Rules appended by makesetup

Modules/posixmodule.o: $(srcdir)/Modules/posixmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -c $(srcdir)/Modules/posixmodule.c -o Modules/posixmodule.o
Modules/posix$(EXT_SUFFIX):  Modules/posixmodule.o; $(BLDSHARED)  Modules/posixmodule.o   -o Modules/posix$(EXT_SUFFIX)
Modules/errnomodule.o: $(srcdir)/Modules/errnomodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/errnomodule.c -o Modules/errnomodule.o
Modules/errno$(EXT_SUFFIX):  Modules/errnomodule.o; $(BLDSHARED)  Modules/errnomodule.o   -o Modules/errno$(EXT_SUFFIX)
Modules/pwdmodule.o: $(srcdir)/Modules/pwdmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/pwdmodule.c -o Modules/pwdmodule.o
Modules/pwd$(EXT_SUFFIX):  Modules/pwdmodule.o; $(BLDSHARED)  Modules/pwdmodule.o   -o Modules/pwd$(EXT_SUFFIX)
Modules/_sre.o: $(srcdir)/Modules/_sre.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_sre.c -o Modules/_sre.o
Modules/_sre$(EXT_SUFFIX):  Modules/_sre.o; $(BLDSHARED)  Modules/_sre.o   -o Modules/_sre$(EXT_SUFFIX)
Modules/_codecsmodule.o: $(srcdir)/Modules/_codecsmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_codecsmodule.c -o Modules/_codecsmodule.o
Modules/_codecs$(EXT_SUFFIX):  Modules/_codecsmodule.o; $(BLDSHARED)  Modules/_codecsmodule.o   -o Modules/_codecs$(EXT_SUFFIX)
Modules/_weakref.o: $(srcdir)/Modules/_weakref.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_weakref.c -o Modules/_weakref.o
Modules/_weakref$(EXT_SUFFIX):  Modules/_weakref.o; $(BLDSHARED)  Modules/_weakref.o   -o Modules/_weakref$(EXT_SUFFIX)
Modules/_functoolsmodule.o: $(srcdir)/Modules/_functoolsmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -c $(srcdir)/Modules/_functoolsmodule.c -o Modules/_functoolsmodule.o
Modules/_functools$(EXT_SUFFIX):  Modules/_functoolsmodule.o; $(BLDSHARED)  Modules/_functoolsmodule.o   -o Modules/_functools$(EXT_SUFFIX)
Modules/_operator.o: $(srcdir)/Modules/_operator.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_operator.c -o Modules/_operator.o
Modules/_operator$(EXT_SUFFIX):  Modules/_operator.o; $(BLDSHARED)  Modules/_operator.o   -o Modules/_operator$(EXT_SUFFIX)
Modules/_collectionsmodule.o: $(srcdir)/Modules/_collectionsmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_collectionsmodule.c -o Modules/_collectionsmodule.o
Modules/_collections$(EXT_SUFFIX):  Modules/_collectionsmodule.o; $(BLDSHARED)  Modules/_collectionsmodule.o   -o Modules/_collections$(EXT_SUFFIX)
Modules/_abc.o: $(srcdir)/Modules/_abc.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_abc.c -o Modules/_abc.o
Modules/_abc$(EXT_SUFFIX):  Modules/_abc.o; $(BLDSHARED)  Modules/_abc.o   -o Modules/_abc$(EXT_SUFFIX)
Modules/itertoolsmodule.o: $(srcdir)/Modules/itertoolsmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/itertoolsmodule.c -o Modules/itertoolsmodule.o
Modules/itertools$(EXT_SUFFIX):  Modules/itertoolsmodule.o; $(BLDSHARED)  Modules/itertoolsmodule.o   -o Modules/itertools$(EXT_SUFFIX)
Modules/atexitmodule.o: $(srcdir)/Modules/atexitmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/atexitmodule.c -o Modules/atexitmodule.o
Modules/atexit$(EXT_SUFFIX):  Modules/atexitmodule.o; $(BLDSHARED)  Modules/atexitmodule.o   -o Modules/atexit$(EXT_SUFFIX)
Modules/signalmodule.o: $(srcdir)/Modules/signalmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -c $(srcdir)/Modules/signalmodule.c -o Modules/signalmodule.o
Modules/_signal$(EXT_SUFFIX):  Modules/signalmodule.o; $(BLDSHARED)  Modules/signalmodule.o   -o Modules/_signal$(EXT_SUFFIX)
Modules/_stat.o: $(srcdir)/Modules/_stat.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_stat.c -o Modules/_stat.o
Modules/_stat$(EXT_SUFFIX):  Modules/_stat.o; $(BLDSHARED)  Modules/_stat.o   -o Modules/_stat$(EXT_SUFFIX)
Modules/timemodule.o: $(srcdir)/Modules/timemodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -c $(srcdir)/Modules/timemodule.c -o Modules/timemodule.o
Modules/time$(EXT_SUFFIX):  Modules/timemodule.o; $(BLDSHARED)  Modules/timemodule.o   -o Modules/time$(EXT_SUFFIX)
Modules/_threadmodule.o: $(srcdir)/Modules/_threadmodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -c $(srcdir)/Modules/_threadmodule.c -o Modules/_threadmodule.o
Modules/_thread$(EXT_SUFFIX):  Modules/_threadmodule.o; $(BLDSHARED)  Modules/_threadmodule.o   -o Modules/_thread$(EXT_SUFFIX)
Modules/_localemodule.o: $(srcdir)/Modules/_localemodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -c $(srcdir)/Modules/_localemodule.c -o Modules/_localemodule.o
Modules/_locale$(EXT_SUFFIX):  Modules/_localemodule.o; $(BLDSHARED)  Modules/_localemodule.o   -o Modules/_locale$(EXT_SUFFIX)
Modules/_iomodule.o: $(srcdir)/Modules/_io/_iomodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/_iomodule.c -o Modules/_iomodule.o
Modules/iobase.o: $(srcdir)/Modules/_io/iobase.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/iobase.c -o Modules/iobase.o
Modules/fileio.o: $(srcdir)/Modules/_io/fileio.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/fileio.c -o Modules/fileio.o
Modules/bytesio.o: $(srcdir)/Modules/_io/bytesio.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/bytesio.c -o Modules/bytesio.o
Modules/bufferedio.o: $(srcdir)/Modules/_io/bufferedio.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/bufferedio.c -o Modules/bufferedio.o
Modules/textio.o: $(srcdir)/Modules/_io/textio.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/textio.c -o Modules/textio.o
Modules/stringio.o: $(srcdir)/Modules/_io/stringio.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io -c $(srcdir)/Modules/_io/stringio.c -o Modules/stringio.o
Modules/_io$(EXT_SUFFIX):  Modules/_iomodule.o Modules/iobase.o Modules/fileio.o Modules/bytesio.o Modules/bufferedio.o Modules/textio.o Modules/stringio.o; $(BLDSHARED)  Modules/_iomodule.o Modules/iobase.o Modules/fileio.o Modules/bytesio.o Modules/bufferedio.o Modules/textio.o Modules/stringio.o   -o Modules/_io$(EXT_SUFFIX)
Modules/faulthandler.o: $(srcdir)/Modules/faulthandler.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/faulthandler.c -o Modules/faulthandler.o
Modules/faulthandler$(EXT_SUFFIX):  Modules/faulthandler.o; $(BLDSHARED)  Modules/faulthandler.o   -o Modules/faulthandler$(EXT_SUFFIX)
Modules/_tracemalloc.o: $(srcdir)/Modules/_tracemalloc.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_tracemalloc.c -o Modules/_tracemalloc.o
Modules/_tracemalloc$(EXT_SUFFIX):  Modules/_tracemalloc.o; $(BLDSHARED)  Modules/_tracemalloc.o   -o Modules/_tracemalloc$(EXT_SUFFIX)
Modules/_peg_parser.o: $(srcdir)/Modules/_peg_parser.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/_peg_parser.c -o Modules/_peg_parser.o
Modules/_peg_parser$(EXT_SUFFIX):  Modules/_peg_parser.o; $(BLDSHARED)  Modules/_peg_parser.o   -o Modules/_peg_parser$(EXT_SUFFIX)
Modules/symtablemodule.o: $(srcdir)/Modules/symtablemodule.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/symtablemodule.c -o Modules/symtablemodule.o
Modules/_symtable$(EXT_SUFFIX):  Modules/symtablemodule.o; $(BLDSHARED)  Modules/symtablemodule.o   -o Modules/_symtable$(EXT_SUFFIX)
Modules/xxsubtype.o: $(srcdir)/Modules/xxsubtype.c; $(CC) $(PY_BUILTIN_MODULE_CFLAGS)  -c $(srcdir)/Modules/xxsubtype.c -o Modules/xxsubtype.o
Modules/xxsubtype$(EXT_SUFFIX):  Modules/xxsubtype.o; $(BLDSHARED)  Modules/xxsubtype.o   -o Modules/xxsubtype$(EXT_SUFFIX)
                                                                                                                                                                                                                                                                                                                        # -*- makefile -*-
# The file Setup is used by the makesetup script to construct the files
# Makefile and config.c, from Makefile.pre and config.c.in,
# respectively.  Note that Makefile.pre is created from Makefile.pre.in
# by the toplevel configure script.

# (VPATH notes: Setup and Makefile.pre are in the build directory, as
# are Makefile and config.c; the *.in files are in the source directory.)

# Each line in this file describes one or more optional modules.
# Modules configured here will not be compiled by the setup.py script,
# so the file can be used to override setup.py's behavior.
# Tag lines containing just the word "*static*", "*shared*" or "*disabled*"
# (without the quotes but with the stars) are used to tag the following module
# descriptions. Tag lines may alternate throughout this file.  Modules are
# built statically when they are preceded by a "*static*" tag line or when
# there is no tag line between the start of the file and the module
# description.  Modules are built as a shared library when they are preceded by
# a "*shared*" tag line.  Modules are not built at all, not by the Makefile,
# nor by the setup.py script, when they are preceded by a "*disabled*" tag
# line.

# Lines have the following structure:
#
# <module> ... [<sourcefile> ...] [<cpparg> ...] [<library> ...]
#
# <sourcefile> is anything ending in .c (.C, .cc, .c++ are C++ files)
# <cpparg> is anything starting with -I, -D, -U or -C
# <library> is anything ending in .a or beginning with -l or -L
# <module> is anything else but should be a valid Python
# identifier (letters, digits, underscores, beginning with non-digit)
#
# (As the makesetup script changes, it may recognize some other
# arguments as well, e.g. *.so and *.sl as libraries.  See the big
# case statement in the makesetup script.)
#
# Lines can also have the form
#
# <name> = <value>
#
# which defines a Make variable definition inserted into Makefile.in
#
# The build process works like this:
#
# 1. Build all modules that are declared as static in Modules/Setup,
#    combine them into libpythonxy.a, combine that into python.
# 2. Build all modules that are listed as shared in Modules/Setup.
# 3. Invoke setup.py. That builds all modules that
#    a) are not builtin, and
#    b) are not listed in Modules/Setup, and
#    c) can be build on the target
#
# Therefore, modules declared to be shared will not be
# included in the config.c file, nor in the list of objects to be
# added to the library archive, and their linker options won't be
# added to the linker options. Rules to create their .o files and
# their shared libraries will still be added to the Makefile, and
# their names will be collected in the Make variable SHAREDMODS.  This
# is used to build modules as shared libraries.  (They can be
# installed using "make sharedinstall", which is implied by the
# toplevel "make install" target.)  (For compatibility,
# *noconfig* has the same effect as *shared*.)
#
# NOTE: As a standard policy, as many modules as can be supported by a
# platform should be present.  The distribution comes with all modules
# enabled that are supported by most platforms and don't require you
# to ftp sources from elsewhere.


# Some special rules to define PYTHONPATH.
# Edit the definitions below to indicate which options you are using.
# Don't add any whitespace or comments!

# Directories where library files get installed.
# DESTLIB is for Python modules; MACHDESTLIB for shared libraries.
DESTLIB=$(LIBDEST)
MACHDESTLIB=$(BINLIBDEST)

# NOTE: all the paths are now relative to the prefix that is computed
# at run time!

# Standard path -- don't edit.
# No leading colon since this is the first entry.
# Empty since this is now just the runtime prefix.
DESTPATH=

# Site specific path components -- should begin with : if non-empty
SITEPATH=

# Standard path components for test modules
TESTPATH=

COREPYTHONPATH=$(DESTPATH)$(SITEPATH)$(TESTPATH)
PYTHONPATH=$(COREPYTHONPATH)


# The modules listed here can't be built as shared libraries for
# various reasons; therefore they are listed here instead of in the
# normal order.

# This only contains the minimal set of modules required to run the
# setup.py script in the root of the Python source tree.

posix -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal posixmodule.c # posix (UNIX) system calls
errno errnomodule.c			# posix (UNIX) errno values
pwd pwdmodule.c				# this is needed to find out the user's home dir
					# if $HOME is not set
_sre _sre.c				# Fredrik Lundh's new regular expressions
_codecs _codecsmodule.c			# access to the builtin codecs and codec registry
_weakref _weakref.c			# weak references
_functools -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal _functoolsmodule.c   # Tools for working with functions and callable objects
_operator _operator.c	        	# operator.add() and similar goodies
_collections _collectionsmodule.c	# Container types
_abc _abc.c				# Abstract base classes
itertools itertoolsmodule.c		# Functions creating iterators for efficient looping
atexit atexitmodule.c			# Register functions to be run at interpreter-shutdown
_signal -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal signalmodule.c
_stat _stat.c				# stat.h interface
time -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal timemodule.c	# -lm # time operations and variables
_thread -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal _threadmodule.c	# low-level threading interface

# access to ISO C locale support
_locale -DPy_BUILD_CORE_BUILTIN _localemodule.c  # -lintl

# Standard I/O baseline
_io -DPy_BUILD_CORE_BUILTIN -I$(srcdir)/Include/internal -I$(srcdir)/Modules/_io _io/_iomodule.c _io/iobase.c _io/fileio.c _io/bytesio.c _io/bufferedio.c _io/textio.c _io/stringio.c

# faulthandler module
faulthandler faulthandler.c

# debug tool to trace memory blocks allocated by Python
#
# bpo-35053: The module must be builtin since _Py_NewReference()
# can call _PyTraceMalloc_NewReference().
_tracemalloc _tracemalloc.c

# PEG-based parser module -- slated to be *the* parser
_peg_parser _peg_parser.c

# The rest of the modules listed in this file are all commented out by
# default.  Usually they can be detected and built as dynamically
# loaded modules by the new setup.py script added in Python 2.1.  If
# you're on a platform that doesn't support dynamic loading, want to
# compile modules statically into the Python binary, or need to
# specify some odd set of compiler switches, you can uncomment the
# appropriate lines below.

# ======================================================================

# The Python symtable module depends on .h files that setup.py doesn't track
_symtable symtablemodule.c

# Uncommenting the following line tells makesetup that all following
# modules are to be built as shared libraries (see above for more
# detail; also note that *static* or *disabled* cancels this effect):

#*shared*

# GNU readline.  Unlike previous Python incarnations, GNU readline is
# now incorporated in an optional module, configured in the Setup file
# instead of by a configure script switch.  You may have to insert a
# -L option pointing to the directory where libreadline.* lives,
# and you may have to change -ltermcap to -ltermlib or perhaps remove
# it, depending on your system -- see the GNU readline instructions.
# It's okay for this to be a shared library, too.

#readline readline.c -lreadline -ltermcap


# Modules that should always be present (non UNIX dependent):

#array arraymodule.c	# array objects
#cmath cmathmodule.c _math.c -DPy_BUILD_CORE_MODULE # -lm # complex math library functions
#math mathmodule.c _math.c -DPy_BUILD_CORE_MODULE # -lm # math library functions, e.g. sin()
#_contextvars _contextvarsmodule.c  # Context Variables
#_struct _struct.c	# binary structure packing/unpacking
#_weakref _weakref.c	# basic weak reference support
#_testcapi _testcapimodule.c    # Python C API test module
#_testinternalcapi _testinternalcapi.c -I$(srcdir)/Include/internal -DPy_BUILD_CORE_MODULE  # Python internal C API test module
#_random _randommodule.c -DPy_BUILD_CORE_MODULE	# Random number generator
#_elementtree -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DUSE_PYEXPAT_CAPI _elementtree.c	# elementtree accelerator
#_pickle _pickle.c	# pickle accelerator
#_datetime _datetimemodule.c	# datetime accelerator
#_zoneinfo _zoneinfo.c	# zoneinfo accelerator
#_bisect _bisectmodule.c	# Bisection algorithms
#_heapq _heapqmodule.c	# Heap queue algorithm
#_asyncio _asynciomodule.c  # Fast asyncio Future
#_json -I$(srcdir)/Include/internal -DPy_BUILD_CORE_BUILTIN _json.c	# _json speedups
#_statistics _statisticsmodule.c # statistics accelerator

#unicodedata unicodedata.c    # static Unicode character database


# Modules with some UNIX dependencies -- on by default:
# (If you have a really backward UNIX, select and socket may not be
# supported...)

#fcntl fcntlmodule.c	# fcntl(2) and ioctl(2)
#spwd spwdmodule.c		# spwd(3)
#grp grpmodule.c		# grp(3)
#select selectmodule.c	# select(2); not on ancient System V

# Memory-mapped files (also works on Win32).
#mmap mmapmodule.c

# CSV file helper
#_csv _csv.c

# Socket module helper for socket(2)
#_socket socketmodule.c

# Socket module helper for SSL support; you must comment out the other
# socket line above, and possibly edit the SSL variable:
#SSL=/usr/local/ssl
#_ssl _ssl.c \
#	-DUSE_SSL -I$(SSL)/include -I$(SSL)/include/openssl \
#	-L$(SSL)/lib -lssl -lcrypto

# The crypt module is now disabled by default because it breaks builds
# on many systems (where -lcrypt is needed), e.g. Linux (I believe).

#_crypt _cryptmodule.c # -lcrypt	# crypt(3); needs -lcrypt on some systems


# Some more UNIX dependent modules -- off by default, since these
# are not supported by all UNIX systems:

#nis nismodule.c -lnsl	# Sun yellow pages -- not everywhere
#termios termios.c	# Steen Lumholt's termios module
#resource resource.c	# Jeremy Hylton's rlimit interface

#_posixsubprocess _posixsubprocess.c  # POSIX subprocess module helper

# Multimedia modules -- off by default.
# These don't work for 64-bit platforms!!!
# #993173 says audioop works on 64-bit platforms, though.
# These represent audio samples or images as strings:

#audioop audioop.c	# Operations on audio samples


# Note that the _md5 and _sha modules are normally only built if the
# system does not have the OpenSSL libs containing an optimized version.

# The _md5 module implements the RSA Data Security, Inc. MD5
# Message-Digest Algorithm, described in RFC 1321.

#_md5 md5module.c


# The _sha module implements the SHA checksum algorithms.
# (NIST's Secure Hash Algorithms.)
#_sha1 sha1module.c
#_sha256 sha256module.c -DPy_BUILD_CORE_BUILTIN
#_sha512 sha512module.c -DPy_BUILD_CORE_BUILTIN
#_sha3 _sha3/sha3module.c

# _blake module
#_blake2 _blake2/blake2module.c _blake2/blake2b_impl.c _blake2/blake2s_impl.c

# The _tkinter module.
#
# The command for _tkinter is long and site specific.  Please
# uncomment and/or edit those parts as indicated.  If you don't have a
# specific extension (e.g. Tix or BLT), leave the corresponding line
# commented out.  (Leave the trailing backslashes in!  If you
# experience strange errors, you may want to join all uncommented
# lines and remove the backslashes -- the backslash interpretation is
# done by the shell's "read" command and it may not be implemented on
# every system.

# *** Always uncomment this (leave the leading underscore in!):
# _tkinter _tkinter.c tkappinit.c -DWITH_APPINIT \
# *** Uncomment and edit to reflect where your Tcl/Tk libraries are:
#	-L/usr/local/lib \
# *** Uncomment and edit to reflect where your Tcl/Tk headers are:
#	-I/usr/local/include \
# *** Uncomment and edit to reflect where your X11 header files are:
#	-I/usr/X11R6/include \
# *** Or uncomment this for Solaris:
#	-I/usr/openwin/include \
# *** Uncomment and edit for Tix extension only:
#	-DWITH_TIX -ltix8.1.8.2 \
# *** Uncomment and edit for BLT extension only:
#	-DWITH_BLT -I/usr/local/blt/blt8.0-unoff/include -lBLT8.0 \
# *** Uncomment and edit for PIL (TkImaging) extension only:
#     (See http://www.pythonware.com/products/pil/ for more info)
#	-DWITH_PIL -I../Extensions/Imaging/libImaging  tkImaging.c \
# *** Uncomment and edit for TOGL extension only:
#	-DWITH_TOGL toEg  Fg  Gg                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      gl.c \
# *** Uncomment and edit to reflect your Tcl/Tk versions:
#	-ltk8.2 -ltcl8.2 \
# *** Uncomment and edit to reflect where your X11 libraries are:
#	-L/usr/X11R6/lib \
# *** Or uncomment this for Solaris:
#	-L/usr/openwin/lib \
# *** Uncomment these for TOGL extension only:
#	-lGL -lGLU -lXext -lXmu \
# *** Uncomment for AIX:
#	-lld \
# *** Always uncomment this; X11 libraries to link with:
#	-lX11

# Lance Ellinghaus's syslog module
#syslog syslogmodule.c		# syslog daemon interface


# Curses support, requiring the System V version of curses, often
# provided by the ncurses library.  e.g. on Linux, link with -lncurses
# instead of -lcurses).

#_curses _cursesmodule.c -lcurses -ltermcap
# Wrapper for the panel library that's part of ncurses and SYSV curses.
#_curses_panel _curses_panel.c -lpanel -lncurses


# Modules that provide persistent dictionary-like semantics.  You will
# probably want to arrange for at least one of them to be available on
# your machine, though none are defined by default because of library
# dependencies.  The Python module dbm/__init__.py provides an
# implementation independent wrapper for these; dbm/dumb.py provides
# similar functionality (but slower of course) implemented in Python.

#_dbm _dbmmodule.c 	# dbm(3) may require -lndbm or similar

# Anthony Baxter's gdbm module.  GNU dbm(3) will require -lgdbm:

#_gdbm _gdbmmodule.c -I/usr/local/include -L/usr/local/lib -lgdbm


# Helper module for various ascii-encoders
#binascii binascii.c

# Fred Drake's interface to the Python parser
#parser parsermodule.c


# Andrew Kuchling's zlib module.
# This require zlib 1.1.3 (or later).
# See http://www.gzip.org/zlib/
#zlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz

# Interface to the Expat XML parser
# More information on Expat can be found at www.libexpat.org.
#
#pyexpat expat/xmlparse.c expat/xmlrole.c expat/xmltok.c pyexpat.c -I$(srcdir)/Modules/expat -DHAVE_EXPAT_CONFIG_H -DXML_POOR_ENTROPY -DUSE_PYEXPAT_CAPI

# Hye-Shik Chang's CJKCodecs

# multibytecodec is required for all the other CJK codec modules
#_multibytecodec cjkcodecs/multibytecodec.c

#_codecs_cn cjkcodecs/_codecs_cn.c
#_codecs_hk cjkcodecs/_codecs_hk.c
#_codecs_iso2022 cjkcodecs/_codecs_iso2022.c
#_codecs_jp cjkcodecs/_codecs_jp.c
#_codecs_kr cjkcodecs/_codecs_kr.c
#_codecs_tw cjkcodecs/_codecs_tw.c

# Example -- included for reference only:
# xx xxmodule.c

# Another example -- the 'xxsubtype' module shows C-level subtyping in action
xxsubtype xxsubtype.c

# Uncommenting the following line tells makesetup that all following modules
# are not built (see above for more detail).
#
#*disabled*
#
#_sqlite3 _tkinter _curses pyexpat
#_codecs_jp _codecs_kr _codecs_tw unicodedata
                                                                                                                                                                                                                                                                                                                                                     # Edit this file for local setup changes
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       /* Generated automatically from ./Modules/config.c.in by makesetup. */
/* -*- C -*- ***********************************************
Copyright (c) 2000, BeOpen.com.
Copyright (c) 1995-2000, Corporation for National Research Initiatives.
Copyright (c) 1990-1995, Stichting Mathematisch Centrum.
All rights reserved.

See the file "Misc/COPYRIGHT" for information on usage and
redistribution of this file, and for a DISCLAIMER OF ALL WARRANTIES.
******************************************************************/

/* Module configuration */

/* !!! !!! !!! This file is edited by the makesetup script !!! !!! !!! */

/* This file contains the table of built-in modules.
   See create_builtin() in import.c. */

#include "Python.h"

#ifdef __cplusplus
extern "C" {
#endif


extern PyObject* PyInit_posix(void);
extern PyObject* PyInit_errno(void);
extern PyObject* PyInit_pwd(void);
extern PyObject* PyInit__sre(void);
extern PyObject* PyInit__codecs(void);
extern PyObject* PyInit__weakref(void);
extern PyObject* PyInit__functools(void);
extern PyObject* PyInit__operator(void);
extern PyObject* PyInit__collections(void);
extern PyObject* PyInit__abc(void);
extern PyObject* PyInit_itertools(void);
extern PyObject* PyInit_atexit(void);
extern PyObject* PyInit__signal(void);
extern PyObject* PyInit__stat(void);
extern PyObject* PyInit_time(void);
extern PyObject* PyInit__thread(void);
extern PyObject* PyInit__locale(void);
extern PyObject* PyInit__io(void);
extern PyObject* PyInit_faulthandler(void);
extern PyObject* PyInit__tracemalloc(void);
extern PyObject* PyInit__peg_parser(void);
extern PyObject* PyInit__symtable(void);
extern PyObject* PyInit_xxsubtype(void);

/* -- ADDMODULE MARKER 1 -- */

extern PyObject* PyMarshal_Init(void);
extern PyObject* PyInit__imp(void);
extern PyObject* PyInit_gc(void);
extern PyObject* PyInit__ast(void);
extern PyObject* _PyWarnings_Init(void);
extern PyObject* PyInit__string(void);

struct _inittab _PyImport_Inittab[] = {

    {"posix", PyInit_posix},
    {"errno", PyInit_errno},
    {"pwd", PyInit_pwd},
    {"_sre", PyInit__sre},
    {"_codecs", PyInit__codecs},
    {"_weakref", PyInit__weakref},
    {"_functools", PyInit__functools},
    {"_operator", PyInit__operator},
    {"_collections", PyInit__collections},
    {"_abc", PyInit__abc},
    {"itertools", PyInit_itertools},
    {"atexit", PyInit_atexit},
    {"_signal", PyInit__signal},
    {"_stat", PyInit__stat},
    {"time", PyInit_time},
    {"_thread", PyInit__thread},
    {"_locale", PyInit__locale},
    {"_io", PyInit__io},
    {"faulthandler", PyInit_faulthandler},
    {"_tracemalloc", PyInit__tracemalloc},
    {"_peg_parser", PyInit__peg_parser},
    {"_symtable", PyInit__symtable},
    {"xxsubtype", PyInit_xxsubtype},

/* -- ADDMODULE MARKER 2 -- */

    /* This module lives in marshal.c */
    {"marshal", PyMarshal_Init},

    /* This lives in import.c */
    {"_imp", PyInit__imp},

    /* This lives in Python/Python-ast.c */
    {"_ast", PyInit__ast},

    /* These entries are here for sys.builtin_module_names */
    {"builtins", NULL},
    {"sys", NULL},

    /* This lives in gcmodule.c */
    {"gc", PyInit_gc},

    /* This lives in _warnings.c */
    {"_warnings", _PyWarnings_Init},

    /* This lives in Objects/unicodeobject.c */
    {"_string", PyInit__string},

    /* Sentinel */
    {0, 0}
};


#ifdef __cplusplus
}
#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   /* -*- C -*- ***********************************************
Copyright (c) 2000, BeOpen.com.
Copyright (c) 1995-2000, Corporation for National Research Initiatives.
Copyright (c) 1990-1995, Stichting Mathematisch Centrum.
All rights reserved.

See the file "Misc/COPYRIGHT" for information on usage and
redistribution of this file, and for a DISCLAIMER OF ALL WARRANTIES.
******************************************************************/

/* Module configuration */

/* !!! !!! !!! This file is edited by the makesetup script !!! !!! !!! */

/* This file contains the table of built-in modules.
   See create_builtin() in import.c. */

#include "Python.h"

#ifdef __cplusplus
extern "C" {
#endif


/* -- ADDMODULE MARKER 1 -- */

extern PyObject* PyMarshal_Init(void);
extern PyObject* PyInit__imp(void);
extern PyObject* PyInit_gc(void);
extern PyObject* PyInit__ast(void);
extern PyObject* _PyWarnings_Init(void);
extern PyObject* PyInit__string(void);

struct _inittab _PyImport_Inittab[] = {

/* -- ADDMODULE MARKER 2 -- */

    /* This module lives in marshal.c */
    {"marshal", PyMarshal_Init},

    /* This lives in import.c */
    {"_imp", PyInit__imp},

    /* This lives in Python/Python-ast.c */
    {"_ast", PyInit__ast},

    /* These entries are here for sys.builtin_module_names */
    {"builtins", NULL},
    {"sys", NULL},

    /* This lives in gcmodule.c */
    {"gc", PyInit_gc},

    /* This lives in _warnings.c */
    {"_warnings", _PyWarnings_Init},

    /* This lives in Objects/unicodeobject.c */
    {"_string", PyInit__string},

    /* Sentinel */
    {0, 0}
};


#ifdef __cplusplus
}
#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                         #!/bin/sh
# install - install a program, script, or datafile

scriptversion=2020-11-14.01; # UTC

# This originates from X11R5 (mit/util/scripts/install.sh), which was
# later released in X11R6 (xc/config/util/install.sh) with the
# following copyright and license.
#
# Copyright (C) 1994 X Consortium
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to
# deal in the Software without restriction, including without limitation the
# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
# sell copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
# X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
# AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNEC-
# TION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
#
# Except as contained in this notice, the name of the X Consortium shall not
# be used in advertising or otherwise to promote the sale, use or other deal-
# ings in this Software without prior written authorization from the X Consor-
# tium.
#
#
# FSF changes to this file are in the public domain.
#
# Calling this script install-sh is preferred over install.sh, to prevent
# 'make' implicit rules from creating a file called install from it
# when there is no Makefile.
#
# This script is compatible with the BSD install script, but was written
# from scratch.

tab='	'
nl='
'
IFS=" $tab$nl"

# Set DOITPROG to "echo" to test this script.

doit=${DOITPROG-}
doit_exec=${doit:-exec}

# Put in absolute file names if you don't have them in your path;
# or use environment vars.

chgrpprog=${CHGRPPROG-chgrp}
chmodprog=${CHMODPROG-chmod}
chownprog=${CHOWNPROG-chown}
cmpprog=${CMPPROG-cmp}
cpprog=${CPPROG-cp}
mkdirprog=${MKDIRPROG-mkdir}
mvprog=${MVPROG-mv}
rmprog=${RMPROG-rm}
stripprog=${STRIPPROG-strip}

posix_mkdir=

# Desired mode of installed file.
mode=0755

# Create dirs (including intermediate dirs) using mode 755.
# This is like GNU 'install' as of coreutils 8.32 (2020).
mkdir_umask=22

backupsuffix=
chgrpcmd=
chmodcmd=$chmodprog
chowncmd=
mvcmd=$mvprog
rmcmd="$rmprog -f"
stripcmd=

src=
dst=
dir_arg=
dst_arg=

copy_on_change=false
is_target_a_directory=possibly

usage="\
Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE
   or: $0 [OPTION]... SRCFILES... DIRECTORY
   or: $0 [OPTION]... -t DIRECTORY SRCFILES...
   or: $0 [OPTION]... -d DIRECTORIES...

In the 1st form, copy SRCFILE to DSTFILE.
In the 2nd and 3rd, copy all SRCFILES to DIRECTORY.
In the 4th, create DIRECTORIES.

Options:
     --help     display this help and exit.
     --version  display version info and exit.

  -c            (ignored)
  -C            install only if different (preserve data modification time)
  -d            create directories instead of installing files.
  -g GROUP      $chgrpprog installed files to GROUP.
  -m MODE       $chmodprog installed files to MODE.
  -o USER       $chownprog installed files to USER.
  -p            pass -p to $cpprog.
  -s            $stripprog installed files.
  -S SUFFIX     attempt to back up existing files, with suffix SUFFIX.
  -t DIRECTORY  install into DIRECTORY.
  -T            report an error if DSTFILE is a directory.

Environment variables override the default commands:
  CHGRPPROG CHMODPROG CHOWNPROG CMPPROG CPPROG MKDIRPROG MVPROG
  RMPROG STRIPPROG

By default, rm is invoked with -f; when overridden with RMPROG,
it's up to you to specify -f if you want it.

If -S is not specified, no backups are attempted.

Email bug reports to bug-automake@gnu.org.
Automake home page: https://www.gnu.org/software/automake/
"

while test $# -ne 0; do
  case $1 in
    -c) ;;

    -C) copy_on_change=true;;

    -d) dir_arg=true;;

    -g) chgrpcmd="$chgrpprog $2"
        shift;;

    --help) echo "$usage"; exit $?;;

    -m) mode=$2
        case $mode in
          *' '* | *"$tab"* | *"$nl"* | *'*'* | *'?'* | *'['*)
            echo "$0: invalid mode: $mode" >&2
            exit 1;;
        esac
        shift;;

    -o) chowncmd="$chownprog $2"
        shift;;

    -p) cpprog="$cpprog -p";;

    -s) stripcmd=$stripprog;;

    -S) backupsuffix="$2"
        shift;;

    -t)
        is_target_a_directory=always
        dst_arg=$2
        # Protect names problematic for 'test' and other utilities.
        case $dst_arg in
          -* | [=\(\)!]) dst_arg=./$dst_arg;;
        esac
        shift;;

    -T) is_target_a_directory=never;;

    --version) echo "$0 $scriptversion"; exit $?;;

    --) shift
        break;;

    -*) echo "$0: invalid option: $1" >&2
        exit 1;;

    *)  break;;
  esac
  shift
done

# We allow the use of options -d and -T together, by making -d
# take the precedence; this is for compatibility with GNU install.

if test -n "$dir_arg"; then
  if test -n "$dst_arg"; then
    echo "$0: target directory not allowed when installing a directory." >&2
    exit 1
  fi
fi

if test $# -ne 0 && test -z "$dir_arg$dst_arg"; then
  # When -d is used, all remaining arguments are directories to create.
  # When -t is used, the destination is already specified.
  # Otherwise, the last argument is the destination.  Remove it from $@.
  for arg
  do
    if test -n "$dst_arg"; then
      # $@ is not empty: it contains at least $arg.
      set fnord "$@" "$dst_arg"
      shift # fnord
    fi
    shift # arg
    dst_arg=$arg
    # Protect names problematic for 'test' and other utilities.
    case $dst_arg in
      -* | [=\(\)!]) dst_arg=./$dst_arg;;
    esac
  done
fi

if test $# -eq 0; then
  if test -z "$dir_arg"; then
    echo "$0: no input file specified." >&2
    exit 1
  fi
  # It's OK to call 'install-sh -d' without argument.
  # This can happen when creating conditional directories.
  exit 0
fi

if test -z "$dir_arg"; then
  if test $# -gt 1 || test "$is_target_a_directory" = always; then
    if test ! -d "$dst_arg"; then
      echo "$0: $dst_arg: Is not a directory." >&2
      exit 1
    fi
  fi
fi

if test -z "$dir_arg"; then
  do_exit='(exit $ret); exit $ret'
  trap "ret=129; $do_exit" 1
  trap "ret=130; $do_exit" 2
  trap "ret=141; $do_exit" 13
  trap "ret=143; $do_exit" 15

  # Set umask so as not to create temps with too-generous modes.
  # However, 'strip' requires both read and write access to temps.
  case $mode in
    # Optimize common cases.
    *644) cp_umask=133;;
    *755) cp_umask=22;;

    *[0-7])
      if test -z "$stripcmd"; then
        u_plus_rw=
      else
        u_plus_rw='% 200'
      fi
      cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;
    *)
      if test -z "$stripcmd"; then
        u_plus_rw=
      else
        u_plus_rw=,u+rw
      fi
      cp_umask=$mode$u_plus_rw;;
  esac
fi

for src
do
  # Protect names problematic for 'test' and other utilities.
  case $src in
    -* | [=\(\)!]) src=./$src;;
  esac

  if test -n "$dir_arg"; then
    dst=$src
    dstdir=$dst
    test -d "$dstdir"
    dstdir_status=$?
    # Don't chown directories that already exist.
    if test $dstdir_status = 0; then
      chowncmd=""
    fi
  else

    # Waiting for this to be detected by the "$cpprog $src $dsttmp" command
    # might cause directories to be created, which would be especially bad
    # if $src (and thus $dsttmp) contains '*'.
    if test ! -f "$src" && test ! -d "$src"; then
      echo "$0: $src does not exist." >&2
      exit 1
    fi

    if test -z "$dst_arg"; then
      echo "$0: no destination specified." >&2
      exit 1
    fi
    dst=$dst_arg

    # If destination is a directory, append the input filename.
    if test -d "$dst"; then
      if test "$is_target_a_directory" = never; then
        echo "$0: $dst_arg: Is a directory" >&2
        exit 1
      fi
      dstdir=$dst
      dstbase=`basename "$src"`
      case $dst in
	*/) dst=$dst$dstbase;;
	*)  dst=$dst/$dstbase;;
      esac
      dstdir_status=0
    else
      dstdir=`dirname "$dst"`
      test -d "$dstdir"
      dstdir_status=$?
    fi
  fi

  case $dstdir in
    */) dstdirslash=$dstdir;;
    *)  dstdirslash=$dstdir/;;
  esac

  obsolete_mkdir_used=false

  if test $dstdir_status != 0; then
    case $posix_mkdir in
      '')
        # With -d, create the new directory with the user-specified mode.
        # Otherwise, rely on $mkdir_umask.
        if test -n "$dir_arg"; then
          mkdir_mode=-m$mode
        else
          mkdir_mode=
        fi

        posix_mkdir=false
	# The $RANDOM variable is not portable (e.g., dash).  Use it
	# here however when possible just to lower collision chance.
	tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$

	trap '
	  ret=$?
	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir" 2>/dev/null
	  exit $ret
	' 0

	# Because "mkdir -p" follows existing symlinks and we likely work
	# directly in world-writeable /tmp, make sure that the '$tmpdir'
	# directory is successfully created first before we actually test
	# 'mkdir -p'.
	if (umask $mkdir_umask &&
	    $mkdirprog $mkdir_mode "$tmpdir" &&
	    exec $mkdirprog $mkdir_mode -p -- "$tmpdir/a/b") >/dev/null 2>&1
	then
	  if test -z "$dir_arg" || {
	       # Check for POSIX incompatibilities with -m.
	       # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or
	       # other-writable bit of parent directory when it shouldn't.
	       # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.
	       test_tmpdir="$tmpdir/a"
	       ls_ld_tmpdir=`ls -ld "$test_tmpdir"`
	       case $ls_ld_tmpdir in
		 d????-?r-*) different_mode=700;;
		 d????-?--*) different_mode=755;;
		 *) false;;
	       esac &&
	       $mkdirprog -m$different_mode -p -- "$test_tmpdir" && {
		 ls_ld_tmpdir_1=`ls -ld "$test_tmpdir"`
		 test "$ls_ld_tmpdir" = "$ls_ld_tmpdir_1"
	       }
	     }
	  then posix_mkdir=:
	  fi
	  rmdir "$tmpdir/a/b" "$tmpdir/a" "$tmpdir"
	else
	  # Remove any dirs left behind by ancient mkdir implementations.
	  rmdir ./$mkdir_mode ./-p ./-- "$tmpdir" 2>/dev/null
	fi
	trap '' 0;;
    esac

    if
      $posix_mkdir && (
        umask $mkdir_umask &&
        $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir"
      )
    then :
    else

      # mkdir does not conform to POSIX,
      # or it failed possibly due to a race condition.  Create the
      # directory the slow way, step by step, checking for races as we go.

      case $dstdir in
        /*) prefix='/';;
        [-=\(\)!]*) prefix='./';;
        *)  prefix='';;
      esac

      oIFS=$IFS
      IFS=/
      set -f
      set fnord $dstdir
      shift
      set +f
      IFS=$oIFS

      prefixes=

      for d
      do
        test X"$d" = X && continue

        prefix=$prefix$d
        if test -d "$prefix"; then
          prefixes=
        else
          if $posix_mkdir; then
            (umask $mkdir_umask &&
             $doit_exec $mkdirprog $mkdir_mode -p -- "$dstdir") && break
            # Don't fail if two instances are running concurrently.
            test -d "$prefix" || exit 1
          else
            case $prefix in
              *\'*) qprefix=`echo "$prefix" | sed "s/'/'\\\\\\\\''/g"`;;
              *) qprefix=$prefix;;
            esac
            prefixes="$prefixes '$qprefix'"
          fi
        fi
        prefix=$prefix/
      done

      if test -n "$prefixes"; then
        # Don't fail if two instances are running concurrently.
        (umask $mkdir_umask &&
         eval "\$doit_exec \$mkdirprog $prefixes") ||
          test -d "$dstdir" || exit 1
        obsolete_mkdir_used=true
      fi
    fi
  fi

  if test -n "$dir_arg"; then
    { test -z "$chowncmd" || $doit $chowncmd "$dst"; } &&
    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dst"; } &&
    { test "$obsolete_mkdir_used$chowncmd$chgrpcmd" = false ||
      test -z "$chmodcmd" || $doit $chmodcmd $mode "$dst"; } || exit 1
  else

    # Make a couple of temp file names in the proper directory.
    dsttmp=${dstdirslash}_inst.$$_
    rmtmp=${dstdirsla\g  ]g  ^g                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      sh}_rm.$$_

    # Trap to clean up those temp files at exit.
    trap 'ret=$?; rm -f "$dsttmp" "$rmtmp" && exit $ret' 0

    # Copy the file name to the temp name.
    (umask $cp_umask &&
     { test -z "$stripcmd" || {
	 # Create $dsttmp read-write so that cp doesn't create it read-only,
	 # which would cause strip to fail.
	 if test -z "$doit"; then
	   : >"$dsttmp" # No need to fork-exec 'touch'.
	 else
	   $doit touch "$dsttmp"
	 fi
       }
     } &&
     $doit_exec $cpprog "$src" "$dsttmp") &&

    # and set any options; do chmod last to preserve setuid bits.
    #
    # If any of these fail, we abort the whole thing.  If we want to
    # ignore errors from any of these, just make sure not to ignore
    # errors from the above "$doit $cpprog $src $dsttmp" command.
    #
    { test -z "$chowncmd" || $doit $chowncmd "$dsttmp"; } &&
    { test -z "$chgrpcmd" || $doit $chgrpcmd "$dsttmp"; } &&
    { test -z "$stripcmd" || $doit $stripcmd "$dsttmp"; } &&
    { test -z "$chmodcmd" || $doit $chmodcmd $mode "$dsttmp"; } &&

    # If -C, don't bother to copy if it wouldn't change the file.
    if $copy_on_change &&
       old=`LC_ALL=C ls -dlL "$dst"     2>/dev/null` &&
       new=`LC_ALL=C ls -dlL "$dsttmp"  2>/dev/null` &&
       set -f &&
       set X $old && old=:$2:$4:$5:$6 &&
       set X $new && new=:$2:$4:$5:$6 &&
       set +f &&
       test "$old" = "$new" &&
       $cmpprog "$dst" "$dsttmp" >/dev/null 2>&1
    then
      rm -f "$dsttmp"
    else
      # If $backupsuffix is set, and the file being installed
      # already exists, attempt a backup.  Don't worry if it fails,
      # e.g., if mv doesn't support -f.
      if test -n "$backupsuffix" && test -f "$dst"; then
        $doit $mvcmd -f "$dst" "$dst$backupsuffix" 2>/dev/null
      fi

      # Rename the file to the real destination.
      $doit $mvcmd -f "$dsttmp" "$dst" 2>/dev/null ||

      # The rename failed, perhaps because mv can't rename something else
      # to itself, or perhaps because mv is so ancient that it does not
      # support -f.
      {
        # Now remove or move aside any old file at destination location.
        # We try this two ways since rm can't unlink itself on some
        # systems and the destination file might be busy for other
        # reasons.  In this case, the final cleanup might fail but the new
        # file should still install successfully.
        {
          test ! -f "$dst" ||
          $doit $rmcmd "$dst" 2>/dev/null ||
          { $doit $mvcmd -f "$dst" "$rmtmp" 2>/dev/null &&
            { $doit $rmcmd "$rmtmp" 2>/dev/null; :; }
          } ||
          { echo "$0: cannot unlink or rename $dst" >&2
            (exit 1); exit 1
          }
        } &&

        # Now rename the file to the real destination.
        $doit $mvcmd "$dsttmp" "$dst"
      }
    fi || exit 1

    trap '' 0
  fi
done

# Local variables:
# eval: (add-hook 'before-save-hook 'time-stamp)
# time-stamp-start: "scriptversion="
# time-stamp-format: "%:y-%02m-%02d.%02H"
# time-stamp-time-zone: "UTC0"
# time-stamp-end: "; # UTC"
# End:
  #! /bin/sh

# Convert templates into Makefile and config.c, based on the module
# definitions found in the file Setup.
#
# Usage: makesetup [-s dir] [-c file] [-m file] [Setup] ... [-n [Setup] ...]
#
# Options:
# -s directory: alternative source directory (default .)
# -l directory: library source directory (default derived from $0)
# -c file:      alternative config.c template (default $libdir/config.c.in)
# -c -:         don't write config.c
# -m file:      alternative Makefile template (default ./Makefile.pre)
# -m -:         don't write Makefile
#
# Remaining arguments are one or more Setup files (default ./Setup).
# Setup files after a -n option are used for their variables, modules
# and libraries but not for their .o files.
#
# See Setup for a description of the format of the Setup file.
#
# The following edits are made:
#
# Copying config.c.in to config.c:
# - insert an identifying comment at the start
# - for each <module> mentioned in Setup before *noconfig*:
#   + insert 'extern PyObject* PyInit_<module>(void);' before MARKER 1
#   + insert '{"<module>", PyInit_<module>},' before MARKER 2
#
# Copying Makefile.pre to Makefile:
# - insert an identifying comment at the start
# - replace _MODBUILT_NAMES_ by the list of *static* and *shared* modules
#   from Setup
# - replace _MODDISABLED_NAMES_ by the list of *disabled* modules from Setup
# - replace _MODOBJS_ by the list of objects from Setup (except for
#   Setup files after a -n option)
# - replace _MODLIBS_ by the list of libraries from Setup
# - for each object file mentioned in Setup, append a rule
#   '<file>.o: <file>.c; <build commands>' to the end of the Makefile
# - for each module mentioned in Setup, append a rule
#   which creates a shared library version to the end of the Makefile
# - for each variable definition found in Setup, insert the definition
#   before the comment 'Definitions added by makesetup'

# Loop over command line options
usage='
usage: makesetup [-s srcdir] [-l libdir] [-c config.c.in] [-m Makefile.pre]
                 [Setup] ... [-n [Setup] ...]'
srcdir='.'
libdir=''
config=''
makepre=''
noobjects=''
doconfig=yes
while :
do
	case $1 in
	-s)	shift; srcdir=$1; shift;;
	-l)	shift; libdir=$1; shift;;
	-c)	shift; config=$1; shift;;
	-m)	shift; makepre=$1; shift;;
	--)	shift; break;;
	-n)	noobjects=yes;;
	-*)	echo "$usage" 1>&2; exit 2;;
	*)	break;;
	esac
done

# Set default libdir and config if not set by command line
# (Not all systems have dirname)
case $libdir in
'')	case $0 in
	*/*)	libdir=`echo $0 | sed 's,/[^/]*$,,'`;;
	*)	libdir=.;;
	esac;;
esac
case $config in
'')	config=$libdir/config.c.in;;
esac
case $makepre in
'')	makepre=Makefile.pre;;
esac

# Newline for sed i and a commands
NL='\
'

# Setup to link with extra libraries when making shared extensions.
# Currently, only Cygwin needs this baggage.
case `uname -s` in
CYGWIN*) if test $libdir = .
	 then
	 	ExtraLibDir=.
	 else
	 	ExtraLibDir='$(LIBPL)'
	 fi
	 ExtraLibs="-L$ExtraLibDir -lpython\$(LDVERSION)";;
esac

# Main loop
for i in ${*-Setup}
do
	case $i in
	-n)	echo '*noobjects*';;
	*)	echo '*doconfig*'; cat "$i";;
	esac
done |
sed -e 's/[ 	]*#.*//' -e '/^[ 	]*$/d' |
(
	rulesf="@rules.$$"
	trap 'rm -f $rulesf' 0 1 2 3
	echo "
# Rules appended by makesetup
" >$rulesf
	DEFS=
	BUILT=
	DISABLED=
	MODS=
	SHAREDMODS=
	OBJS=
	LIBS=
	LOCALLIBS=
	BASELIBS=
	while read line
	do
		# to handle backslashes for sh's that don't automatically
		# continue a read when the last char is a backslash
		while echo $line | grep '\\$' > /dev/null
		do
			read extraline
			line=`echo $line| sed s/.$//`$extraline
		done

		# Output DEFS in reverse order so first definition overrides
		case $line in
		*=*)	DEFS="$line$NL$DEFS"; continue;;
		'include '*)	DEFS="$line$NL$DEFS"; continue;;
		'*noobjects*')
			case $noobjects in
			yes)	;;
			*)	LOCALLIBS=$LIBS; LIBS=;;
			esac
			noobjects=yes;
			continue;;
		'*doconfig*')	doconfig=yes; continue;;
		'*static*')	doconfig=yes; continue;;
		'*noconfig*')	doconfig=no; continue;;
		'*shared*')	doconfig=no; continue;;
		'*disabled*')	doconfig=disabled; continue;;
		esac
		srcs=
		cpps=
		libs=
		mods=
		skip=
		for arg in $line
		do
			case $skip in
			libs)	libs="$libs $arg"; skip=; continue;;
			cpps)	cpps="$cpps $arg"; skip=; continue;;
			srcs)	srcs="$srcs $arg"; skip=; continue;;
			esac
			case $arg in
			-framework)	libs="$libs $arg"; skip=libs;
				        # OSX/OSXS/Darwin framework link cmd
					;;
			-[IDUCfF]*)	cpps="$cpps $arg";;
			-Xcompiler)	skip=cpps;;
			-Xlinker)	libs="$libs $arg"; skip=libs;;
			-rpath)		libs="$libs $arg"; skip=libs;;
			--rpath)	libs="$libs $arg"; skip=libs;;
			-[A-Zl]*)	libs="$libs $arg";;
			*.a)		libs="$libs $arg";;
			*.so)		libs="$libs $arg";;
			*.sl)		libs="$libs $arg";;
			/*.o)		libs="$libs $arg";;
			*.def)		libs="$libs $arg";;
			*.o)		srcs="$srcs `basename $arg .o`.c";;
			*.[cC])		srcs="$srcs $arg";;
			*.m)		srcs="$srcs $arg";; # Objective-C src
			*.cc)		srcs="$srcs $arg";;
			*.c++)		srcs="$srcs $arg";;
			*.cxx)		srcs="$srcs $arg";;
			*.cpp)		srcs="$srcs $arg";;
			\$*)		libs="$libs $arg"
					cpps="$cpps $arg";;
			*.*)		echo 1>&2 "bad word $arg in $line"
					exit 1;;
			-u)		skip=libs; libs="$libs -u";;
			[a-zA-Z_]*)	mods="$mods $arg";;
			*)		echo 1>&2 "bad word $arg in $line"
					exit 1;;
			esac
		done
		case $doconfig in
		yes)
			LIBS="$LIBS $libs"
			MODS="$MODS $mods"
			BUILT="$BUILT $mods"
			;;
		no)
			BUILT="$BUILT $mods"
			;;
		disabled)
			DISABLED="$DISABLED $mods"
			continue
			;;
		esac
		case $noobjects in
		yes)	continue;;
		esac
		objs=''
		for src in $srcs
		do
			case $src in
			*.c)   obj=`basename $src .c`.o; cc='$(CC)';;
			*.cc)  obj=`basename $src .cc`.o; cc='$(CXX)';;
			*.c++) obj=`basename $src .c++`.o; cc='$(CXX)';;
			*.C)   obj=`basename $src .C`.o; cc='$(CXX)';;
			*.cxx) obj=`basename $src .cxx`.o; cc='$(CXX)';;
			*.cpp) obj=`basename $src .cpp`.o; cc='$(CXX)';;
			*.m)   obj=`basename $src .m`.o; cc='$(CC)';; # Obj-C
			*)     continue;;
			esac
			obj="$srcdir/$obj"
			objs="$objs $obj"
			case $src in
			glmodule.c) ;;
			/*) ;;
			\$*) ;;
			*) src='$(srcdir)/'"$srcdir/$src";;
			esac
			case $doconfig in
			no)	cc="$cc \$(CCSHARED) \$(PY_CFLAGS) \$(PY_CPPFLAGS)";;
			*)
				cc="$cc \$(PY_BUILTIN_MODULE_CFLAGS)";;
			esac
			rule="$obj: $src; $cc $cpps -c $src -o $obj"
			echo "$rule" >>$rulesf
		done
		case $doconfig in
		yes)	OBJS="$OBJS $objs";;
		esac
		for mod in $mods
		do
			file="$srcdir/$mod\$(EXT_SUFFIX)"
			case $doconfig in
			no)	SHAREDMODS="$SHAREDMODS $file";;
			esac
			rule="$file: $objs"
			rule="$rule; \$(BLDSHARED) $objs $libs $ExtraLibs -o $file"
			echo "$rule" >>$rulesf
		done
	done

	case $SHAREDMODS in
	'')	;;
	*)	DEFS="SHAREDMODS=$SHAREDMODS$NL$DEFS";;
	esac

	case $noobjects in
	yes)	BASELIBS=$LIBS;;
	*)	LOCALLIBS=$LIBS;;
	esac
	LIBS='$(LOCALMODLIBS) $(BASEMODLIBS)'
	DEFS="BASEMODLIBS=$BASELIBS$NL$DEFS"
	DEFS="LOCALMODLIBS=$LOCALLIBS$NL$DEFS"

	EXTDECLS=
	INITBITS=
	for mod in $MODS
	do
		EXTDECLS="${EXTDECLS}extern PyObject* PyInit_$mod(void);$NL"
		INITBITS="${INITBITS}    {\"$mod\", PyInit_$mod},$NL"
	done


	case $config in
	-)  ;;
	*)  sed -e "
		1i$NL/* Generated automatically from $config by makesetup. */
		/MARKER 1/i$NL$EXTDECLS

		/MARKER 2/i$NL$INITBITS

		" $config >config.c
	    ;;
	esac

	case $makepre in
	-)	;;
	*)	sedf="@sed.in.$$"
		trap 'rm -f $sedf' 0 1 2 3
		echo "1i\\" >$sedf
		str="# Generated automatically from $makepre by makesetup."
		echo "$str" >>$sedf
		echo "s%_MODBUILT_NAMES_%$BUILT%" >>$sedf
		echo "s%_MODDISABLED_NAMES_%$DISABLED%" >>$sedf
		echo "s%_MODOBJS_%$OBJS%" >>$sedf
		echo "s%_MODLIBS_%$LIBS%" >>$sedf
		echo "/Definitions added by makesetup/a$NL$NL$DEFS" >>$sedf
		sed -f $sedf $makepre >Makefile
		cat $rulesf >>Makefile
		rm -f $sedf
	    ;;
	esac

	rm -f $rulesf
)
                                                                                                                                                                                                                                                                                                                                                        ELF                            4     (         L$qUSQ   PPq1eY[]a$ GCC: (Buildroot 2021.11-190-gfba568a16e) 10.3.0             GNU                       zR |  0          0    D Iu Buxu|[ AAC    P                                                                      
       0                %              ;               python.c main __x86.get_pc_thunk.bx _GLOBAL_OFFSET_TABLE_ Py_BytesMain         
  "           T      .symtab .strtab .shstrtab .text .data .bss .rel.text.startup .text.__x86.get_pc_thunk.bx .comment .note.GNU-stack .note.gnu.property .rel.eh_frame .group                                                        4                               <                      !             <                      '             <                      0             <   0                  ,   	   @                        >            l                     Z      0       p   1                 c                                    s                (                                  `                     	   @                                      ,                 	                H                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            a
    !a8                     @   s  d Z ddlmZ ddlmZ ddlZddlZddlZddl	Z	ddl
Z
ddlZddlZg dZeZdZdZG dd	 d	eZG d
d deZG dd deZG dd deZG dd deZG dd deZG dd deZG dd deZG dd deZG dd deZG dd deZe ZG dd dZ G d d! d!e Z!G d"d# d#e Z"G d$d% d%e Z#G d&d' d'eZ$G d(d) d)e$Z%G d*d+ d+e%Z&G d,d- d-eZ'G d.d/ d/eZ(dS )0a  Configuration file parser.

A configuration file consists of sections, lead by a "[section]" header,
and followed by "name: value" entries, with continuations and such in
the style of RFC 822.

Intrinsic defaults can be specified by passing them into the
ConfigParser constructor as a dictionary.

class:

ConfigParser -- responsible for parsing a list of
                    configuration files, and managing the parsed database.

    methods:

    __init__(defaults=None, dict_type=_default_dict, allow_no_value=False,
             delimiters=('=', ':'), comment_prefixes=('#', ';'),
             inline_comment_prefixes=None, strict=True,
             empty_lines_in_values=True, default_section='DEFAULT',
             interpolation=<unset>, converters=<unset>):
        Create the parser. When `defaults' is given, it is initialized into the
        dictionary or intrinsic defaults. The keys must be strings, the values
        must be appropriate for %()s string interpolation.

        When `dict_type' is given, it will be used to create the dictionary
        objects for the list of sections, for the options within a section, and
        for the default values.

        When `delimiters' is given, it will be used as the set of substrings
        that divide keys from values.

        When `comment_prefixes' is given, it will be used as the set of
        substrings that prefix comments in empty lines. Comments can be
        indented.

        When `inline_comment_prefixes' is given, it will be used as the set of
        substrings that prefix comments in non-empty lines.

        When `strict` is True, the parser won't allow for any section or option
        duplicates while reading from a single source (file, string or
        dictionary). Default is True.

        When `empty_lines_in_values' is False (default: True), each empty line
        marks the end of an option. Otherwise, internal empty lines of
        a multiline option are kept as part of the value.

        When `allow_no_value' is True (default: False), options without
        values are accepted; the value presented for these is None.

        When `default_section' is given, the name of the special section is
        named accordingly. By default it is called ``"DEFAULT"`` but this can
        be customized to point to any other valid section name. Its current
        value can be retrieved using the ``parser_instance.default_section``
        attribute and may be modified at runtime.

        When `interpolation` is given, it should be an Interpolation subclass
        instance. It will be used as the handler for option value
        pre-processing when using getters. RawConfigParser objects don't do
        any sort of interpolation, whereas ConfigParser uses an instance of
        BasicInterpolation. The library also provides a ``zc.buildbot``
        inspired ExtendedInterpolation implementation.

        When `converters` is given, it should be a dictionary where each key
        represents the name of a type converter and each value is a callable
        implementing the conversion from string to the desired datatype. Every
        converter gets its corresponding get*() method on the parser object and
        section proxies.

    sections()
        Return all the configuration section names, sans DEFAULT.

    has_section(section)
        Return whether the given section exists.

    has_option(section, option)
        Return whether the given option exists in the given section.

    options(section)
        Return list of configuration options for the named section.

    read(filenames, encoding=None)
        Read and parse the iterable of named configuration files, given by
        name.  A single filename is also allowed.  Non-existing files
        are ignored.  Return list of successfully read files.

    read_file(f, filename=None)
        Read and parse one configuration file, given as a file object.
        The filename defaults to f.name; it is only used in error
        messages (if f has no `name' attribute, the string `<???>' is used).

    read_string(string)
        Read configuration from a given string.

    read_dict(dictionary)
        Read configuration from a dictionary. Keys are section names,
        values are dictionaries with keys and values that should be present
        in the section. If the used dictionary type preserves order, sections
        and their keys will be added in order. Values are automatically
        converted to strings.

    get(section, option, raw=False, vars=None, fallback=_UNSET)
        Return a string value for the named option.  All % interpolations are
        expanded in the return values, based on the defaults passed into the
        constructor and the DEFAULT section.  Additional substitutions may be
        provided using the `vars' argument, which must be a dictionary whose
        contents override any pre-existing defaults. If `option' is a key in
        `vars', the value from `vars' is used.

    getint(section, options, raw=False, vars=None, fallback=_UNSET)
        Like get(), but convert value to an integer.

    getfloat(section, options, raw=False, vars=None, fallback=_UNSET)
        Like get(), but convert value to a float.

    getboolean(section, options, raw=False, vars=None, fallback=_UNSET)
        Like get(), but convert value to a boolean (currently case
        insensitively defined as 0, false, no, off for False, and 1, true,
        yes, on for True).  Returns False or True.

    items(section=_UNSET, raw=False, vars=None)
        If section is given, return a list of tuples with (name, value) for
        each option in the section. Otherwise, return a list of tuples with
        (section_name, section_proxy) for each section, including DEFAULTSECT.

    remove_section(section)
        Remove the given file section and all its options.

    remove_option(section, option)
        Remove the given option from the given section.

    set(section, option, value)
        Set the given option.

    write(fp, space_around_delimiters=True)
        Write the configuration state in .ini format. If
        `space_around_delimiters' is True (the default), delimiters
        between keys and values are surrounded by spaces.
    )MutableMapping)ChainMapN)NoSectionErrorDuplicateOptionErrorDuplicateSectionErrorNoOptionErrorInterpolationErrorInterpolationDepthErrorInterpolationMissingOptionErrorInterpolationSyntaxErrorParsingErrorMissingSectionHeaderErrorConfigParserSafeConfigParserRawConfigParserInterpolationBasicInterpolationExtendedInterpolationLegacyInterpolationSectionProxyConverterMappingDEFAULTSECTMAX_INTERPOLATION_DEPTHZDEFAULT
   c                   @   s&   e Zd ZdZdddZdd ZeZdS )	Errorz'Base class for ConfigParser exceptions. c                 C   s   || _ t| | d S N)message	Exception__init__)selfmsg r"   "/usr/lib/python3.9/configparser.pyr      s    zError.__init__c                 C   s   | j S r   )r   r    r"   r"   r#   __repr__   s    zError.__repr__N)r   )__name__
__module____qualname____doc__r   r%   __str__r"   r"   r"   r#   r      s   
r   c                   @   s   e Zd ZdZdd ZdS )r   z2Raised when no section matches a requested option.c                 C   s$   t | d|f  || _|f| _d S )NzNo section: %r)r   r   sectionargsr    r+   r"   r"   r#   r      s    zNoSectionError.__init__Nr&   r'   r(   r)   r   r"   r"   r"   r#   r      s   r   c                   @   s   e Zd ZdZdddZdS )r   a  Raised when a section is repeated in an input source.

    Possible repetitions that raise this exception are: multiple creation
    using the API or in strict parsers when a section is found more than once
    in a single input file, string or dictionary.
    Nc                 C   s   t |dg}|d urRdt |g}|d ur8|d| |d || |}n|dd t| d| || _|| _	|| _
|||f| _d S )N already existsWhile reading from  [line {0:2d}]z
: section r   zSection r   )reprappendformatextendinsertr   r   joinr+   sourcelinenor,   )r    r+   r8   r9   r!   r   r"   r"   r#   r      s    

zDuplicateSectionError.__init__)NNr.   r"   r"   r"   r#   r      s   r   c                   @   s   e Zd ZdZdddZdS )r   zRaised by strict parsers when an option is repeated in an input source.

    Current implementation raises this exception only when an option is found
    more than once in a single file, string or dictionary.
    Nc                 C   s   t |dt |dg}|d urZdt |g}|d ur@|d| |d || |}n|dd t| d| || _|| _	|| _
|| _||||f| _d S )	Nz in section r/   r0   r1   z	: option r   zOption r   )r2   r3   r4   r5   r6   r   r   r7   r+   optionr8   r9   r,   )r    r+   r:   r8   r9   r!   r   r"   r"   r#   r      s"    

zDuplicateOptionError.__init__)NNr.   r"   r"   r"   r#   r      s   r   c                   @   s   e Zd ZdZdd ZdS )r   z!A requested option was not found.c                 C   s.   t | d||f  || _|| _||f| _d S )NzNo option %r in section: %rr   r   r:   r+   r,   )r    r:   r+   r"   r"   r#   r      s    zNoOptionError.__init__Nr.   r"   r"   r"   r#   r      s   r   c                   @   s   e Zd ZdZdd ZdS )r   z0Base class for interpolation-related exceptions.c                 C   s(   t | | || _|| _|||f| _d S r   r;   )r    r:   r+   r!   r"   r"   r#   r     s    zInterpolationError.__init__Nr.   r"   r"   r"   r#   r      s   r   c                   @   s   e Zd ZdZdd ZdS )r
   zAA string substitution required a setting which was not available.c                 C   s8   d ||||}t| ||| || _||||f| _d S )NzBad value substitution: option {!r} in section {!r} contains an interpolation key {!r} which is not a valid option name. Raw value: {!r})r4   r   r   	referencer,   )r    r:   r+   rawvalr<   r!   r"   r"   r#   r     s    z(InterpolationMissingOptionError.__init__Nr.   r"   r"   r"   r#   r
     s   r
   c                   @   s   e Zd ZdZdS )r   zRaised when the source text contains invalid syntax.

    Current implementation raises this exception when the source text into
    which substitutions are made does not conform to the required syntax.
    N)r&   r'   r(   r)   r"   r"   r"   r#   r     s   r   c                   @   s   e Zd ZdZdd ZdS )r	   z0Raised when substitutions are nested too deeply.c                 C   s0   d ||t|}t| ||| |||f| _d S )NzRecursion limit exceeded in value substitution: option {!r} in section {!r} contains an interpolation key which cannot be substituted in {} steps. Raw value: {!r})r4   r   r   r   r,   )r    r:   r+   r=   r!   r"   r"   r#   r     s    z InterpolationDepthError.__init__Nr.   r"   r"   r"   r#   r	     s   r	   c                   @   s<   e Zd ZdZd
ddZedd Zejdd Zdd	 ZdS )r   z>Raised when a configuration file does not follow legal syntax.Nc                 C   sT   |r|rt dn|s$|s$t dn|r,|}t| d|  || _g | _|f| _d S )Nz:Cannot specify both `filename' and `source'. Use `source'.z%Required argument `source' not given.z"Source contains parsing errors: %r)
Vvg  wg  xg  yg  zg  {g  |g  }g  ~g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g  g                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              alueErrorr   r   r8   errorsr,   )r    r8   filenamer"   r"   r#   r   ,  s    

zParsingError.__init__c                 C   s   t jdtdd | jS )zDeprecated, use `source'.SThe 'filename' attribute will be removed in future versions.  Use 'source' instead.   
stacklevelwarningswarnDeprecationWarningr8   r$   r"   r"   r#   r@   ;  s
    zParsingError.filenamec                 C   s   t jdtdd || _dS )zDeprecated, user `source'.rA   rB   rC   NrE   r    valuer"   r"   r#   r@   E  s
    c                 C   s*   | j ||f |  jd||f 7  _d S )Nz
	[line %2d]: %s)r?   r3   r   )r    r9   liner"   r"   r#   r3   O  s    zParsingError.append)NN)	r&   r'   r(   r)   r   propertyr@   setterr3   r"   r"   r"   r#   r   )  s   

	
	r   c                   @   s   e Zd ZdZdd ZdS )r   z@Raised when a key-value pair is found before any section header.c                 C   s8   t | d|||f  || _|| _|| _|||f| _d S )Nz7File contains no section headers.
file: %r, line: %d
%r)r   r   r8   r9   rK   r,   )r    r@   r9   rK   r"   r"   r#   r   W  s    z"MissingSectionHeaderError.__init__Nr.   r"   r"   r"   r#   r   T  s   r   c                   @   s0   e Zd ZdZdd Zdd Zdd Zdd	 Zd
S )r   zBDummy interpolation that passes the value through with no changes.c                 C   s   |S r   r"   )r    parserr+   r:   rJ   defaultsr"   r"   r#   
before_getk  s    zInterpolation.before_getc                 C   s   |S r   r"   r    rN   r+   r:   rJ   r"   r"   r#   
before_setn  s    zInterpolation.before_setc                 C   s   |S r   r"   rQ   r"   r"   r#   before_readq  s    zInterpolation.before_readc                 C   s   |S r   r"   rQ   r"   r"   r#   before_writet  s    zInterpolation.before_writeN)r&   r'   r(   r)   rP   rR   rS   rT   r"   r"   r"   r#   r   h  s
   r   c                   @   s2   e Zd ZdZedZdd Zdd Zdd Z	d	S )
r   a!  Interpolation as implemented in the classic ConfigParser.

    The option values can contain format strings which refer to other values in
    the same section, or values in the special default section.

    For example:

        something: %(dir)s/whatever

    would resolve the "%(dir)s" to the value of dir.  All reference
    expansions are done late, on demand. If a user needs to use a bare % in
    a configuration file, she can escape it by writing %%. Other % usage
    is considered a user error and raises `InterpolationSyntaxError'.z%\(([^)]+)\)sc              	   C   s$   g }|  ||||||d d|S N   r   _interpolate_somer7   r    rN   r+   r:   rJ   rO   Lr"   r"   r#   rP     s    zBasicInterpolation.before_getc                 C   s<   | dd}| jd|}d|v r8td||df |S )Nz%%r   %1invalid interpolation syntax in %r at position %dreplace_KEYCREsubr>   findr    rN   r+   r:   rJ   Z	tmp_valuer"   r"   r#   rR     s    zBasicInterpolation.before_setc              
   C   sh  |j ||d|d}|tkr&t||||rd|d}	|	dk rL|| d S |	dkrr||d |	  ||	d  }|dd }
|
dkr|d |dd  }q&|
dkrP| j|}|d u rt||d| ||	d}||
 d  }z|| }W n$ ty   t||||d Y n0 d|v rD| |||||||d  n
|| q&t||d	|f q&d S )
NTrawfallbackr[   r   rV   rB   ('bad interpolation variable reference %rz/'%%' must be followed by '%%' or '(', found: %r)getr   r	   ra   r3   r_   matchr   optionxformgroupendKeyErrorr
   rX   )r    rN   r:   accumrestr+   mapdepthr=   pcmvarvr"   r"   r#   rX     sT    





z$BasicInterpolation._interpolate_someN
r&   r'   r(   r)   recompiler_   rP   rR   rX   r"   r"   r"   r#   r   x  s
   
r   c                   @   s2   e Zd ZdZedZdd Zdd Zdd Z	d	S )
r   zyAdvanced variant of interpolation, supports the syntax used by
    `zc.buildout'. Enables interpolation between sections.z\$\{([^}]+)\}c              	   C   s$   g }|  ||||||d d|S rU   rW   rY   r"   r"   r#   rP     s    z ExtendedInterpolation.before_getc                 C   s<   | dd}| jd|}d|v r8td||df |S )Nz$$r   $r\   r]   rb   r"   r"   r#   rR     s    z ExtendedInterpolation.before_setc                 C   s  |j ||d|d}|tkr&t||||r|d}	|	dk rL|| d S |	dkrr||d |	  ||	d  }|dd }
|
dkr|d |dd  }q&|
dkr| j|}|d u rt||d| |d	d	}||
 d  }|}|}zrt|dkr||d }|| }nHt|dkrR|d }||d }|j ||dd
}nt||d|f W n0 tttfy   t|||d	|d Y n0 d|v r| |||||t|j|dd
|d  n
|| q&t||d|f q&d S )NTrc   rz   r   rV   rB   {rg   :)rd   zMore than one ':' found: %rz-'$' must be followed by '$' or '{', found: %r)rh   r   r	   ra   r3   r_   ri   r   rk   splitrl   lenrj   rm   r   r   r
   r7   rX   dictitems)r    rN   r:   rn   ro   r+   rp   rq   r=   rr   rs   rt   pathZsectZoptrv   r"   r"   r#   rX     sn    





z'ExtendedInterpolation._interpolate_someNrw   r"   r"   r"   r#   r     s
   
r   c                   @   s6   e Zd ZdZedZdd Zdd Ze	dd Z
d	S )
r   z{Deprecated interpolation used in old versions of ConfigParser.
    Use BasicInterpolation or ExtendedInterpolation instead.z%\(([^)]*)\)s|.c           
   
   C   s   |}t }|r|d8 }|rd|v rtj| j|d}| j||}z|| }W q ty }	 z"t||||	jd d W Y d }	~	qd }	~	0 0 qqq|rd|v rt	||||S )NrV   z%()rN   r   )
r   	functoolspartial_interpolation_replacer_   r`   rm   r
   r,   r	   )
r    rN   r+   r:   rJ   varsr=   rq   r^   er"   r"   r#   rP     s*    zLegacyInterpolation.before_getc                 C   s   |S r   r"   rQ   r"   r"   r#   rR   $  s    zLegacyInterpolation.before_setc                 C   s,   |  d}|d u r|   S d|| S d S )NrV   z%%(%s)s)rk   rj   )ri   rN   sr"   r"   r#   r   '  s    
z*LegacyInterpolation._interpolation_replaceN)r&   r'   r(   r)   rx   ry   r_   rP   rR   staticmethodr   r"   r"   r"   r#   r   
  s   
r   c                
       s6  e Zd ZdZdZdZdZe Ze	
ee	jZe	
ejdde	jZe	
ejdde	jZe	
dZddddd	d	d	d	d
Zded	fdddddeeedddZdd Zdd Zdd Zdd Zdd ZddddZdeddZdfd d!Zdgd#d$Zdhd%d&Zd	ded'd(d)Z d*d+ Z!d	ded'd,d-Z"d	ded'd.d/Z#d	ded'd0d1Z$d	ded'd2d3Z%ed	df fd4d5	Z&d6d7 Z'd8d9 Z(d:d; Z)did<d=Z*djd>d?Z+d@dA Z,dBdC Z-dDdE Z.dFdG Z/dHdI Z0dJdK Z1dLdM Z2dNdO Z3dPdQ Z4dRdS Z5dTdU Z6dVdW Z7dXdY Z8dZd[ Z9d\d] Z:d^d^d^d_d`daZ;e<dbdc Z=  Z>S )kr   z,ConfigParser that does not do interpolation.z
        \[                                 # [
        (?P<header>[^]]+)                  # very permissive!
        \]                                 # ]
        a  
        (?P<option>.*?)                    # very permissive!
        \s*(?P<vi>{delim})\s*              # any number of space/tab,
                                           # followed by any of the
                                           # allowed delimiters,
                                           # followed by any space/tab
        (?P<value>.*)$                     # everything up to eol
        a  
        (?P<option>.*?)                    # very permissive!
        \s*(?:                             # any number of space/tab,
        (?P<vi>{delim})\s*                 # optionally followed by
                                           # any of the allowed
                                           # delimiters, followed by any
                                           # space/tab
        (?P<value>.*))?$                   # everything up to eol
        z=|:Zdelimz\STF)1ZyestrueZon0noZfalseZoffN=r|   )#;)
delimiterscomment_prefixesinline_comment_prefixesstrictempty_lines_in_valuesdefault_sectioninterpolation
convertersc                C   s<  || _ |   | _|   | _t| | _|   | _t| |	| j|	< t|| _|dkrd|rZ| j	n| j
| _nNddd |D }|rt| jj|dtj| _nt| jj|dtj| _t|pd| _t|pd| _|| _|| _|| _|	| _|
| _| jtu r| j| _| jd u rt | _|tur(| j| |r8| | d S )Nr   |c                 s   s   | ]}t |V  qd S r   )rx   escape).0dr"   r"   r#   	<genexpr>j      z+RawConfigParser.__init__.<locals>.<genexpr>r   r"   )_dict	_sections	_defaultsr   _converters_proxiesr   tuple_delimiters	OPTCRE_NVOPTCRE_optcrer7   rx   ry   _OPT_NV_TMPLr4   VERBOSE	_OPT_TMPL_comment_prefixes_inline_comment_prefixes_strict_allow_no_value_empty_lines_in_valuesr   _interpolation_UNSET_DEFAULT_INTERPOLATIONr   update_read_defaults)r    rO   Z	dict_typeZallow_no_valuer   r   r   r   r   r   r   r   r   r"   r"   r#   r   Y  s@    






zRawConfigParser.__init__c                 C   s   | j S r   )r   r$   r"   r"   r#   rO     s    zRawConfigParser.defaultsc                 C   s   t | j S )z3Return a list of section names, excluding [DEFAULT])listr   keysr$   r"   r"   r#   sections  s    zRawConfigParser.sectionsc                 C   sJ   || j krtd| || jv r(t||  | j|< t| || j|< dS )zCreate a new section in the configuration.

        Raise DuplicateSectionError if a section by the specified name
        already exists. Raise ValueError if name is DEFAULT.
        zInvalid section name: %rN)r   r>   r   r   r   r   r   r-   r"   r"   r#   add_section  s    

zRawConfigParser.add_sectionc                 C   s
   || j v S )z~Indicate whether the named section is present in the configuration.

        The DEFAULT section is not acknowledged.
        )r   r-   r"   r"   r#   has_section  s    zRawConfigParser.has_sectionc                 C   sH   z| j |  }W n ty.   t|dY n0 || j t| S )z9Return a list of option names for the given section name.N)r   copyrm   r   r   r   r   r   )r    r+   Zoptsr"   r"   r#   options  s    zRawConfigParser.optionsc              	   C   s   t |tttjfr|g}g }|D ]x}z<t||d}| || W d   n1 sT0    Y  W n tyv   Y q Y n0 t |tjrt|}|	| q |S )a  Read and parse a filename or an iterable of filenames.

        Files that cannot be opened are silently ignored; this is
        designed so that you can specify an iterable of potential
        configuration file locations (e.g. current directory, user's
        home directory, systemwide directory), and all existing
        configuration files in the iterable will be read.  A single
        filename may also be given.

        Return list of successfully read files.
        )encodingN)

isinstancestrbytesosPathLikeopen_readOSErrorfspathr3   )r    	filenamesr   Zread_okr@   fpr"   r"   r#   read  s    .

zRawConfigParser.readc                 C   s:   |du r*z
|j }W n ty(   d}Y n0 | || dS )aP  Like read() but the argument must be a file-like object.

        The `f' argument must be iterable, returning one line at a time.
        Optional second argument is the `source' specifying the name of the
        file being read. If not given, it is taken from f.name. If `f' has no
        `name' attribute, `<???>' is used.
        Nz<???>)nameAttributeErrorr   )r    fr8   r"   r"   r#   	read_file  s    

zRawConfigParser.read_file<string>c                 C   s   t |}| || dS )z'Read configuration from a given string.N)ioStringIOr   )r    stringr8   Zsfiler"   r"   r#   read_string  s    
zRawConfigParser.read_string<dict>c              
   C   s   t  }| D ]\}}t|}z| | W n& ttfyR   | jrN||v rN Y n0 || | D ]`\}}| t|}|durt|}| jr||f|v rt	||||||f |  ||| qfqdS )a  Read configuration from a dictionary.

        Keys are section names, values are dictionaries with keys and values
        that should be present in the section. If the used dictionary type
        preserves order, sections and their keys will be added in order.

        All types held in the dictionary are converted to strings during
        reading, including section names, option names and keys.

        Optional second argument is the `source' specifying the name of the
        dictionary being read.
        N)
setr   r   r   r   r>   r   addrj   r   )r    Z
dictionaryr8   elements_addedr+   r   keyrJ   r"   r"   r#   	read_dict  s"    
zRawConfigParser.read_dictc                 C   s"   t jdtdd | j||d dS )z"Deprecated, use read_file instead.zRThis method will be removed in future versions.  Use 'parser.read_file()' instead.rB   rC   )r8   N)rF   rG   rH   r   )r    r   r@   r"   r"   r#   readfp  s
    zRawConfigParser.readfprd   r   re   c                C   s   z|  ||}W n& ty6   |tu r* n| Y S Y n0 | |}z|| }W n. ty|   |tu rpt||n| Y S Y n0 |s|du r|S | j| ||||S dS )a]  Get an option value for a given section.

        If `vars' is provided, it must be a dictionary. The option is looked up
        in `vars' (if provided), `section', and in `DEFAULTSECT' in that order.
        If the key is not found and `fallback' is provided, it is used as
        a fallback value. `None' can be provided as a `fallback' value.

        If interpolation is enabled and the optional argument `raw' is False,
        all interpolations are expanded in the return values.

        Arguments `raw', `vars', and `fallback' are keyword only.

        The section DEFAULT is special.
        N)_unify_valuesr   r   rj   rm   r   r   rP   )r    r+   r:   rd   r   re   r   rJ   r"   r"   r#   rh     s$    
zRawConfigParser.getc                 K   s   || j ||fi |S r   )rh   )r    r+   convr:   kwargsr"   r"   r#   _get"  s    zRawConfigParser._getc             	   K   sH   z| j |||f||d|W S  ttfyB   |tu r: | Y S 0 d S )N)rd   r   )r   r   r   r   )r    r+   r:   r   rd   r   re   r   r"   r"   r#   	_get_conv%  s    zRawConfigParser._get_convc                K   s   | j ||tf|||d|S Nr   )r   intr    r+   r:   rd   r   re   r   r"   r"   r#   getint0  s
    zRawConfigParser.getintc                K   s   | j ||tf|||d|S r   )r   floatr   r"   r"   r#   getfloat5  s
    zRawConfigParser.getfloatc                K   s    | j ||| jf|||d|S r   )r   _convert_to_booleanr   r"   r"   r#   
getboolean:  s
    zRawConfigParser.getbooleanc                    s   t u rt  S j  z j  W n$ tyT   jkrPt	Y n0 t
  }|r| D ]\}}| |< qn fdd|r fddfdd|D S )a  Return a list of (name, value) tuples for each option in a section.

        All % interpolations are expanded in the return values, based on the
        defaults passed into the constructor, unless the optional argument
        `raw' is true.  Additional substitutions may be provided using the
        `vars' argument, which must be a dictionary whose contents overrides
        any pre-existing defaults.

        The section DEFAULT is special.
        c                    s   j |  |   S r   )r   rP   r:   )r   r+   r    r"   r#   <lambda>W  s   z'RawConfigParser.items.<locals>.<lambda>c                    s    |  S r   r"   r   )r   r"   r#   r   Z  r   c                    s   g | ]}| |fqS r"   r"   )r   r:   )value_getterr"   r#   
<listcomp>[  r   z)RawConfigParser.items.<locals>.<listcomp>)r   superr   r   r   r   r   rm   r   r   r   r   rj   )r    r+   rd   r   Z	orig_keysr   rJ   	__class__)r   r+   r    r   r#   r   ?  s     


zRawConfigParser.itemsc                 C   s.   |   D ]}| | }| |= ||f  S tdS )zRemove a section from the parser and return it as
        a (section_name, section_proxy) tuple. If no section is present, raise
        KeyError.

        The section DEFAULT is never returned because it cannot be removed.
        N)r   rm   r    r   rJ   r"   r"   r#   popitem]  s
    zRawConfigParser.popitemc                 C   s   |  S r   )lower)r    Z	optionstrr"   r"   r#   rj   j  s    zRawConfigParser.optionxformc                 C   sV   |r|| j kr"| |}|| jv S || jvr0dS | |}|| j| v pP|| jv S dS )zCheck for the existence of a given option in a given section.
        If the specified `section' is None or an empty string, DEFAULT is
        assumed. If the specified `section' does not exist, returns False.FN)r   rj   r   r   )r    r+   r:   r"   r"   r#   
has_optionm  s    



zRawConfigParser.has_optionc                 C   sj   |r| j | |||}|r$|| jkr,| j}n,z| j| }W n tyV   t|dY n0 ||| |< dS )zSet an option.N)r   rR   r   r   r   rm   r   rj   )r    r+   r:   rJ   sectdictr"   r"   r#   r   {  s    zRawConfigParser.setc                 C   sh   |rd | jd }n
| jd }| jr>| || j| j | | jD ]}| ||| j|  | qDdS )aO  Write an .ini-format representation of the configuration state.

        If `space_around_delimiters' is True (the default), delimiters
        between keys and values are surrounded by spaces.

        Please note that comments in the original configuration file are not
        preserved when writing the configuration back.
        z {} r   N)r4   r   r   _write_sectionr   r   r   )r    r   Zspace_around_delimitersr   r+   r"   r"   r#   write  s    	



zRawConfigParser.writec                 C   sx   | d| |D ]T\}}| j| |||}|dus<| jsR|t|dd }nd}| d|| q| d dS )z-Write a single section to the specified `fp'.z[{}]
N
z
	r   z{}{}
)r   r4   r   rT   r   r   r^   )r    r   Zsection_nameZsection_itemsZ	delimiterr   rJ   r"   r"   r#   r     s    zRawConfigParser._write_sectionc                 C   sb   |r|| j kr| j}n,z| j| }W n ty@   t|dY n0 | |}||v }|r^||= |S )zRemove an option.N)r   r   r   rm   r   rj   )r    r+   r:   r   existedr"   r"   r#   remove_option  s    
zRawConfigParser.remove_optionc                 C   s"   || j v }|r| j |= | j|= |S )zRemove a file section.)r   r   )r    r+   r   r"   r"   r#   remove_section  s
    
zRawConfigParser.remove_sectionc                 C   s&   || j kr| |st|| j| S r   )r   r   rm   r   r    r   r"   r"   r#   __getitem__  s    zRawConfigParser.__getitem__c                 C   sX   || v r| | |u rd S || j kr.| j  n|| jv rF| j|   | ||i d S r   )r   r   clearr   r   r   r"   r"   r#   __setitem__  s    

zRawConfigParser.__setitem__c                 C   s2   || j krtd| |s$t|| | d S )Nz"Cannot remove the default section.)r   r>   r   rm   r   r   r"   r"   r#   __delitem__  s
    

zRawConfigParser.__delitem__c                 C   s   || j kp| |S r   )r   r   r   r"   r"   r#   __contains__  s    zRawConfigParser.__contains__c                 C   s   t | jd S )NrV   )r~   r   r$   r"   r"   r#   __len__  s    zRawConfigParser.__len__c                 C   s   t | jf| j S r   )	itertoolschainr   r   r   r$   r"   r"   r#   __iter__  s    zRawConfigParser.__iter__c                 C   s   t  }d}d}d}d}d}d}	t|ddD ]\}}
tj}dd | jD }|tjkr|ri }| D ]T\}}|
||d }|dkrqd|||< |dks|dkrd|
|d   rdt||}qd|}qJ| j	D ]}|

 |rd} qq|tjkrd}|
d| 
 }|sN| jrF|du rL|durL|rL|| durL|| d q*tj}q*| j|
}|rh| nd}|dur|r||kr|| | q*|}| j|}|r<|d	}|| jv r| jr||v rt|||| j| }|| n@|| jkr
| j}n,|  }|| j|< t| || j|< || d}q*|du rTt|||
q*| j|}|r|d
dd\}}}|s| |	|||
}	|  |! }| jr||f|v rt"|||||||f |dur|
 }|g||< nd||< q*| |	|||
}	q*| #  |	r|	dS )aX  Parse a sectioned configuration file.

        Each section in a configuration file contains a header, indicated by
        a name in square brackets (`[]'), plus key/value options, indicated by
        `name' and `value' delimited with a specific substring (`=' or `:' by
        default).

        Values can span multiple lines, as long as they are indented deeper
        than the first line of the value. Depending on the parser's mode, blank
        lines may be treated as parts of multiline values or ignored.

        Configuration files may include comments, prefixed by specific
        characters (`#' and `;' by default). Comments may appear on their own
        in an otherwise empty line or may be entered in lines holding values or
        section names. Please note that comments get stripped off when reading configuration files.
        Nr   rV   )startc                 S   s   i | ]
}|d qS )r"   )r   rr   r"   r"   r#   
<dictcomp>  r   z)RawConfigParser._read.<locals>.<dictcomp>r  r   headerr:   virJ   )$r   	enumeratesysmaxsizer   r   ra   isspaceminr   strip
startswithr   r3   NONSPACECREsearchr  SECTCREri   rk   r   r   r   r   r   r   r   r   r   r   r   _handle_errorrj   rstripr   _join_multiline_values)r    r   fpnamer   ZcursectZsectnameZoptnamer9   Zindent_levelr   rK   Zcomment_startZinline_prefixesZnext_prefixesprefixindexrJ   Zfirst_nonspaceZcur_indent_levelmor	  Zoptvalr"   r"   r#   r     s     











zRawConfigParser._readc                 C   sr   | j | jf}t|f| j }|D ]H\}}| D ]6\}}t|trTd|	 }| j
| |||||< q4q$d S )Nr   )r   r   r  r  r   r   r   r   r7   r  r   rS   )r    rO   Zall_sectionsr+   r   r   valr"   r"   r#   r  ^  s    
z&RawConfigParser._join_multiline_valuesc                 C   s&   |  D ]\}}|| j| |< qdS )zTRead the defaults passed in the initializer.
        Note: values can be non-string.N)r   r   rj   )r    rO   r   rJ   r"   r"   r#   r   j  s    zRawConfigParser._read_defaultsc                 C   s    |st |}||t| |S r   )r   r3   r2   )r    excr  r9   rK   r"   r"   r#   r  p  s    zRawConfigParser._handle_errorc                 C   s   i }z| j | }W n& ty8   || jkr4t|dY n0 i }|rr| D ]&\}}|durbt|}||| |< qJt||| jS )zCreate a sequence of lookups with 'vars' taking priority over
        the 'section' which takes priority over the DEFAULTSECT.

        N)	r   rm   r   r   r   r   rj   	_ChainMapr   )r    r+   r   ZsectiondictZvardictr   rJ   r"   r"   r#   r   v  s    
zRawConfigParser._unify_valuesc                 C   s(   |  | jvrtd| | j|   S )zJReturn a boolean value translating from other types if necessary.
        zNot a boolean: %s)r   BOOLEAN_STATESr>   rI   r"   r"   r#   r     s    z#RawConfigParser._convert_to_booleanr   )r+   r:   rJ   c                C   sD   t |tstdt |ts$td| jr.|r@t |ts@tddS )a  Raises a TypeError for non-string values.

        The only legal non-string value if we allow valueless
        options is None, so we need to check if the value is a
        string if:
        - we do not allow valueless options, or
        - we allow valueless options but the value is not None

        For compatibility reasons this method is not used in classic set()
        for RawConfigParsers. It is invoked in every case for mapping protocol
        access and in ConfigParser.set().
        zsection names must be stringszoption keys must be stringszoption values must be stringsN)r   r   	TypeErrorr   r    r+   r:   rJ   r"   r"   r#   _validate_value_types  s    



z%RawConfigParser._validate_value_typesc                 C   s   | j S r   )r   r$   r"   r"   r#   r     s    zRawConfigParser.converters)N)N)r   )r   )N)N)T)?r&   r'   r(   r)   Z
_SECT_TMPLr   r   r   r   rx   ry   r   r  r4   r   r   r  r  _default_dictr   r   r   rO   r   r   r   r   r   r   r   r   r   rh   r   r   r   r   r   r   r   rj   r   r   r   r   r   r   r   r   r   r   r  r  r   r  r   r  r   r   r!  rL   r   __classcell__r"   r"   r   r#   r   0  s   

(	




	%

zr   c                       s<   e Zd ZdZe Zd	 fdd	Z fddZdd Z  Z	S )
r   z(ConfigParser implementing interpolation.Nc                    s"   | j ||d t ||| dS )zmSet an option.  Extends RawConfigParser.set by validating type and
        interpolation syntax on the value.r:   rJ   N)r!  r   r   r   r   r"   r#   r     s    zConfigParser.setc                    s   | j |d t | dS )zCreate a new section in the configuration.  Extends
        RawConfigParser.add_section by validating if the section name is
        a string.)r+   N)r!  r   r   r-   r   r"   r#   r     s    zConfigParser.add_sectionc                 C   s6   z(| j }t | _ | | j|i W || _ n|| _ 0 dS )zReads the defaults passed in the initializer, implicitly converting
        values to strings like the rest of the API.

        Does not perform interpolation for backwards compatibility.
        N)r   r   r   r   )r    rO   Zhold_interpolationr"   r"   r#   r     s
    zConfigParser._read_defaults)N)
r&   r'   r(   r)   r   r   r   r   r   r#  r"   r"   r   r#   r     s
   r   c                       s    e Zd ZdZ fddZ  ZS )r   z8ConfigParser alias for backwards compatibility purposes.c                    s&   t  j|i | tjdtdd d S )NzThe SafeConfigParser class has been renamed to ConfigParser in Python 3.2. This alias will be removed in future versions. Use ConfigParser directly instead.rB   rC   )r   r   rF   rG   rH   )r    r,   r   r   r"   r#   r     s
    zSafeConfigParser.__init__)r&   r'   r(   r)   r   r#  r"   r"   r   r#   r     s   r   c                   @   s   e Zd ZdZdd Zdd Zdd Zdd	 Zd
d Zdd Z	dd Z
dd Zdd Zedd Zedd ZdddddddZdS )r   z+A proxy for a single section from a parser.c                 C   sF   || _ || _|jD ].}d| }tj| jt||d}t| || qdS )z@Creates a view on a section of the specified `name` in `parser`.rh   _implN)_parser_namer   r   r   rh   getattrsetattr)r    rN   r   r   r   getterr"   r"   r#   r     s    
zSectionProxy.__init__c                 C   s   d | jS )Nz<Section: {}>)r4   r(  r$   r"   r"   r#   r%     s    zSectionProxy.__repr__c                 C   s(   | j | j|st|| j | j|S r   )r'  r   r(  rm   rh   r   r"   r"   r#   r     s    zSectionProxy.__getitem__c                 C   s"   | j j||d | j | j||S )Nr$  )r'  r!  r   r(  r   r"   r"   r#   r     s    zSectionProxy.__setitem__c                 C   s,   | j | j|r | j | j|s(t|d S r   )r'  r   r(  r   rm   r   r"   r"   r#   r     s    zSectionProxy.__delitem__c                 C   s   | j | j|S r   )r'  r   r(  r   r"   r"   r#   r     s    zSectionProxy.__contains__c                 C   s   t |  S r   )r~   _optionsr$   r"   r"   r#   r    s    zSectionProxy.__len__c                 C   s   |    S r   )r,  r  r$   r"   r"   r#   r    s    zSectionProxy.__iter__c                 C   s*   | j | jjkr| j| j S | j S d S r   )r(  r'  r   r   rO   r$   r"   r"   r#   r,    s    zSectionProxy._optionsc                 C   s   | j S r   )r'  r$   r"   r"   r#   rN     s    zSectionProxy.parserc                 C   s   | j S r   )r(  r$   r"   r"   r#   r   	  s    zSectionProxy.nameNF)rd   r   r&  c                K   s(   |s| j j}|| j|f|||d|S )zGet an option value.

        Unless `fallback` is provided, `None` will be returned if the option
        is not found.

        r   )r'  rh   r(  )r    r:   re   rd   r   r&  r   r"   r"   r#   rh     s    
zSectionProxy.get)N)r&   r'   r(   r)   r   r%   r   r   r   r   r  r  r,  rL   rN   r   rh   r"   r"   r"   r#   r     s"   	

r   c                   @   sJ   e Zd ZdZedZdd Zdd Zdd Z	d	d
 Z
dd Zdd ZdS )r   a/  Enables reuse of get*() methods between the parser and section proxies.

    If a parser class implements a getter directly, the value for the given
    key will be ``None``. The presence of the converter name here enables
    section proxies to find and use the implementation on the parser class.
    z^get(?P<name>.+)$c                 C   sR   || _ i | _t| j D ]6}| j|}|rtt| j |s<qd | j|d< qd S )Nr   )r'  _datadir	GETTERCREri   callabler)  rk   )r    rN   r+  rt   r"   r"   r#   r   (  s    zConverterMapping.__init__c                 C   s
   | j | S r   )r-  r   r"   r"   r#   r   1  s    zConverterMapping.__getitem__c              	   C   s   zd| }W n& t y2   td|t|Y n0 |dkrDtd|| j|< tj| jj|d}||_	t
| j|| | j D ] }tj|j|d}t
||| q~d S )Nrh   zIncompatible key: {} (type: {})z)Incompatible key: cannot use "" as a name)r   r%  )r  r>   r4   typer-  r   r   r'  r   Z	converterr*  valuesrh   )r    r   rJ   kfuncproxyr+  r"   r"   r#   r   4  s    
zConverterMapping.__setitem__c              	   C   sz   zd|p
d  }W n t y*   t|Y n0 | j|= t| jf| j D ]*}zt|| W qJ tyr   Y qJY qJ0 qJd S )Nrh   )	r  rm   r-  r  r  r'  r2  delattrr   )r    r   r3  instr"   r"   r#   r   D  s    zConverterMapping.__delitem__c                 C   s
   t | jS r   )iterr-  r$   r"   r"   r#   r  R  s    zConverterMapping.__iter__c                 C   s
   t | jS r   )r~   r-  r$   r"   r"   r#   r  U  s    zConverterMapping.__len__N)r&   r'   r(   r)   rx   ry   r/  r   r   r   r   r  r  r"   r"   r"   r#   r     s   
	r   ))r)   collections.abcr   collectionsr   r  r   r   r  r   rx   r  rF   __all__r   r"  r   r   r   r   r   r   r   r   r   r
   r   r	   r   r   objectr   r   r   r   r   r   r   r   r   r   r"   r"   r"   r#   <module>   sP    		
+HJ&       F                                                                                                                                                                                                                     a
    !a0`                     @   sZ  d Z ddlZddlZddlZddlmZ ddlmZ ddlm	Z	m
Z
 g dZG dd dejZG d	d
 d
ejZG dd deZG dd dZG dd deeeZG dd deeZdd Zdd ZG dd deZG dd deZG dd deZG dd deZG dd  d eZG d!d" d"ZG d#d$ d$eeZG d%d& d&eeZG d'd( d(eZdS ))z4Utilities for with-statement contexts.  See PEP 343.    N)dequewraps)
MethodTypeGenericAlias)asynccontextmanagercontextmanagerclosingnullcontextAbstractContextManagerAbstractAsyncContextManagerAsyncExitStackContextDecorator	ExitStackredirect_stdoutredirect_stderrsuppressc                   @   s:   e Zd ZdZeeZdd Zej	dd Z
edd ZdS )	r   z,An abstract base class for context managers.c                 C   s   | S z0Return `self` upon entering the runtime context. selfr   r    /usr/lib/python3.9/contextlib.py	__enter__   s    z AbstractContextManager.__enter__c                 C   s   dS z9Raise any exception triggered within the runtime context.Nr   r   exc_type	exc_value	tracebackr   r   r   __exit__   s    zAbstractContextManager.__exit__c                 C   s   | t u rt|ddS tS )Nr   r   )r   _collections_abc_check_methodsNotImplementedclsCr   r   r   __subclasshook__   s    z'AbstractContextManager.__subclasshook__N)__name__
__module____qualname____doc__classmethodr   __class_getitem__r   abcabstractmethodr   r%   r   r   r   r   r      s   
r   c                   @   s:   e Zd ZdZeeZdd Zej	dd Z
edd ZdS )	r   z9An abstract base class for asynchronous context managers.c                    s   | S r   r   r   r   r   r   
__aenter__+   s    z&AbstractAsyncContextManager.__aenter__c                    s   dS r   r   r   r   r   r   	__aexit__/   s    z%AbstractAsyncContextManager.__aexit__c                 C   s   | t u rt|ddS tS )Nr.   r/   )r   r   r    r!   r"   r   r   r   r%   4   s
    z,AbstractAsyncContextManager.__subclasshook__N)r&   r'   r(   r)   r*   r   r+   r.   r,   r-   r/   r%   r   r   r   r   r   %   s   
r   c                   @   s    e Zd ZdZdd Zdd ZdS )r   zJA base class or mixin that enables context managers to work as decorators.c                 C   s   | S )a6  Return a recreated instance of self.

        Allows an otherwise one-shot context manager like
        _GeneratorContextManager to support use as
        a decorator via implicit recreation.

        This is a private interface just for _GeneratorContextManager.
        See issue #11647 for details.
        r   r   r   r   r   _recreate_cm?   s    
zContextDecorator._recreate_cmc                    s   t   fdd}|S )Nc                     s:       | i |W  d    S 1 s,0    Y  d S N)r0   argskwdsfuncr   r   r   innerL   s    
z(ContextDecorator.__call__.<locals>.innerr   )r   r6   r7   r   r5   r   __call__K   s    zContextDecorator.__call__N)r&   r'   r(   r)   r0   r8   r   r   r   r   r   <   s   r   c                   @   s    e Zd ZdZdd Zdd ZdS )_GeneratorContextManagerBasezBShared functionality for @contextmanager and @asynccontextmanager.c                 C   sN   ||i || _ |||  | _| _| _t|dd }|d u rDt| j}|| _d S )Nr)   )genr6   r3   r4   getattrtyper)   )r   r6   r3   r4   docr   r   r   __init__V   s    
z%_GeneratorContextManagerBase.__init__c                 C   s   |  | j| j| jS r1   )	__class__r6   r3   r4   r   r   r   r   r0   d   s    z)_GeneratorContextManagerBase._recreate_cmN)r&   r'   r(   r)   r>   r0   r   r   r   r   r9   S   s   r9   c                   @   s    e Zd ZdZdd Zdd ZdS )_GeneratorContextManagerz%Helper for @contextmanager decorator.c                 C   s:   | ` | `| `zt| jW S  ty4   tdd Y n0 d S Nzgenerator didn't yield)r3   r4   r6   nextr:   StopIterationRuntimeErrorr   r   r   r   r   r   s
    z"_GeneratorContextManager.__enter__c              
   C   s   |d u r6zt | j W n ty*   Y dS 0 tdn|d u rD| }z| j||| W n ty } z||uW  Y d }~S d }~0  ty } zF||u rW Y d }~dS t|tr|j|u rW Y d }~dS  W Y d }~n<d }~0  ty } z||u r W Y d }~dS d }~0 0 tdd S )NFgenerator didn't stopz#generator didn't stop after throw())rB   r:   rC   rD   throw
isinstance	__cause__BaseExceptionr   typvaluer   excr   r   r   r   {   s4    

z!_GeneratorContextManager.__exit__N)r&   r'   r(   r)   r   r   r   r   r   r   r@   k   s   	r@   c                   @   s    e Zd ZdZdd Zdd ZdS )_AsyncGeneratorContextManagerz*Helper for @asynccontextmanager decorator.c                    s@   | ` | `| `z| j I d H W S  ty:   tdd Y n0 d S rA   )r3   r4   r6   r:   	__anext__StopAsyncIterationrD   r   r   r   r   r.      s
    z(_AsyncGeneratorContextManager.__aenter__c              
      s4  |d u r>z| j  I d H  W n ty0   Y dS 0 td n|d u rL| }z| j |||I d H  W n ty } z||uW  Y d }~S d }~0  t y } zJ||u rW Y d }~dS t|ttfr|j|u rW Y d }~dS  W Y d }~n<d }~0  ty& } z||ur W Y d }~dS d }~0 0 tdd S )NFrE   z$generator didn't stop after athrow())	r:   rO   rP   rD   athrowrG   rC   rH   rI   rJ   r   r   r   r/      s4    
z'_AsyncGeneratorContextManager.__aexit__N)r&   r'   r(   r)   r.   r/   r   r   r   r   rN      s   	rN   c                    s   t   fdd}|S )a  @contextmanager decorator.

    Typical usage:

        @contextmanager
        def some_generator(<arguments>):
            <setup>
            try:
                yield <value>
            finally:
                <cleanup>

    This makes this:

        with some_generator(<arguments>) as <variable>:
            <body>

    equivalent to this:

        <setup>
        try:
            <variable> = <value>
            <body>
        finally:
            <cleanup>
    c                     s   t  | |S r1   )r@   r2   r6   r   r   helper  s    zcontextmanager.<locals>.helperr   r6   rS   r   rR   r   r      s    r   c                    s   t   fdd}|S )a  @asynccontextmanager decorator.

    Typical usage:

        @asynccontextmanager
        async def some_async_generator(<arguments>):
            <setup>
            try:
                yield <value>
            finally:
                <cleanup>

    This makes this:

        async with some_async_generator(<arguments>) as <variable>:
            <body>

    equivalent to this:

        <setup>
        try:
            <variable> = <value>
            <body>
        finally:
            <cleanup>
    c                     s   t  | |S r1   )rN   r2   rR   r   r   rS   &  s    z#asynccontextmanager.<locals>.helperr   rT   r   rR   r   r     s    r   c                   @   s(   e Zd ZdZdd Zdd Zdd ZdS )	r	   a2  Context to automatically close something at the end of a block.

    Code like this:

        with closing(<module>.open(<arguments>)) as f:
            <block>

    is equivalent to this:

        f = <module>.open(<arguments>)
        try:
            <block>
        finally:
            f.close()

    c                 C   s
   || _ d S r1   thing)r   rV   r   r   r   r>   =  s    zclosing.__init__c                 C   s   | j S r1   rU   r   r   r   r   r   ?  s    zclosing.__enter__c                 G   s   | j   d S r1   )rV   close)r   exc_infor   r   r   r   A  s    zclosing.__exit__Nr&   r'   r(   r)   r>   r   r   r   r   r   r   r	   ,  s   r	   c                   @   s(   e Zd ZdZdd Zdd Zdd ZdS )_RedirectStreamNc                 C   s   || _ g | _d S r1   )_new_target_old_targets)r   
new_targetr   r   r   r>   I  s    z_RedirectStream.__init__c                 C   s*   | j tt| j tt| j| j | jS r1   )r\   appendr;   sys_streamsetattrr[   r   r   r   r   r   N  s    z_RedirectStream.__enter__c                 C   s   t t| j| j  d S r1   )ra   r_   r`   r\   popr   exctypeexcinstexctbr   r   r   r   S  s    z_RedirectStream.__exit__)r&   r'   r(   r`   r>   r   r   r   r   r   r   rZ   E  s   rZ   c                   @   s   e Zd ZdZdZdS )r   aA  Context manager for temporarily redirecting stdout to another file.

        # How to send help() to stderr
        with redirect_stdout(sys.stderr):
            help(dir)

        # How to write help() to a file
        with open('help.txt', 'w') as f:
            with redirect_stdout(f):
                help(pow)
    stdoutNr&   r'   r(   r)   r`   r   r   r   r   r   W  s   r   c                   @   s   e Zd ZdZdZdS )r   zCContext manager for temporarily redirecting stderr to another file.stderrNrh   r   r   r   r   r   g  s   r   c                   @   s(   e Zd ZdZdd Zdd Zdd ZdS )	r   a?  Context manager to suppress specified exceptions

    After the exception is suppressed, execution proceeds with the next
    statement following the with statement.

         with suppress(FileNotFoundError):
             os.remove(somefile)
         # Execution still resumes here if the file was already removed
    c                 G   s
   || _ d S r1   )_exceptions)r   
exceptionsr   r   r   r>   x  s    zsuppress.__init__c                 C   s   d S r1   r   r   r   r   r   r   {  s    zsuppress.__enter__c                 C   s   |d uot || jS r1   )
issubclassrj   rc   r   r   r   r   ~  s    
zsuppress.__exit__NrY   r   r   r   r   r   m  s   
r   c                   @   sb   e Zd ZdZedd Zedd Zdd Zdd	 Zd
d Z	dd Z
dd Zdd ZdddZdS )_BaseExitStackz.A base class for ExitStack and AsyncExitStack.c                 C   s
   t || S r1   r   cmcm_exitr   r   r   _create_exit_wrapper  s    z#_BaseExitStack._create_exit_wrapperc                   s    fdd}|S )Nc                    s    i  d S r1   r   r   rM   tbr3   callbackr4   r   r   _exit_wrapper  s    z8_BaseExitStack._create_cb_wrapper.<locals>._exit_wrapperr   rv   r3   r4   rw   r   ru   r   _create_cb_wrapper  s    z!_BaseExitStack._create_cb_wrapperc                 C   s   t  | _d S r1   )r   _exit_callbacksr   r   r   r   r>     s    z_BaseExitStack.__init__c                 C   s   t |  }| j|_t | _|S )z@Preserve the context stack by transferring it to a new instance.)r<   rz   r   )r   	new_stackr   r   r   pop_all  s    
z_BaseExitStack.pop_allc                 C   s@   t |}z
|j}W n ty.   | | Y n0 | || |S )a  Registers a callback with the standard __exit__ method signature.

        Can suppress exceptions the same way __exit__ method can.
        Also accepts any object with an __exit__ method (registering a call
        to the method instead of the object itself).
        )r<   r   AttributeError_push_exit_callback_push_cm_exitr   exit_cb_typeexit_methodr   r   r   push  s    	
z_BaseExitStack.pushc                 C   s(   t |}|j}||}| || |S )zEnters the supplied context manager.

        If successful, also pushes its __eg  g  g  g  g  g  g  g                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  xit__ method as a callback and
        returns the result of the __enter__ method.
        )r<   r   r   r   r   rp   _cm_type_exitresultr   r   r   enter_context  s
    
z_BaseExitStack.enter_contextc                O   s,   | j |g|R i |}||_| | |S )z\Registers an arbitrary callback and arguments.

        Cannot suppress exceptions.
        )ry   __wrapped__r~   r   rv   r3   r4   rw   r   r   r   rv     s    
z_BaseExitStack.callbackc                 C   s   |  ||}| |d dS )z;Helper to correctly register callbacks to __exit__ methods.TN)rr   r~   r   rp   rq   rw   r   r   r   r     s    z_BaseExitStack._push_cm_exitTc                 C   s   | j ||f d S r1   )rz   r^   )r   rv   is_syncr   r   r   r~     s    z"_BaseExitStack._push_exit_callbackN)T)r&   r'   r(   r)   staticmethodrr   ry   r>   r|   r   r   rv   r   r~   r   r   r   r   rm     s   

rm   c                   @   s(   e Zd ZdZdd Zdd Zdd ZdS )	r   a  Context manager for dynamic management of a stack of exit callbacks.

    For example:
        with ExitStack() as stack:
            files = [stack.enter_context(open(fname)) for fname in filenames]
            # All opened files will automatically be closed at the end of
            # the with statement, even if attempts to open files later
            # in the list raise an exception.
    c                 C   s   | S r1   r   r   r   r   r   r     s    zExitStack.__enter__c           
         s   |d d u}t  d   fdd}d}d}| jr| j \}}|sHJ z|| r^d}d}d}W q,   t  }||d |d  d}|}Y q,0 q,|rz|d j}	|d W n ty   |	|d _ Y n0 |o|S )Nr      c                    s4   | j }||u rd S |d u s*| u r$q*|} q || _ d S r1   __context__new_excold_excexc_context	frame_excr   r   _fix_exception_context  s    z2ExitStack.__exit__.<locals>._fix_exception_contextFTNNNr_   rX   rz   rb   r   rI   )
r   exc_detailsreceived_excr   suppressed_excpending_raiser   cbnew_exc_details	fixed_ctxr   r   r   r     s4    

zExitStack.__exit__c                 C   s   |  ddd dS z%Immediately unwind the context stack.N)r   r   r   r   r   rW     s    zExitStack.closeN)r&   r'   r(   r)   r   r   rW   r   r   r   r   r     s   
1r   c                   @   s`   e Zd ZdZedd Zedd Zdd Zdd	 Zd
d Z	dd Z
dd Zdd Zdd ZdS )r   a  Async context manager for dynamic management of a stack of exit
    callbacks.

    For example:
        async with AsyncExitStack() as stack:
            connections = [await stack.enter_async_context(get_connection())
                for i in range(5)]
            # All opened connections will automatically be released at the
            # end of the async with statement, even if attempts to open a
            # connection later in the list raise an exception.
    c                 C   s
   t || S r1   rn   ro   r   r   r   _create_async_exit_wrapper-  s    z)AsyncExitStack._create_async_exit_wrapperc                   s    fdd}|S )Nc                    s    i I d H  d S r1   r   rs   ru   r   r   rw   3  s    z>AsyncExitStack._create_async_cb_wrapper.<locals>._exit_wrapperr   rx   r   ru   r   _create_async_cb_wrapper1  s    z'AsyncExitStack._create_async_cb_wrapperc                    s.   t |}|j}||I dH }| || |S )zEnters the supplied async context manager.

        If successful, also pushes its __aexit__ method as a callback and
        returns the result of the __aenter__ method.
        N)r<   r/   r.   _push_async_cm_exitr   r   r   r   enter_async_context7  s
    z"AsyncExitStack.enter_async_contextc                 C   sB   t |}z
|j}W n ty0   | |d Y n0 | || |S )a#  Registers a coroutine function with the standard __aexit__ method
        signature.

        Can suppress exceptions the same way __aexit__ method can.
        Also accepts any object with an __aexit__ method (registering a call
        to the method instead of the object itself).
        F)r<   r/   r}   r~   r   r   r   r   r   push_async_exitC  s    
zAsyncExitStack.push_async_exitc                O   s.   | j |g|R i |}||_| |d |S )zfRegisters an arbitrary coroutine function and arguments.

        Cannot suppress exceptions.
        F)r   r   r~   r   r   r   r   push_async_callbackU  s    z"AsyncExitStack.push_async_callbackc                    s   |  dddI dH  dS r   )r/   r   r   r   r   acloseb  s    zAsyncExitStack.aclosec                 C   s   |  ||}| |d dS )zLHelper to correctly register coroutine function to __aexit__
        method.FN)r   r~   r   r   r   r   r   f  s    z"AsyncExitStack._push_async_cm_exitc                    s   | S r1   r   r   r   r   r   r.   l  s    zAsyncExitStack.__aenter__c                    s   |d d u}t  d   fdd}d}d}| jr| j \}}z0|rP|| }n|| I d H }|rnd}d}d}W q,   t  }	||	d |d  d}|	}Y q,0 q,|rz|d j}
|d W n ty   |
|d _ Y n0 |o|S )Nr   r   c                    s4   | j }||u rd S |d u s*| u r$q*|} q || _ d S r1   r   r   r   r   r   r   u  s    z8AsyncExitStack.__aexit__.<locals>._fix_exception_contextFTr   r   )r   r   r   r   r   r   r   r   cb_suppressr   r   r   r   r   r/   o  s8    


zAsyncExitStack.__aexit__N)r&   r'   r(   r)   r   r   r   r   r   r   r   r   r.   r/   r   r   r   r   r      s   

r   c                   @   s*   e Zd ZdZd	ddZdd Zdd ZdS )
r
   aO  Context manager that does no additional processing.

    Used as a stand-in for a normal context manager, when a particular
    block of code is only sometimes used with a normal context manager:

    cm = optional_cm if condition else nullcontext()
    with cm:
        # Perform operation, using optional_cm if condition is True
    Nc                 C   s
   || _ d S r1   enter_result)r   r   r   r   r   r>     s    znullcontext.__init__c                 C   s   | j S r1   r   r   r   r   r   r     s    znullcontext.__enter__c                 G   s   d S r1   r   )r   excinfor   r   r   r     s    znullcontext.__exit__)NrY   r   r   r   r   r
     s   

r
   )r)   r,   r_   r   collectionsr   	functoolsr   typesr   r   __all__ABCr   r   objectr   r9   r@   rN   r   r   r	   rZ   r   r   r   rm   r   r   r
   r   r   r   r   <module>   s>   
A>!!PE                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    contextvars.pyc    copy.pyc   copyreg.pyc    	crypt.pyc      csv.pyc    ctypes     dataclasses.pyc    datetime.pyc   dbm    decimal.pyc    difflib.pyc    dis.pyc    	distutils   ;   doctest.pyc <   email   \   	encodings      	ensurepip      enum.pyc   filecmp.pyc    fileinput.pyc      fnmatch.pyc    formatter.pyc      fractions.pyc      
ftplib.pyc     functools.pyc      genericpath.pyc    
getopt.pyc     getpass.pyc    gettext.pyc    glob.pyc   graphlib.pyc   gzip.pyc   hashlib.pyc    	heapq.pyc      hmac.pyc   html   http   imaplib.pyc    
imghdr.pyc     imp.pyc    	importlib      inspect.pyc 	   io.pyc  
   ipaddress.pyc      json   keyword.pyc    lib-dynload I   linecache.pyc   J   
locale.pyc  K   logging O   lzma.pycP   mailbox.pyc Q   mailcap.pyc    venva
    !a                      @   s    d dl mZmZmZmZ dZdS )    )Context
ContextVarTokencopy_contextN)Z_contextvarsr   r   r   r   __all__ r   r   !/usr/lib/python3.9/contextvars.py<module>   s                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a
    !a!                     @   sP  d Z ddlZddlZddlmZ G dd deZeZzddlm	Z	 W n e
yZ   dZ	Y n0 g dZdd	 Zi  ZZd
d Zedeeeeeeeeeeeeejeeeeejej fD ]Z!eee!< qe"eddZ!e!dureee!< e#jee#< e$jee$< e%jee%< e&jee&< e	dure	jee	< [[!dg fddZ'i  Z(Zdd Z)e)eed< e)eee< e)eee< e)ee< e)ee< e)ee< e)ee< e)ee< e)ee< e)eej*< e)ee< e)eej< e)eej< e)eej < e)ee< e'fddZ+e+ee#< e'fddZ,e,ee< e'fddZ-e-ee$< e	dure-ee	< dd Z.e.eej/< [dd Z0ddde'fddZ1[[[	dS )a  Generic (shallow and deep) copying operations.

Interface summary:

        import copy

        x = copy.copy(y)        # make a shallow copy of y
        x = copy.deepcopy(y)    # make a deep copy of y

For module specific errors, copy.Error is raised.

The difference between shallow and deep copying is only relevant for
compound objects (objects that contain other objects, like lists or
class instances).

- A shallow copy constructs a new compound object and then (to the
  extent possible) inserts *the same objects* into it that the
  original contains.

- A deep copy constructs a new compound object and then, recursively,
  inserts *copies* into it of the objects found in the original.

Two problems often exist with deep copy operations that don't exist
with shallow copy operations:

 a) recursive objects (compound objects that, directly or indirectly,
    contain a reference to themselves) may cause a recursive loop

 b) because deep copy copies *everything* it may copy too much, e.g.
    administrative data structures that should be shared even between
    copies

Python's deep copy operation avoids these problems by:

 a) keeping a table of objects already copied during the current
    copying pass

 b) letting user-defined classes override the copying operation or the
    set of components copied

This version does not copy types like module, class, function, method,
nor stack trace, stack frame, nor file, socket, window, nor array, nor
any similar types.

Classes can use the same interfaces to control copying that they use
to control pickling: they can define methods called __getinitargs__(),
__getstate__() and __setstate__().  See the documentation for module
"pickle" for information on these methods.
    N)dispatch_tablec                   @   s   e Zd ZdS )ErrorN)__name__
__module____qualname__ r   r   /usr/lib/python3.9/copy.pyr   7   s   r   )PyStringMap)r   copydeepcopyc                 C   s   t | }t|}|r|| S t|t r0t| S t|dd}|durL|| S t|}|durh|| }nBt| dd}|dur|d}n$t| dd}|r| }ntd| t|t	r| S t
| dg|R  S )zlShallow copy operation on arbitrary Python objects.

    See the module's __doc__ string for more info.
    __copy__N__reduce_ex__   
__reduce__z%un(shallow)copyable object of type %s)type_copy_dispatchget
issubclass_copy_immutablegetattrr   r   
isinstancestr_reconstruct)xclscopierreductorrvr   r   r   r
   B   s,    





r
   c                 C   s   | S Nr   )r   r   r   r   r   k   s    r   CodeTypec           	      C   s"  |du ri }t | }|||}||ur,|S t| }t|}|durR|| |}nt|trht| |}nt| dd}|dur||}n|t|}|r|| }nBt| dd}|dur|d}n$t| dd}|r| }ntd| t	|t
r| }nt| |g|R  }|| ur|||< t| | |S )ziDeep copy operation on arbitrary Python objects.

    See the module's __doc__ string for more info.
    N__deepcopy__r   r   r   z"un(deep)copyable object of type %s)idr   r   _deepcopy_dispatchr   _deepcopy_atomicr   r   r   r   r   r   _keep_alive)	r   memoZ_nildyr   r   r   r   r   r   r   r      sD    








r   c                 C   s   | S r   r   r   r%   r   r   r   r#      s    r#   c                 C   s2   g }||t | < |j}| D ]}|||| q|S r   )r!   append)r   r%   r   r'   r)   ar   r   r   _deepcopy_list   s    r+   c                    sf    fdd| D }zt |  W S  ty4   Y n0 t| |D ]\}}||ur@t|} qbq@| }|S )Nc                    s   g | ]} |qS r   r   ).0r*   r   r%   r   r   
<listcomp>       z#_deepcopy_tuple.<locals>.<listcomp>)r!   KeyErrorziptuple)r   r%   r   r'   kjr   r-   r   _deepcopy_tuple   s    r5   c                 C   s:   i }||t | < |  D ]\}}|||||||< q|S r   )r!   items)r   r%   r   r'   keyvaluer   r   r   _deepcopy_dict   s
    r9   c                 C   s   t | | jt| j|S r   )r   __func__r   __self__r(   r   r   r   _deepcopy_method   s    r<   c                 C   s<   z|t | |  W n  ty6   | g|t |< Y n0 dS )aM  Keeps a reference to the object x in the memo.

    Because we remember objects by their id, we have
    to assure that possibly temporary objects are kept
    alive by referencing them.
    We store a reference at the id of the memo, which should
    normally not be used unless someone tries to deepcopy
    the memo itself...
    N)r!   r)   r0   r(   r   r   r   r$      s    
r$   c                    sb  d u}|r$|r$ fdd|D }|| }	|r<|	t | < |d ur|rR |}t|	drh|	| n^t|trt|dkr|\}}
nd }
|d ur|	j| |
d ur|
 D ]\}}t	|	|| q|d ur|r|D ]} |}|	
| qn|D ]}|	
| q|d ur^|rF|D ]&\}} |} |}||	|< qn|D ]\}}||	|< qJ|	S )Nc                 3   s   | ]} |V  qd S r   r   )r,   argr-   r   r   	<genexpr>  r/   z_reconstruct.<locals>.<genexpr>__setstate__   )r!   hasattrr?   r   r2   len__dict__updater6   setattrr)   )r   r%   funcargsstateZlistiterZdictiterr   Zdeepr'   Z	slotstater7   r8   itemr   r-   r   r     sF    







r   )2__doc__typesweakrefcopyregr   	Exceptionr   errorZorg.python.corer	   ImportError__all__r
   r   r&   r   r   intfloatboolcomplexr   r2   bytes	frozensetrangeslicepropertyBuiltinFunctionTypeEllipsisNotImplementedFunctionTypereftr   listdictset	bytearrayr   r"   r#   r   r+   r5   r9   r<   
MethodTyper$   r   r   r   r   r   <module>   s~   2
'






4






-                                                                                                                                                                                                    a
    !aj                     @   s   d Z g dZi ZdddZdd Zze W n ey<   Y n0 dd Zeeee d	d
 ZdZ	e
ejZdd Zdd Zdd Zdd Zi Zi Zi Zdd Zdd Zdd ZdS )zHelper to provide extensibility for pickle.

This is only useful to add pickle support for extension types defined in
C, not for instances of user-defined classes.
)pickleconstructoradd_extensionremove_extensionclear_extension_cacheNc                 C   s,   t |std|t| < |d ur(t| d S )Nz$reduction functions must be callable)callable	TypeErrordispatch_tabler   )ob_typepickle_functionconstructor_ob r   /usr/lib/python3.9/copyreg.pyr      s
    r   c                 C   s   t | stdd S )Nzconstructors must be callable)r   r   )objectr   r   r   r      s    r   c                 C   s   t | j| jffS N)complexrealimag)cr   r   r   pickle_complex"   s    r   c                 C   s<   |t u rt | }n$|| |}|jt jkr8||| |S r   )r   __new____init__)clsbasestateobjr   r   r   _reconstructor)   s    r   i   c           	      C   s  |dk sJ | j }|jD ]:}t|dr4|jt@ s4 qX|j}t|tr|j|u r qXqt	}|t	u rfd }n"||u rt
d|jd|| }|||f}z
| j}W nX ty   t| dd rt
d|jd| d z
| j}W n ty   d }Y n0 Y n0 | }|rt||fS t|fS d S )N   	__flags__zcannot pickle z object	__slots__zf object: a class that defines __slots__ without defining __getstate__ cannot be pickled with protocol )	__class____mro__hasattrr   	_HEAPTYPEr   
isinstance	_new_type__self__r   r   __name____getstate__AttributeErrorgetattr__dict__r   )	selfprotor   r   newr   argsgetstatedictr   r   r   
_reduce_ex7   s@    




r1   c                 G   s   | j | g|R  S r   r   )r   r.   r   r   r   
__newobj__^   s    r3   c                 C   s   | j | g|R i |S )zUsed by pickle protocol 4, instead of __newobj__ to allow classes with
    keyword-only arguments to be pickled correctly.
    r2   )r   r.   kwargsr   r   r   __newobj_ex__a   s    r5   c                 C   s   | j d}|dur|S g }t| ds(n| jD ]}d|j v r.|j d }t|trV|f}|D ]^}|dv rjqZqZ|dr|ds|j	d}|r|
d||f  q|
| qZ|
| qZq.z
|| _W n   Y n0 |S )a  Return a list of slot names for a given class.

    This needs to find slots defined by the class and its bases, so we
    can't simply return the __slots__ attribute.  We must walk down
    the Method Resolution Order and concatenate the __slots__ of each
    class found there.  (This assumes classes don't modify their
    __slots__ attribute to misrepresent their slots after the class is
    defined.)
    __slotnames__Nr   )r*   __weakref_____z_%s%s)r*   getr!   r    r#   str
startswithendswithr&   lstripappendr6   )r   namesr   slotsnamestrippedr   r   r   
_slotnamesg   s2    





rD   c                 C   s   t |}d|  krdks&n td| |f}t||krNt||krNdS |tv rjtd|t| f |tv rtd|t| f |t|< |t|< dS )zRegister an extension code.   izcode out of rangeNz)key %s is already registered with code %sz$code %s is already in use for key %s)int
ValueError_extension_registryr:   _inverted_registrymodulerB   codekeyr   r   r   r      s$    

r   c                 C   sR   | |f}t ||ks$t||kr4td||f t |= t|= |tv rNt|= dS )z0Unregister an extension code.  For testing only.z%key %s is not registered with code %sN)rH   r:   rI   rG   _extension_cacherJ   r   r   r   r      s    r   c                   C   s   t   d S r   )rN   clearr   r   r   r   r      s    r   )N)__doc____all__r   r   r   r   	NameErrorr   r   r"   typerF   r   r$   r1   r3   r5   rD   rH   rI   rN   r   r   r   r   r   r   r   <module>   s.   

	
'<                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    a
    !aY                     @   s6  d Z ddlZzddlZW n. eyF   ejdkr:ednedY n0 ddlZddlZ	ddl
mZ ddlmZ e	je	j d Ze ZG d	d
 d
ed
dZd&ddddZd'ddZg ZddddZedddd edddd dD ](Zedde ddee ddr qqedd d!d" ed#dd$d% [[dS )(zEWrapper to the POSIX crypt library call and associated functionality.    Nwin32z,The crypt module is not supported on Windowsz;The required _crypt module was not built as part of CPython)SystemRandom)
namedtuplez./c                   @   s   e Zd ZdZdd ZdS )_MethodziClass representing a salt method per the Modular Crypt Format or the
    legacy 2-character crypt method.c                 C   s   d | jS )Nz<crypt.METHOD_{}>)formatname)self r	   /usr/lib/python3.9/crypt.py__repr__   s    z_Method.__repr__N)__name__
__module____qualname____doc__r   r	   r	   r	   r
   r      s   r   z name ident salt_chars total_sizeroundsc                C   sB  | du rt d } |dur4t|ts4t|jj d| js@d}nd| j d}| jr| jd dkr|du rpd}n@t|d }|d|> krtd	d
|  krdksn td||dd7 }n^| jdv r|dur d|  krdksn td|d| d7 }n|dur t|  d|d	dd t
| jD 7 }|S )zsGenerate a salt for the specified method.

    If not specified, the strongest available method will be used.

    Nr   z+ object cannot be interpreted as an integer $2      zrounds must be a power of 2      z%rounds out of the range 2**4 to 2**31Z02d)56i  i;z+rounds out of the range 1000 to 999_999_999zrounds=z$ doesn't support the rounds argumentc                 s   s   | ]}t tV  qd S )N)_srchoice
_saltchars).0charr	   r	   r
   	<genexpr>B       zmksalt.<locals>.<genexpr>)methods
isinstanceint	TypeError	__class__r   ident
bit_length
ValueErrorjoinrangeZ
salt_chars)methodr   sZ
log_roundsr	   r	   r
   mksalt    s2    

r.   c                 C   s&   |du st |trt|}t| |S )aR  Return a string representing the one-way hash of a password, with a salt
    prepended.

    If ``salt`` is not specified or is ``None``, the strongest
    available method will be selected and a salt generated.  Otherwise,
    ``salt`` may be one of the ``crypt.METHOD_*`` values, or a string as
    returned by ``crypt.mksalt()``.

    N)r#   r   r.   _cryptcrypt)Zwordsaltr	   r	   r
   r0   F   s    
r0   c             
   G   s   t | g|R  }|t d|  < t||d}d }ztd|}W nJ ty } z2|jtjksb|jdkrpW Y d }~dS  W Y d }~n
d }~0 0 |rt||jkrt	
| dS dS )NZMETHOD_r   r   r   FT)r   globalsr.   r0   OSErrorerrnoEINVALlenZ
total_sizer"   append)r   r   argsr,   r1   resulter	   r	   r
   _add_methodX   s    
r;   ZSHA512r      j   ZSHA256r   ?   )byar   ZBLOWFISHr      ;   ZMD51   "   ZCRYPT      )N)N)r   sys_sysr/   ModuleNotFoundErrorplatformImportErrorr4   stringZ_stringZrandomr   Z_SystemRandomcollectionsr   Z_namedtupleZascii_lettersdigitsr   r   r   r.   r0   r"   r;   Z_vr6   r	   r	   r	   r
   <module>   s4   

	&
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          a
    !a?                     @   s  d Z ddlZddlmZmZmZmZmZmZm	Z	m
Z
mZmZmZmZmZm Z  ddlmZ ddlmZ g dZG dd dZG d	d
 d
eZed
e G dd deZede G dd deZede G dd dZG dd dZze W n ey   eZY n0 G dd dZdS )z+
csv.py - read/write/investigate CSV files
    N)Error__version__writerreaderregister_dialectunregister_dialectget_dialectlist_dialectsfield_size_limitQUOTE_MINIMAL	QUOTE_ALLQUOTE_NONNUMERIC
QUOTE_NONE__doc__)Dialect)StringIO)r   r   r   r   r   r   r   excel	excel_tabr
   r   r   r   r   r	   Snifferr   r   
DictReader
DictWriterunix_dialectc                   @   sD   e Zd ZdZdZdZdZdZdZdZ	dZ
dZdZdd Zdd ZdS )	r   zDescribe a CSV dialect.

    This must be subclassed (see csv.excel).  Valid attributes are:
    delimiter, quotechar, escapechar, doublequote, skipinitialspace,
    lineterminator, quoting.

     FNc                 C   s   | j tkrd| _|   d S )NT)	__class__r   _valid	_validateself r   /usr/lib/python3.9/csv.py__init__*   s    
zDialect.__init__c              
   C   sB   zt |  W n0 ty< } ztt|W Y d }~n
d }~0 0 d S N)_Dialect	TypeErrorr   str)r   er   r   r   r   /   s    zDialect._validate)__name__
__module____qualname__r   _namer   	delimiter	quotecharZ
escapechardoublequoteskipinitialspacelineterminatorquotingr    r   r   r   r   r   r      s   r   c                   @   s(   e Zd ZdZdZdZdZdZdZe	Z
dS )r   z;Describe the usual properties of Excel-generated CSV files.,"TF
N)r&   r'   r(   r   r*   r+   r,   r-   r.   r   r/   r   r   r   r   r   6   s   r   c                   @   s   e Zd ZdZdZdS )r   zEDescribe the usual properties of Excel-generated TAB-delimited files.	N)r&   r'   r(   r   r*   r   r   r   r   r   @   s   r   z	excel-tabc                   @   s(   e Zd ZdZdZdZdZdZdZe	Z
dS )r   z:Describe the usual properties of Unix-generated CSV files.r0   r1   TF
N)r&   r'   r(   r   r*   r+   r,   r-   r.   r   r/   r   r   r   r   r   E   s   r   Zunixc                   @   s@   e Zd ZdddZdd Zedd Zejd	d Zd
d ZdS )r   Nr   c                 O   s<   || _ || _|| _t||g|R i || _|| _d| _d S Nr   )_fieldnamesrestkeyrestvalr   dialectline_num)r   f
fieldnamesr7   r8   r9   argskwdsr   r   r   r    Q   s    zDictReader.__init__c                 C   s   | S r!   r   r   r   r   r   __iter__Z   s    zDictReader.__iter__c                 C   s>   | j d u r.zt| j| _ W n ty,   Y n0 | jj| _| j S r!   )r6   nextr   StopIterationr:   r   r   r   r   r<   ]   s    

zDictReader.fieldnamesc                 C   s
   || _ d S r!   )r6   )r   valuer   r   r   r<   g   s    c                 C   s   | j dkr| j t| j}| jj | _ |g kr8t| j}q$tt| j|}t| j}t|}||k rv||d  || j< n&||kr| j|d  D ]}| j||< q|S r5   )	r:   r<   r@   r   dictziplenr7   r8   )r   rowdZlfZlrkeyr   r   r   __next__k   s    



zDictReader.__next__)NNNr   )	r&   r'   r(   r    r?   propertyr<   setterrI   r   r   r   r   r   P   s     
	
	
r   c                   @   s6   e Zd ZdddZdd Zdd	 Zd
d Zdd ZdS )r   r   raiser   c                 O   sH   || _ || _| dvr$td| || _t||g|R i || _d S )N)rL   ignorez-extrasaction (%s) must be 'raise' or 'ignore')r<   r8   lower
ValueErrorextrasactionr   )r   r;   r<   r8   rP   r9   r=   r>   r   r   r   r       s    zDictWriter.__init__c                 C   s   t t| j| j}| |S r!   )rC   rD   r<   writerow)r   headerr   r   r   writeheader   s    zDictWriter.writeheaderc                    sN   j dkr8  j }|r8tdddd |D   fddjD S )NrL   z(dict contains fields not in fieldnames: z, c                 S   s   g | ]}t |qS r   )repr).0xr   r   r   
<listcomp>       z,DictWriter._dict_to_list.<locals>.<listcomp>c                 3   s   | ]}  |jV  qd S r!   )getr8   )rU   rH   rowdictr   r   r   	<genexpr>   rX   z+DictWriter._dict_to_list.<locals>.<genexpr>)rP   keysr<   rO   join)r   r[   Zwrong_fieldsr   rZ   r   _dict_to_list   s    
zDictWriter._dict_to_listc                 C   s   | j | |S r!   )r   rQ   r_   )r   r[   r   r   r   rQ      s    zDictWriter.writerowc                 C   s   | j t| j|S r!   )r   	writerowsmapr_   )r   Zrowdictsr   r   r   r`      s    zDictWriter.writerowsN)r   rL   r   )r&   r'   r(   r    rS   r_   rQ   r`   r   r   r   r   r      s     

r   c                   @   s:   e Zd ZdZdd ZdddZdd Zd	d
 Zdd ZdS )r   ze
    "Sniffs" the format of a CSV file (i.e. delimiter, quotechar)
    Returns a Dialect object.
    c                 C   s   g d| _ d S )N)r0   r3   ; :)	preferredr   r   r   r   r       s    zSniffer.__init__Nc                 C   sd   |  ||\}}}}|s(| ||\}}|s4tdG dd dt}||_||_|pVd|_||_|S )zI
        Returns a dialect (or None) corresponding to the sample
        zCould not determine delimiterc                   @   s   e Zd ZdZdZeZdS )zSniffer.sniff.<locals>.dialectZsniffedr2   N)r&   r'   r(   r)   r.   r   r/   r   r   r   r   r9      s   r9   r1   )_guess_quote_and_delimiter_guess_delimiterr   r   r,   r*   r+   r-   )r   sample
delimitersr+   r,   r*   r-   r9   r   r   r   sniff   s    


zSniffer.sniffc              	   C   s  g }dD ]*}t |t jt jB }||}|r q4q|s<dS i }i }d}|j}	|D ]}
|	d d }|
| }|r||dd ||< z|	d d }|
| }W n ty   Y qRY n0 |r|du s||v r||dd ||< z|	d d }W n ty   Y qRY n0 |
| rR|d7 }qRt||jd	}|rTt||jd	}|| |k}|d
kr\d}nd}d}t dt 	||d t j}|
|rd}nd}||||fS )a  
        Looks for text enclosed between two identical quotes
        (the probable quotechar) which are preceded and followed
        by the same character (the probable delimiter).
        For example:
                         ,'some text',
        The quote with the most wins, same with the delimiter.
        If there is no quotechar the delimiter can't be determined
        this way.
        )zI(?P<delim>[^\w\n"\'])(?P<space> ?)(?P<quote>["\']).*?(?P=quote)(?P=delim)zG(?:^|\n)(?P<quote>["\']).*?(?P=quote)(?P<delim>[^\w\n"\'])(?P<space> ?)zG(?P<delim>[^\w\n"\'])(?P<space> ?)(?P<quote>["\']).*?(?P=quote)(?:$|\n)z-(?:^|\n)(?P<quote>["\']).*?(?P=quote)(?:$|\n))r   FNr   r   quote   delimNZspacerH   r4   r   z]((%(delim)s)|^)\W*%(quote)s[^%(delim)s\n]*%(quote)s[^%(delim)s\n]*%(quote)s\W*((%(delim)s)|$))rm   rk   TF)recompileDOTALL	MULTILINEfindall
groupindexrY   KeyErrormaxescapesearch)r   datari   matchesZrestrZregexpZquotesdelimsspacesrt   mnrH   r+   rm   r-   Z	dq_regexpr,   r   r   r   rf      s`    




z"Sniffer._guess_quote_and_delimiterc                 C   s   t td|d}dd tdD }tdt|}d}i }i }i }d| }	}
|	t|k rR|d7 }||	|
 D ]@}|D ]6}||i }||}||dd ||< |||< qxqp| D ]}t || 	 }t|dkr|d d dkrqt|dkrLt
|d	d
 d||< |||  || d || d tdd |D  f||< q|d ||< q|	 }tt|| t|}d}d}t|dkr||kr|D ]T\}}|d dkr|d dkr|d | |kr|du s||v r|||< q|d8 }qt|dkrDt | d }|d ||d d| k}||fS |
}	|
|7 }
qN|s\dS t|dkr| jD ]@}|| v rp|d ||d d| k}||f  S qpdd |	 D }|  |d d }|d ||d d| k}||fS )a  
        The delimiter /should/ occur the same number of times on
        each row. However, due to malformed data, it may not. We don't want
        an all or nothing approach, so we allow for small variations in this
        number.
          1) build a table of the frequency of each character on every line.
          2) build a table of frequencies of this frequency (meta-frequency?),
             e.g.  'x occurred 5 times in 10 rows, 6 times in 1000 rows,
             7 times in 2 rows'
          3) use the mode of the meta-frequency to determine the /expected/
             frequency for that character
          4) find out how often the character actually meets that goal
          5) the character that best meets its goal is the delimiter
        For performance reasons, the data is evaluated in chunks, so it can
        try and evaluate the smallest portion of the data possible, evaluating
        additional chunks as necessary.
        Nr4   c                 S   s   g | ]}t |qS r   )chr)rU   cr   r   r   rW   -  rX   z,Sniffer._guess_delimiter.<locals>.<listcomp>   
   r   rl   c                 S   s   | d S )Nrl   r   )rV   r   r   r   <lambda>G  rX   z*Sniffer._guess_delimiter.<locals>.<lambda>rn   c                 s   s   | ]}|d  V  qdS )rl   Nr   )rU   itemr   r   r   r\   L  rX   z+Sniffer._guess_delimiter.<locals>.<genexpr>g      ?g?g{Gz?z%c )r   r   c                 S   s   g | ]\}}||fqS r   r   )rU   kvr   r   r   rW   v  rX   )listfiltersplitrangeminrE   rY   countr]   itemsrv   removesumfloatre   sort)r   ry   ri   asciiZchunkLengthZ	iterationZcharFrequencyZmodesr{   startendlinecharZmetaFrequencyZfreqr   ZmodeListtotalZconsistencyZ	thresholdr   r   rm   r-   rG   r   r   r   rg     s    



zSniffer._guess_delimiterc                 C   s  t t|| |}t|}t|}i }t|D ]}d ||< q0d}|D ]}|dkrV q|d7 }t||krlqFt| D ]v}	tt	t
fD ]2}
z|
||	  W  qW q ttfy   Y q0 qt||	 }
|
||	 krx||	 d u r|
||	< qx||	= qxqFd}| D ]z\}	}t|tdkr>t||	 |kr4|d7 }n|d8 }qz|||	  W n  ttfyn   |d7 }Y q0 |d8 }q|dkS )Nr      rl   )r   r   rj   r@   rE   r   r   r]   intr   complexrO   OverflowErrorr   typer#   )r   rh   ZrdrrR   columnsZcolumnTypesicheckedrF   colZthisTypeZ	hasHeaderZcolTyper   r   r   
has_header  sH    






zSniffer.has_header)N)	r&   r'   r(   r   r    rj   rf   rg   r   r   r   r   r   r      s   
Lgr   )r   ro   Z_csvr   r   r   r   r   r   r   r	   r
   r   r   r   r   r   r"   ior   __all__r   r   r   r   r   r   	NameErrorr   r   r   r   r   r   <module>   s&   @


2
                                                                                                                                                                                                                                                                                                                                                                                                                                                            .      ..     __init__.pyc   _aix.pyc   _endian.pyc    macholib   util.pyc  wintypes.pyc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            a
    !aDF                     @   s&  d Z ddlZddlZddlZdZddlm	Z	m
Z
mZ ddlmZ ddlmZ ddlmZ ddlmZmZ dd	lmZ dd
lmZ eekredeeejdkrddlmZ eZejdkrejdkree jdd dk reZddlmZ m!Z"m#Z$m%Z& d}ddZ'd~ddZ(i Z)dd Z*ejdkrdddlm+Z, ddlm-Z. i Z/dd Z0e0j r|e*j 1dde0_ nejdkr|ddlm2Z, ddlm3Z3m4Z4m5Z5m6Z6m7Z7 ddlm8Z8m9Z9 dd lm:Z: dd!d"Z;G d#d$ d$e:Z<e;e<d% G d&d' d'e:Z=e;e= G d(d) d)e:Z>e;e> G d*d+ d+e:Z?e;e? G d,d- d-e:Z@e;e@ ed.ed/krTe?ZAe@ZBn0G d0d1 d1e:ZAe;eA G d2d3 d3e:ZBe;eB G d4d5 d5e:ZCe;eC G d6d7 d7e:ZDe;eD G d8d9 d9e:ZEe3eEe3eDkreDZEed/ed:kre?ZFe@ZGn0G d;d< d<e:ZFe;eF G d=d> d>e:ZGe;eG G d?d@ d@e:ZHeH eH_IeH_Je;eH G dAdB dBe:ZKeK eK_IeK_Je;eK G dCdD dDe:ZLeL eL_IeL_Je;eL G dEdF dFe:ZMe;eMd% G dGdH dHe:ZNeNZOe;eN G dIdJ dJe:ZPddKlmQZQmRZRmSZS G dLdM dMe:ZTG dNdO dOe:ZUdPdQ ZVddRdSZWdTdU ZXdVdW ZYG dXdY dYeZZ[G dZd[ d[e[Z\ejdkrG d\d] d]e[Z]dd^lm^Z^m:Z: G d_d` d`e:Z_G dadb dbe[Z`G dcdd ddeZZaeae[Zbeae\Zcejdkre\dedejdZen,ejdfkre\dgejfddh  Zene\dZeejdkr@eae]Zgeae`ZhegjijjZjddilmkZkmlZl ddjdkZme3eBe3eNkr\eBZneAZon6e3e@e3eNkrxe@Zne?Zone3eGe3eNkreGZneFZoddllmpZpmqZqmrZrmsZs e*eNeNeNenepZte*eNeNeAeneqZudmdn Zveve<eNe<e<esZwdodp Zxeve<eNeAerZyddrdsZzzddtlm{Z{ W n e|y.   Y n0 eve<eNeAe{Z}ddudvZ~ejdkrfdwdx Zdydz Zdd{lmZmZ eKZeHZe=eAe?eFfD ]@Ze3edhkreZn&e3ed|kreZne3edkreZqe>eBe@eGfD ]@Ze3edhkreZn&e3ed|kreZne3edkreZq[eV  dS )z,create and manipulate C data types in Python    Nz1.1.0)Union	StructureArray)_Pointer)CFuncPtr)__version__)
RTLD_LOCALRTLD_GLOBAL)ArgumentErrorcalcsizezVersion number mismatchnt)FormatErrorposixdarwin.   )FUNCFLAG_CDECLFUNCFLAG_PYTHONAPIFUNCFLAG_USE_ERRNOFUNCFLAG_USE_LASTERRORc                 C   sz   t | trD|du rt| d }td| | t| }| }| |_|S t | trntdd|  t|  }| }|S t| dS )zcreate_string_buffer(aBytes) -> character array
    create_string_buffer(anInteger) -> character array
    create_string_buffer(aBytes, anInteger) -> character array
    N   zctypes.create_string_buffer)	
isinstancebyteslen_sysauditc_charvalueint	TypeErrorinitsizeZbuftypebuf r%   %/usr/lib/python3.9/ctypes/__init__.pycreate_string_buffer0   s    

r'   c                 C   s
   t | |S N)r'   )r"   r#   r%   r%   r&   c_bufferD   s    r)   c                    s   t |ddrtO |ddr,tO |r@td|  zt f W S  ty   G  fdddt}|t f< | Y S 0 dS )a  CFUNCTYPE(restype, *argtypes,
                 use_errno=False, use_last_error=False) -> function prototype.

    restype: the result type
    argtypes: a sequence specifying the argument types

    The function prototype can be called in different ways to create a
    callable object:

    prototype(integer address) -> foreign function
    prototype(callable) -> create and return a C callable function from callable
    prototype(integer index, method name[, paramflags]) -> foreign function calling a COM method
    prototype((ordinal number, dll object)[, paramflags]) -> foreign function exported by ordinal
    prototype((function name, dll object)[, paramflags]) -> foreign function exported by name
    	use_errnoFuse_last_error!unexpected keyword argument(s) %sc                       s   e Zd Z ZZZdS )z CFUNCTYPE.<locals>.CFunctionTypeN__name__
__module____qualname__
_argtypes_	_restype__flags_r%   argtypesflagsrestyper%   r&   CFunctionTypef   s   r8   N)	_FUNCFLAG_CDECLpop_FUNCFLAG_USE_ERRNO_FUNCFLAG_USE_LASTERROR
ValueErrorkeys_c_functype_cacheKeyError	_CFuncPtr)r7   r5   kwr8   r%   r4   r&   	CFUNCTYPEL   s    rC   )LoadLibrary)FUNCFLAG_STDCALLc                    s   t |ddrtO |ddr,tO |r@td|  zt f W S  ty   G  fdddt}|t f< | Y S 0 d S )Nr*   Fr+   r,   c                       s   e Zd Z ZZZdS )z$WINFUNCTYPE.<locals>.WinFunctionTypeNr-   r%   r4   r%   r&   WinFunctionType~   s   rF   )	_FUNCFLAG_STDCALLr:   r;   r<   r=   r>   _win_functype_cacher@   rA   )r7   r5   rB   rF   r%   r4   r&   WINFUNCTYPEr   s    rI   )dlopen)sizeofbyref	addressof	alignmentresize)	get_errno	set_errno)_SimpleCDatac                 C   sJ   ddl m} |d u r| j}t| || }}||krFtd| ||f d S )Nr   r   z"sizeof(%s) wrong: %d instead of %d)structr   _type_rK   SystemError)typtypecoder   Zactualrequiredr%   r%   r&   _check_size   s    rY   c                       s    e Zd ZdZ fddZ  ZS )	py_objectOc                    s2   zt   W S  ty,   dt| j  Y S 0 d S )Nz
%s(<NULL>))super__repr__r=   typer.   self	__class__r%   r&   r]      s    zpy_object.__repr__)r.   r/   r0   rT   r]   __classcell__r%   r%   ra   r&   rZ      s   rZ   Pc                   @   s   e Zd ZdZdS )c_shorthNr.   r/   r0   rT   r%   r%   r%   r&   re      s   re   c                   @   s   e Zd ZdZdS )c_ushortHNrg   r%   r%   r%   r&   rh      s   rh   c                   @   s   e Zd ZdZdS )c_longlNrg   r%   r%   r%   r&   rj      s   rj   c                   @   s   e Zd ZdZdS )c_ulongLNrg   r%   r%   r%   r&   rl      s   rl   irk   c                   @   s   e Zd ZdZdS )c_intrn   Nrg   r%   r%   r%   r&   ro      s   ro   c                   @   s   e Zd ZdZdS )c_uintINrg   r%   r%   r%   r&   rp      s   rp   c                   @   s   e Zd ZdZdS )c_floatfNrg   r%   r%   r%   r&   rr      s   rr   c                   @   s   e Zd ZdZdS )c_doubledNrg   r%   r%   r%   r&   rt      s   rt   c                   @   s   e Zd ZdZdS )c_longdoublegNrg   r%   r%   r%   r&   rv      s   rv   qc                   @   s   e Zd ZdZdS )
c_longlongrx   Nrg   r%   r%   r%   r&   ry      s   ry   c                   @   s   e Zd ZdZdS )c_ulonglongQNrg   r%   r%   r%   r&   rz      s   rz   c                   @   s   e Zd ZdZdS )c_ubyteBNrg   r%   r%   r%   r&   r|      s   r|   c                   @   s   e Zd ZdZdS )c_bytebNrg   r%   r%   r%   r&   r~      s   r~   c                   @   s   e Zd ZdZdS )r   cNrg   r%   r%   r%   r&   r      s   r   c                   @   s   e Zd ZdZdd ZdS )c_char_pzc                 C   s   d| j jt| jf S Nz%s(%s)rb   r.   c_void_pZfrom_bufferr   r_   r%   r%   r&   r]      s    zc_char_p.__repr__Nr.   r/   r0   rT   r]   r%   r%   r%   r&   r      s   r   c                   @   s   e Zd ZdZdS )r   rd   Nrg   r%   r%   r%   r&   r      s   r   c                   @   s   e Zd ZdZdS )c_bool?Nrg   r%   r%   r%   r&   r      s   r   )POINTERpointer_pointer_type_cachec                   @   s   e Zd ZdZdd ZdS )	c_wchar_pZc                 C   s   d| j jt| jf S r   r   r_   r%   r%   r&   r]      s    zc_wchar_p.__repr__Nr   r%   r%   r%   r&   r      s   r   c                   @   s   e Zd ZdZdS )c_wcharuNrg   r%   r%   r%   r&   r     s   r   c                   C   sF   t   t  tjdkr"t  tjtt	_t
jtt_tt d < d S )Nr   )r   clearr?   _osnamerH   r   Z
from_paramr   r   r   r   r   r%   r%   r%   r&   _reset_cache  s    
r   c                 C   s   t | trh|du rBttdkr6tdd | D d }nt| d }td| | t| }| }| |_|S t | t	rtdd|  t|  }| }|S t
| dS )zcreate_unicode_buffer(aString) -> character array
    create_unicode_buffer(anInteger) -> character array
    create_unicode_buffer(aString, anInteger) -> character array
    N   c                 s   s"   | ]}t |d krdndV  qdS )i  r   r   N)ord).0r   r%   r%   r&   	<genexpr>      z(create_unicode_buffer.<locals>.<genexpr>r   zctypes.create_unicode_buffer)r   strrK   r   sumr   r   r   r   r   r    r!   r%   r%   r&   create_unicode_buffer  s     

r   c                 C   sL   t |d d urtdt| t vr,td| | | t |< t t| = d S )Nz%This type already exists in the cachezWhat's this???)r   getRuntimeErroridZset_type)r   clsr%   r%   r&   SetPointerType/  s    
r   c                 C   s   | | S r(   r%   )rV   r   r%   r%   r&   ARRAY9  s    r   c                   @   sP   e Zd ZdZeZeZdZdZ	dZ
eddddfddZdd	 Zd
d Zdd ZdS )CDLLa  An instance of this class represents a loaded dll/shared
    library, exporting functions using the standard C calling
    convention (named 'cdecl' on Windows).

    The exported functions can be accessed as attributes, or by
    indexing with the function name.  Examples:

    <obj>.qsort -> callable object
    <obj>['qsort'] -> callable object

    Calling the functions releases the Python GIL during the call and
    reacquires it afterwards.
    z<uninitialized>r   NFc           	         s   |_ j |r tO  |r$ tO  tjdrV|rV|drVd|v rV|tj	tj
B O }tjdkr|d urn|}n6dd l}|j}d|v sd|v r|j _ ||jO }G  fdd	d	t}|_|d u rtj |_n|_d S )
NZaix)z.a(r   r   /\c                       s   e Zd Z ZjZdS )zCDLL.__init__.<locals>._FuncPtrN)r.   r/   r0   r3   _func_restype_r2   r%   r6   r`   r%   r&   _FuncPtrp  s   r   )_name_func_flags_r;   r<   r   platform
startswithendswithr   ZRTLD_MEMBERRTLD_NOWr   r   Z!_LOAD_LIBRARY_SEARCH_DEFAULT_DIRSZ_getfullpathnameZ!_LOAD_LIBRARY_SEARCH_DLL_LOAD_DIRrA   r   _dlopen_handle)	r`   r   modeZhandler*   r+   Zwinmoder   r   r%   r   r&   __init__T  s,    

zCDLL.__init__c                 C   s8   d| j j| j| jtjd d @ t| tjd d @ f S )Nz<%s '%s', handle %x at %#x>r   r   )rb   r.   r   r   r   maxsizer   r_   r%   r%   r&   r]   z  s    
zCDLL.__repr__c                 C   s6   | dr|drt|| |}t| || |S )N__)r   r   AttributeError__getitem__setattr)r`   r   funcr%   r%   r&   __getattr__  s
    
zCDLL.__getattr__c                 C   s"   |  || f}t|ts||_|S r(   )r   r   r   r.   )r`   Zname_or_ordinalr   r%   r%   r&   r     s    
zCDLL.__getitem__)r.   r/   r0   __doc__r9   r   ro   r   r   r   r   DEFAULT_MODEr   r]   r   r   r%   r%   r%   r&   r   ?  s   
&r   c                   @   s   e Zd ZdZeeB ZdS )PyDLLzThis class represents the Python library itself.  It allows
    accessing Python API functions.  The GIL is not released, and
    Python exceptions are handled correctly.
    N)r.   r/   r0   r   r9   _FUNCFLAG_PYTHONAPIr   r%   r%   r%   r&   r     s   r   c                   @   s   e Zd ZdZeZdS )WinDLLznThis class represents a dll exporting functions using the
        Windows stdcall calling convention.
        N)r.   r/   r0   r   rG   r   r%   r%   r%   r&   r     s   r   )_check_HRESULTrR   c                   @   s   e Zd ZdZeZdS )g  g  g  g  g                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              HRESULTrk   N)r.   r/   r0   rT   r   Z_check_retval_r%   r%   r%   r&   r     s   
r   c                   @   s   e Zd ZdZeZeZdS )OleDLLzThis class represents a dll exporting functions using the
        Windows stdcall calling convention, and returning HRESULT.
        HRESULT error values are automatically raised as OSError
        exceptions.
        N)r.   r/   r0   r   rG   r   r   r   r%   r%   r%   r&   r     s   r   c                   @   s6   e Zd Zdd Zdd Zdd Zdd Zeej	Z
d	S )
LibraryLoaderc                 C   s
   || _ d S r(   _dlltype)r`   Zdlltyper%   r%   r&   r     s    zLibraryLoader.__init__c                 C   s.   |d dkrt || |}t| || |S )Nr   _)r   r   r   )r`   r   Zdllr%   r%   r&   r     s
    
zLibraryLoader.__getattr__c                 C   s
   t | |S r(   )getattrr`   r   r%   r%   r&   r     s    zLibraryLoader.__getitem__c                 C   s
   |  |S r(   r   r   r%   r%   r&   rD     s    zLibraryLoader.LoadLibraryN)r.   r/   r0   r   r   r   rD   classmethod_typesGenericAlias__class_getitem__r%   r%   r%   r&   r     s
   r   z
python dllcygwinzlibpython%d.%d.dllr   )get_last_errorset_last_errorc                 C   s0   | d u rt  } |d u r"t|  }td |d | S r(   )GetLastErrorr   stripOSError)codeZdescrr%   r%   r&   WinError  s
    r   )_memmove_addr_memset_addr_string_at_addr
_cast_addrc                    s   G  fdddt }|S )Nc                       s   e Zd Z ZZeeB ZdS )z!PYFUNCTYPE.<locals>.CFunctionTypeN)r.   r/   r0   r1   r2   r9   r   r3   r%   r5   r7   r%   r&   r8     s   r8   )rA   )r7   r5   r8   r%   r   r&   
PYFUNCTYPE  s    r   c                 C   s   t | | |S r(   )_cast)objrV   r%   r%   r&   cast  s    r   c                 C   s
   t | |S )zAstring_at(addr[, size]) -> string

    Return the string at addr.)
_string_atZptrr#   r%   r%   r&   	string_at  s    r   )_wstring_at_addrc                 C   s
   t | |S )zFwstring_at(addr[, size]) -> string

        Return the string at addr.)_wstring_atr   r%   r%   r&   
wstring_at  s    r   c                 C   s@   zt dt t dg}W n ty,   Y dS 0 || ||S d S )Ncomtypes.server.inprocserver*i)
__import__globalslocalsImportErrorDllGetClassObject)ZrclsidZriidZppvccomr%   r%   r&   r     s
    r   c                  C   s6   zt dt t dg} W n ty,   Y dS 0 |  S )Nr   r   r   )r   r   r   r   DllCanUnloadNow)r   r%   r%   r&   r     s
    r   )BigEndianStructureLittleEndianStructure   )N)N)N)N)NN)r   )r   )r   osr   sysr   typesr   r   Z_ctypesr   r   r   r   r   rA   Z_ctypes_versionr   r	   r
   rS   r   Z	_calcsize	Exceptionr   r   r   r   r   unamereleasesplitr   r9   r   r   r   r;   r   r<   r'   r)   r?   rC   rD   r   rE   rG   rH   rI   replacerJ   rK   rL   rM   rN   rO   rP   rQ   rR   rY   rZ   re   rh   rj   rl   ro   rp   rr   rt   rv   ry   rz   r|   Z__ctype_le__Z__ctype_be__r~   r   r   r   Zc_voidpr   r   r   r   r   r   r   r   r   r   objectr   r   r   r   r   r   r   ZcdllZpydllZ	dllhandleZ	pythonapiversion_infoZwindllZoledllZkernel32r   r   r   r   Zc_size_tZ	c_ssize_tr   r   r   r   ZmemmoveZmemsetr   r   r   r   r   r   r   r   r   r   r   Zctypes._endianr   r   Zc_int8Zc_uint8kindZc_int16Zc_int32Zc_int64Zc_uint16Zc_uint32Zc_uint64r%   r%   r%   r&   <module>   s*  


!




N	


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a
    !a1                     @   s   d Z dZddlZddlmZmZ ddlmZ ddlm	Z	m
Z
 ddlmZmZmZ e
e	d Zdd	lmZ d
d Zdd Zdd Zdd Zdd Zdd Zdd Zdd Zdd Zdd Zdd Zd d! ZdS )"a  
Lib/ctypes.util.find_library() support for AIX
Similar approach as done for Darwin support by using separate files
but unlike Darwin - no extension such as ctypes.macholib.*

dlopen() is an interface to AIX initAndLoad() - primary documentation at:
https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.basetrf1/dlopen.htm
https://www.ibm.com/support/knowledgecenter/en/ssw_aix_61/com.ibm.aix.basetrf1/load.htm

AIX supports two styles for dlopen(): svr4 (System V Release 4) which is common on posix
platforms, but also a BSD style - aka SVR3.

From AIX 5.3 Difference Addendum (December 2004)
2.9 SVR4 linking affinity
Nowadays, there are two major object file formats used by the operating systems:
XCOFF: The COFF enhanced by IBM and others. The original COFF (Common
Object File Format) was the base of SVR3 and BSD 4.2 systems.
ELF:   Executable and Linking Format that was developed by AT&T and is a
base for SVR4 UNIX.

While the shared library content is identical on AIX - one is located as a filepath name
(svr4 style) and the other is located as a member of an archive (and the archive
is located as a filepath name).

The key difference arises when supporting multiple abi formats (i.e., 32 and 64 bit).
For svr4 either only one ABI is supported, or there are two directories, or there
are different file names. The most common solution for multiple ABI is multiple
directories.

For the XCOFF (aka AIX) style - one directory (one archive file) is sufficient
as multiple shared libraries can be in the archive - even sharing the same name.
In documentation the archive is also referred to as the "base" and the shared
library object is referred to as the "member".

For dlopen() on AIX (read initAndLoad()) the calls are similar.
Default activity occurs when no path information is provided. When path
information is provided dlopen() does not search any other directories.

For SVR4 - the shared library name is the name of the file expected: libFOO.so
For AIX - the shared library is expressed as base(member). The search is for the
base (e.g., libFOO.a) and once the base is found the shared library - identified by
member (e.g., libFOO.so, or shr.o) is located and loaded.

The mode bit RTLD_MEMBER tells initAndLoad() that it needs to use the AIX (SVR3)
naming style.
z%Michael Felt <aixtools@felt.demon.nl>    N)environpath)
executable)c_void_psizeof)PopenPIPEDEVNULL   )maxsizec                    s    fdd}t t| |dS )Nc                    sJ   |   }g }z|r*|dt|  qW n ty>   Y n0 |pHtgS )Nr   )splitinsertintpop
ValueErrorr   )ZlibnamepartsZnumssep !/usr/lib/python3.9/ctypes/_aix.py_num_version>   s    
z#_last_version.<locals>._num_version)key)maxreversed)Zlibnamesr   r   r   r   r   _last_version=   s    
r   c                 C   s:   d }| j D ]*}|dr|}q
d|v r
|d  S q
d S )N)/z./z../ZINDEX
)stdout
startswithrstrip)p	ld_headerliner   r   r   get_ld_headerJ   s    

r#   c                 C   s0   g }| j D ] }td|r&|| q
 q,q
|S )Nz[0-9])r   rematchappend)r    infor"   r   r   r   get_ld_header_infoT   s    
r(   c                 C   s\   g }t ddt d| gdttd}t|}|rF||t|f q"qFq"|j  |	  |S )z
    Parse the header of the loader section of executable and archives
    This function calls /usr/bin/dump -H as a subprocess
    and returns a list of (ld_header, ld_header_info) tuples.
    z/usr/bin/dumpz-Xz-HT)Zuniversal_newlinesr   stderr)
r   AIX_ABIr   r	   r#   r&   r(   r   closewait)fileZldr_headersr    r!   r   r   r   get_ld_headersa   s    

r.   c                 C   s6   g }| D ](\}}d|v r| ||dd  q|S )z
    extract the shareable objects from ld_headers
    character "[" is used to strip off the path information.
    Note: the "[" and "]" characters that are part of dump -H output
    are not removed here.
    [)r&   index)Z
ld_headersZsharedr"   _r   r   r   
get_sharedy   s
    r3   c                    sJ   d  d t td fdd|D }t|dkrB|d dS dS dS )zy
    Must be only one match, otherwise result is None.
    When there is a match, strip leading "[" and trailing "]"
    z\[(z)\]Nc                 3   s   | ]}t  |V  qd S )N)r$   search).0r"   exprr   r   	<genexpr>       z get_one_match.<locals>.<genexpr>   r   )listfilterlengroup)r7   linesmatchesr   r6   r   get_one_match   s
    rA   c                 C   sJ   t dkr d}t|| }|rF|S n&dD ] }tt|| }|r$|  S q$dS )z
    This routine provides historical aka legacy naming schemes started
    in AIX4 shared library support for library members names.
    e.g., in /usr/lib/libc.a the member name shr.o for 32-bit binary and
    shr_64.o for 64-bit binary.
    @   zshr4?_?64\.o)zshr.ozshr4.oN)r*   rA   r$   escape)membersr7   membernamer   r   r   
get_legacy   s    

rG   c                 C   sf   d|  dd|  dg}|D ]D}g }|D ]$}t ||}|r(||d q(|rt|d  S qdS )a  
    Sort list of members and return highest numbered version - if it exists.
    This function is called when an unversioned libFOO.a(libFOO.so) has
    not been found.

    Versioning for the member name is expected to follow
    GNU LIBTOOL conventions: the highest version (x, then X.y, then X.Y.z)
     * find [libFoo.so.X]
     * find [libFoo.so.X.Y]
     * find [libFoo.so.X.Y.Z]

    Before the GNU convention became the standard scheme regardless of
    binary size AIX packagers used GNU convention "as-is" for 32-bit
    archive members but used an "distinguishing" name for 64-bit members.
    This scheme inserted either 64 or _64 between libFOO and .so
    - generally libFOO_64.so, but occasionally libFOO64.so
    libz\.so\.[0-9]+[0-9.]*z_?64\.so\.[0-9]+[0-9.]*r   .N)r$   r4   r&   r>   r   )rF   rD   Zexprsr7   Zversionsr"   mr   r   r   get_version   s    

rK   c                 C   sb   d|  d}t ||}|r|S tdkr<d|  d}t ||}|rD|S t| |}|rV|S t|S dS )ab  
    Return an archive member matching the request in name.
    Name is the library name without any prefix like lib, suffix like .so,
    or version number.
    Given a list of members find and return the most appropriate result
    Priority is given to generic libXXX.so, then a versioned libXXX.so.a.b.c
    and finally, legacy AIX naming scheme.
    rH   z\.sorB   z64\.soN)rA   r*   rK   rG   )rF   rD   r7   rE   r   r   r   
get_member   s    



rL   c                  C   s|   t d} | du rt d} | du r*g } n
| d} tt}|D ]6\}}|D ](}| d }d|v rL| |d qLq@| S )a  
    On AIX, the buildtime searchpath is stored in the executable.
    as "loader header information".
    The command /usr/bin/dump -H extracts this info.
    Prefix searched libraries with LD_LIBRARY_PATH (preferred),
    or LIBPATH if defined. These paths are appended to the paths
    to libraries the python executable is linked with.
    This mimics AIX dlopen() behavior.
    ZLD_LIBRARY_PATHNZLIBPATH:r:   r   )r   getr   r.   r   extend)libpathsZobjectsr2   r?   r"   r   r   r   r   get_libpaths   s    



rQ   c                 C   sp   | D ]f}|dkrqd| d}t ||}t |rtt|}tt||}|dkrd||f  S  dS qdS )a  
    paths is a list of directories to search for an archive.
    name is the abbreviated name given to find_library().
    Process: search "paths" for archive, and if an archive is found
    return the result of get_member().
    If an archive is not found then return None
    /librH   z.aN)NN)r   joinexistsr3   r.   rL   r$   rC   )pathsrF   dirbasearchiverD   rE   r   r   r   find_shared
  s    
rY   c                 C   sn   t  }t|| \}}|dkr,| d| dS d|  d}|D ],}|dkrJq<t||}t|r<|  S q<dS )a  AIX implementation of ctypes.util.find_library()
    Find an archive member that will dlopen(). If not available,
    also search for a file (or link) with a .so suffix.

    AIX supports two types of schemes that can be used with dlopen().
    The so-called SystemV Release4 (svr4) format is commonly suffixed
    with .so while the (default) AIX scheme has the library (archive)
    ending with the suffix .a
    As an archive has multiple members (e.g., 32-bit and 64-bit) in one file
    the argument passed to dlopen must include both the library and
    the member names in a single string.

    find_library() looks first for an archive (.a) with a suitable member.
    If no archive+member pair is found, look for a .so file.
    N()rH   z.sorR   )rQ   rY   r   rS   rT   )rF   rP   rW   rE   ZsonamerV   Zshlibr   r   r   find_library#  s    

r\   )__doc__
__author__r$   osr   r   sysr   Zctypesr   r   
subprocessr   r   r	   r*   r   r   r#   r(   r.   r3   rA   rG   rK   rL   rQ   rY   r\   r   r   r   r   <module>   s(   .
&                                                                                                                                                                                                                                                                                                                                                                                                                      a
    !a                     @   s   d dl Z d dlT eeZdd ZG dd deeZe jdkr\dZ	eZ
G d	d
 d
eedZn0e jdkrdZ	eZG dd deedZ
neddS )    N)*c                 C   sL   t | trt| tS t| tr.t| j| j S t| t	r<| S t
d|  dS )zReturn the type with the 'other' byte order.  Simple types like
    c_int and so on already have __ctype_be__ and __ctype_le__
    attributes which contain the types, for more complicated types
    arrays and structures are supported.
    z+This type does not support other endian: %sN)hasattr_OTHER_ENDIANgetattr
isinstance_array_type_other_endianZ_type_Z_length_
issubclass	Structure	TypeError)typ r   $/usr/lib/python3.9/ctypes/_endian.pyr      s    



r   c                       s   e Zd Z fddZ  ZS )_swapped_metac                    s^   |dkrLg }|D ]6}|d }|d }|dd  }| |t|f|  q|}t || d S )NZ_fields_r         )appendr   super__setattr__)selfattrnamevaluefieldsZdescnamer   rest	__class__r   r   r      s    z_swapped_meta.__setattr__)__name__
__module____qualname__r   __classcell__r   r   r   r   r      s   r   littleZ__ctype_be__c                   @   s   e Zd ZdZdZdZdS )BigEndianStructurez$Structure with big endian byte orderr   Nr   r   r   __doc__	__slots__Z_swappedbytes_r   r   r   r   r"   .   s   r"   )	metaclassZbigZ__ctype_le__c                   @   s   e Zd ZdZdZdZdS )LittleEndianStructurez'Structure with little endian byte orderr   Nr#   r   r   r   r   r'   7   s   r'   zInvalid byteorder)sysZctypestypeZArrayr   r   r
   r   	byteorderr   r'   r"   RuntimeErrorr   r   r   r   <module>   s   

                                                                                                                          .      ..     README.ctypes      __init__.pyc   dyld.pyc   	dylib.pyc      fetch_macholib     fetch_macholib.bat    dframework.pyc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Files in this directory come from Bob Ippolito's py2app.

License: Any components of the py2app suite may be distributed under
the MIT or PSF open source licenses.

This is version 1.0, SVN revision 789, from 2006/01/25.
The main repository is http://svn.red-bean.com/bob/macholib/trunk/macholib/                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        a
    !a                      @   s   d Z dZdS )z~
Enough Mach-O to make your head spin.

See the relevant header files in /usr/include/mach-o

And also Apple's documentation.
z1.0N)__doc____version__ r   r   ./usr/lib/python3.9/ctypes/macholib/__init__.py<module>   s                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        a
    !a                     @   s  d Z ddlZddlmZ ddlmZ ddlT zddlmZ W n e	yV   dd ZY n0 g d	Z
ejd
dddgZejddddgZdd Zd-ddZd.ddZd/ddZd0ddZd1ddZd2ddZd3d d!Zd4d"d#Zd5d$d%Zd6d&d'Zd7d(d)Zd*d+ Zed,kre  dS )8z
dyld emulation
    N)framework_info)
dylib_info)*) _dyld_shared_cache_contains_pathc                  G   s   t d S )N)NotImplementedError)args r   */usr/lib/python3.9/ctypes/macholib/dyld.pyr      s    r   )	dyld_findframework_findr   r   z~/Library/Frameworksz/Library/Frameworksz/Network/Library/Frameworksz/System/Library/Frameworksz~/libz/usr/local/libz/libz/usr/libc                 C   s.   | d u rt j} | |}|d u r$g S |dS )N:)osenvirongetsplit)envvarZrvalr   r   r	   dyld_env$   s    
r   c                 C   s   | d u rt j} | dS )NZDYLD_IMAGE_SUFFIX)r   r   r   r   r   r   r	   dyld_image_suffix,   s    r   c                 C   s
   t | dS )NZDYLD_FRAMEWORK_PATHr   r   r   r   r	   dyld_framework_path1   s    r   c                 C   s
   t | dS )NZDYLD_LIBRARY_PATHr   r   r   r   r	   dyld_library_path4   s    r   c                 C   s
   t | dS )NZDYLD_FALLBACK_FRAMEWORK_PATHr   r   r   r   r	   dyld_fallback_framework_path7   s    r   c                 C   s
   t | dS )NZDYLD_FALLBACK_LIBRARY_PATHr   r   r   r   r	   dyld_fallback_library_path:   s    r   c                 C   s(   t |}|du r| S | |fdd}| S )z>For a potential path iterator, add DYLD_IMAGE_SUFFIX semanticsNc                 s   sF   | D ]<}| dr0|d td  | d V  n
|| V  |V  qd S )Nz.dylib)endswithlen)iteratorsuffixpathr   r   r	   _injectB   s
    

z)dyld_image_suffix_search.<locals>._inject)r   )r   r   r   r    r   r   r	   dyld_image_suffix_search=   s
    r!   c                 c   s\   t | }|d ur2t|D ]}tj||d V  qt|D ]}tj|tj| V  q:d S Nname)r   r   r   r   joinr   basename)r#   r   	frameworkr   r   r   r	   dyld_override_searchK   s    r'   c                 c   s2   |  dr.|d ur.tj|| tdd  V  d S )Nz@executable_path/)
startswithr   r   r$   r   )r#   executable_pathr   r   r	   dyld_executable_path_search\   s    r*   c                 c   s   | V  t | }|d ur<t|}|D ]}tj||d V  q"t|}|D ]}tj|tj| V  qH|d ur|stD ]}tj||d V  qv|stD ]}tj|tj| V  qd S r"   )	r   r   r   r   r$   r   r%   DEFAULT_FRAMEWORK_FALLBACKDEFAULT_LIBRARY_FALLBACK)r#   r   r&   Zfallback_framework_pathr   Zfallback_library_pathr   r   r	   dyld_default_searchc   s    r-   c              	   C   sz   t tt| |t| |t| ||D ]B}tj|r<|  S zt|rP|W   S W q$ t	yd   Y q$0 q$t
d| f dS )z:
    Find a library or framework using dyld semantics
    zdylib %s could not be foundN)r!   chainr'   r*   r-   r   r   isfiler   r   
ValueError)r#   r)   r   r   r   r   r	   r
   y   s    r
   c              
   C   s   d}zt | ||dW S  ty< } z|}W Y d}~n
d}~0 0 | d}|dkr`t| }| d7 } tj| tj| d| } z6zt | ||dW W d}S  ty   |Y n0 W d}nd}0 dS )z
    Find a framework using dyld semantics in a very loose manner.

    Will take input such as:
        Python
        Python.framework
        Python.framework/Versions/Current
    N)r)   r   z
.framework)r
   r0   rfindr   r   r   r$   r%   )fnr)   r   erroreZ
fmwk_indexr   r   r	   r      s"    	
r   c                  C   s(   i } t ddksJ t ddks$J d S )NzlibSystem.dylibz/usr/lib/libSystem.dylibzSystem.framework/Systemz2/System/Library/Frameworks/System.framework/System)r
   r   r   r   r	   test_dyld_find   s    r6   __main__)N)N)N)N)N)N)N)N)N)NN)NN)__doc__r   Zctypes.macholib.frameworkr   Zctypes.macholib.dylibr   	itertoolsZ_ctypesr   ImportError__all__r   
expanduserr+   r,   r   r   r   r   r   r   r!   r'   r*   r-   r
   r   r6   __name__r   r   r   r	   <module>   sD   













                                                                                                                                                                                                                                                                                                                                                                                                                                                                                a
    !a$                     @   s>   d Z ddlZdgZedZdd Zdd Zedkr:e  dS )	z!
Generic dylib path manipulation
    N
dylib_infoz(?x)
(?P<location>^.*)(?:^|/)
(?P<name>
    (?P<shortname>\w+?)
    (?:\.(?P<version>[^._]+))?
    (?:_(?P<suffix>[^._]+))?
    \.dylib$
)
c                 C   s   t | }|sdS | S )a1  
    A dylib name can take one of the following four forms:
        Location/Name.SomeVersion_Suffix.dylib
        Location/Name.SomeVersion.dylib
        Location/Name_Suffix.dylib
        Location/Name.dylib

    returns None if not found or a mapping equivalent to:
        dict(
            location='Location',
            name='Name.SomeVersion_Suffix.dylib',
            shortname='Name',
            version='SomeVersion',
            suffix='Suffix',
        )

    Note that SomeVersion and Suffix are optional and may be None
    if not present.
    N)DYLIB_REmatch	groupdict)filenameZis_dylib r   +/usr/lib/python3.9/ctypes/macholib/dylib.pyr      s    
c                  C   s   ddd} t dd u sJ t dd u s*J t d| dddksBJ t d	| dd
dddks^J t d| ddddksxJ t d| ddddksJ t d| dddddksJ d S )Nc                 S   s   t | ||||dS )NlocationnameZ	shortnameversionsuffix)dictr	   r   r   r   d.   s    ztest_dylib_info.<locals>.dzcompletely/invalidzcompletely/invalide_debugzP/Foo.dylibPz	Foo.dylibZFoozP/Foo_debug.dylibzFoo_debug.dylibdebug)r   zP/Foo.A.dylibzFoo.A.dylibAzP/Foo_debug.A.dylibzFoo_debug.A.dylibZ	Foo_debugzP/Foo.A_debug.dylibzFoo.A_debug.dylib)NNNNN)r   )r   r   r   r   test_dylib_info-   s    
r   __main__)__doc__re__all__compiler   r   r   __name__r   r   r   r   <module>   s   

                                                                                                                                                    #!/bin/sh
svn export --force http://svn.red-bean.com/bob/macholib/trunk/macholib/ .
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            svn export --force http://svn.red-bean.com/bob/macholib/trunk/macholib/ .
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     a
    !a                     @   s>   d Z ddlZdgZedZdd Zdd Zedkr:e  dS )	z%
Generic framework path manipulation
    Nframework_infoz(?x)
(?P<location>^.*)(?:^|/)
(?P<name>
    (?P<shortname>\w+).framework/
    (?:Versions/(?P<version>[^/]+)/)?
    (?P=shortname)
    (?:_(?P<suffix>[^_]+))?
)$
c                 C   s   t | }|sdS | S )a}  
    A framework name can take one of the following four forms:
        Location/Name.framework/Versions/SomeVersion/Name_Suffix
        Location/Name.framework/Versions/SomeVersion/Name
        Location/Name.framework/Name_Suffix
        Location/Name.framework/Name

    returns None if not found, or a mapping equivalent to:
        dict(
            location='Location',
            name='Name.framework/Versions/SomeVersion/Name_Suffix',
            shortname='Name',
            version='SomeVersion',
            suffix='Suffix',
        )

    Note that SomeVersion and Suffix are optional and may be None
    if not present
    N)STRICT_FRAMEWORK_REmatch	groupdict)filenameZis_framework r   //usr/lib/python3.9/ctypes/macholib/framework.pyr      s    
c                  C   s   ddd} t dd u sJ t dd u s*J t dd u s:J t dd u sJJ t d| dd	d
ksbJ t d| ddd
ddks~J t dd u sJ t dd u sJ t d| ddd
dksJ t d| ddd
ddksJ d S )Nc                 S   s   t | ||||dS )NlocationnameZ	shortnameversionsuffix)dictr	   r   r   r   d-   s    ztest_framework_info.<locals>.dzcompletely/invalidzcompletely/invalid/_debugzP/F.frameworkzP/F.framework/_debugzP/F.framework/FPzF.framework/FFzP/F.framework/F_debugzF.framework/F_debugdebug)r   zP/F.framework/VersionszP/F.framework/Versions/AzP/F.framework/Versions/A/FzF.framework/Versions/A/FAz P/F.framework/Versions/A/F_debugzF.framework/Versions/A/F_debug)NNNNN)r   )r   r   r   r   test_framework_info,   s    
r   __main__)__doc__re__all__compiler   r   r   __name__r   r   r   r   <module>   s   

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            a
    !a76                     @   sB  d dl Z d dlZd dlZd dlZe jdkrDdd Zdd Zdd Zne jd	krnejd
krnd dl	m
Z dd Znejdrd dlmZ ne jd	kr&d dlZd dlZdd Zdd Zejdkrdd Zndd Zejdrdd Zdd Zn8ejdkrdd Zd'ddZndd  Zd!d" Zd#d Zd$d% Zed&kr>e  dS )(    Nntc                  C   s   d} t j| }|dkrdS |t|  }t j|d dd\}}t|dd d }|dkrf|d7 }t|d	d
 d }|dkrd}|dkr|| S dS )zReturn the version of MSVC that was used to build Python.

        For Python 2.3 and up, the version number is included in
        sys.version.  For earlier versions, assume the compiler is MSVC 6.
        zMSC v.   N             g      $@r   )sysversionfindlensplitint)prefixisrestZmajorVersionZminorVersion r   !/usr/lib/python3.9/ctypes/util.py_get_build_version	   s    r   c                  C   s^   t  } | du rdS | dkr d}n| dkr6d| d  }ndS ddl}d|jjv rV|d	7 }|d
 S )z%Return the name of the VC runtime dllNr   msvcrtr   zmsvcr%d
   r   z_d.pydd.dll)r   importlib.machinery	machineryEXTENSION_SUFFIXES)r   Zclibname	importlibr   r   r   find_msvcrt"   s    r    c                 C   sx   | dv rt  S tjd tjD ]R}tj|| }tj|rF|  S | 	drVq |d }tj|r |  S q d S )N)cmPATHr   )
r    osenvironr   pathseppathjoinisfilelowerendswith)nameZ	directoryZfnamer   r   r   find_library7   s    
r-   posixdarwin)	dyld_findc              	   C   sN   d|  d|  d| | f g}|D ]*} zt | W   S  tyF   Y qY q0 qd S )Nzlib%s.dylibz%s.dylibz%s.framework/%s)
_dyld_find
ValueError)r,   possibler   r   r   r-   H   s    
aix)r-   c                 C   s@   d}t | d}|d|kW  d   S 1 s20    Y  dS )z,Return True if the given file is an ELF files   ELFbr   N)openread)filenameZ
elf_headerthefiler   r   r   _is_elf`   s    r;   c           
      C   st  t dt|  }td}|s,td}|s4d S t }z|dd|jd|  g}t	t j
}d|d< d|d	< ztj|tjtj|d
}W n6 ty   Y W z|  W n ty   Y n0 d S 0 | |j }W d    n1 s0    Y  W z|  W n ty   Y n0 n$z|  W n ty2   Y n0 0 t||}|sLd S |D ]}	t|	sbqPt |	  S d S )N[^\(\)\s]*lib%s\.[^\(\)\s]*ZgccZccz-Wl,-t-oz-lCLC_ALLLANGstdoutstderrenv)r$   fsencodereescapeshutilwhichtempfileZNamedTemporaryFiler,   dictr%   
subprocessPopenPIPEZSTDOUTOSErrorcloseFileNotFoundErrorrB   r8   findallr;   fsdecode)
r,   exprZ
c_compilerZtempargsrD   procZtraceresfiler   r   r   _findLib_gccf   sT    



*
rY   Zsunos5c                 C   s   | sd S zt jdd| ft jt jd}W n ty:   Y d S 0 | |j }W d    n1 s`0    Y  td|}|s~d S t	
|dS )Nz/usr/ccs/bin/dumpz-LpvrB   rC   s   \[.*\]\sSONAME\s+([^\s]+)r   )rL   rM   rN   DEVNULLrO   rB   r8   rF   searchr$   rS   group)frV   datarW   r   r   r   _get_soname   s    
(r`   c                 C   s   | sd S t d}|sd S z"tj|ddd| ftjtjd}W n tyP   Y d S 0 | |j }W d    n1 sv0    Y  t	
d|}|sd S t|dS )Nobjdump-pz-jz.dynamicrZ   s   \sSONAME\s+([^\s]+)r   )rH   rI   rL   rM   rN   r[   rO   rB   r8   rF   r\   r$   rS   r]   )r^   ra   rV   dumprW   r   r   r   r`      s$    

()ZfreebsdZopenbsdZ	dragonflyc                 C   sL   |  d}g }z|r*|dt|  qW n ty>   Y n0 |pJtjgS )N   .r   )r   insertr   popr2   r   maxsize)ZlibnamepartsZnumsr   r   r   _num_version   s    
ri   c                 C   s   t | }d||f }t|}ztjdtjtjd}W n tyN   d}Y n00 | |j	
 }W d    n1 st0    Y  t ||}|stt| S |jtd t|d S )Nz:-l%s\.\S+ => \S*/(lib%s\.\S+))/sbin/ldconfigz-rrZ       )keyr   )rF   rG   r$   rE   rL   rM   rN   r[   rO   rB   r8   rR   r`   rY   sortri   rS   )r,   ZenamerT   rV   r_   rW   r   r   r   r-      s"    



(c           	      C   s   t jdsd S tt j}d|d< |r,d}nd}d }ztj|tjtj|d}W n t	yb   Y d S 0 |@ |j
D ](}| }|drpt | d }qpW d    n1 s0    Y  |sd S |d	D ]*}t j|d
|  }t j|r|  S qd S )N/usr/bin/crler>   r?   )rn   -64)rn   rA   s   Default Library Path (ELF):r6   :zlib%s.so)r$   r'   existsrK   r%   rL   rM   rN   r[   rO   rB   strip
startswithrS   r   r(   )	r,   is64rD   rU   pathsrV   linedirZlibfiler   r   r   _findLib_crle   s8    



2
rx   Fc                 C   s   t t| |pt| S N)r`   rx   rY   )r,   rt   r   r   r   r-   	  s    c                 C   s  dd l }|ddkr&t jd }nt jd }dddddd	}||d
}d}t|t| |f }z~t	j
ddgt	jt	jt	jddddF}t||j }|rt|dW  d    W S W d    n1 s0    Y  W n ty   Y n0 d S )Nr   lr6   z-32ro   zlibc6,x86-64zlibc6,64bitzlibc6,IA-64)z	x86_64-64zppc64-64z
sparc64-64zs390x-64zia64-64Zlibc6z\s+(lib%s\.[^\s]+)\s+\(%srj   rb   r>   )r?   r@   )stdinrC   rB   rD   r   )structZcalcsizer$   unamemachinegetrE   rF   rG   rL   rM   r[   rN   r\   rB   r8   rS   r]   rO   )r,   r|   r~   Zmach_mapZabi_typeZregexprW   r   r   r   _findSoname_ldconfig  s4    
Br   c                 C   s   dt |  }ddg}tjd}|rD|dD ]}|d|g q0|dtjd|  g d }zZtj	|tj
tj
d	d
}| \}}t |t|}	|	D ]}
t|
sqt|
  W S W n ty   Y n0 |S )Nr<   Zldz-tZLD_LIBRARY_PATHrp   z-Lr=   z-l%sT)rB   rC   Zuniversal_newlines)rF   rG   r$   r%   r   r   extenddevnullrL   rM   rN   ZcommunicaterR   rS   r;   	Exception)r,   rT   cmdZlibpathr   resultr   out_rW   rX   r   r   r   _findLib_ld,  s,    
r   c                 C   s    t | ptt| ptt| S ry   )r   r`   rY   r   )r,   r   r   r   r-   G  s
    

c                  C   s  ddl m}  tjdkr:t| j t| d ttd tjdkrttd ttd ttd tj	d	krt| 
d
 t| 
d t| 
d t| 
d ntj	drddl m} tjdk rtd|dtj  td| 
d  ttd t| 
d n*td|dtj  td| 
d  tdtd  td| 
td  tdtd  td| 
td  n(t| 
d t| 
d ttd d S )Nr   )cdllr   r   r.   r"   r!   bz2r/   z
libm.dylibzlibcrypto.dylibzlibSystem.dylibzSystem.framework/Systemr4   )CDLLl        z"Using CDLL(name, os.RTLD_MEMBER): zlibc.a(shr.o)zUsing cdll.LoadLibrary(): Zrpmz	librpm.sozlibc.a(shr_64.o)z	crypt	:: Zcryptz
crypto	:: Zcryptozlibm.sozlibcrypt.so)Zctypesr   r$   r,   printr   loadr-   r   platformZLoadLibraryrs   r   rg   ZRTLD_MEMBER)r   r   r   r   r   testO  s<    


r   __main__)F)r$   rH   rL   r   r,   r   r    r-   r   Zctypes.macholib.dyldr0   r1   rs   Zctypes._aixrF   rJ   r;   rY   r`   ri   rx   r   r   r   __name__r   r   r   r   <module> 